<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Habit Tracker Pro - Community Edition">
    <meta name="theme-color" content="#000000">
    <title>Habit Tracker Pro</title>

    <!-- ── PWA ── -->
    <link rel="manifest" href="./manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="HabitTracker">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./icons/icon-144x144.png">
    <!-- Splash screens for iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- ── Umami Analytics ── -->
    <script defer src="https://umami-psi-opal.vercel.app/script.js" data-website-id="6dd260f7-7f10-4321-b579-dada371b2b34"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="https://health-habit-tracker-e6b50.firebaseio.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="dns-prefetch" href="https://health-habit-tracker-e6b50.firebaseio.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&family=Barlow+Condensed:wght@500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --black: #0a0a0a;
            --gray-900: #1a1a1a;
            --gray-800: #2a2a2a;
            --gray-700: #3d3d3d;
            --gray-600: #555555;
            --gray-500: #737373;
            --gray-400: #9a9a9a;
            --gray-300: #c4c4c4;
            --gray-200: #e0e0e0;
            --gray-100: #f0f0f0;
            --gray-50: #f8f8f8;
            --white: #ffffff;
            --font: 'DM Sans', sans-serif;
            --mono: 'DM Mono', monospace;
            --din: 'Barlow Condensed', 'DM Mono', monospace;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: var(--font);
            background: var(--white);
            color: var(--black);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: var(--white);
            min-height: 100vh;
            position: relative;
        }


        /* ── HISTORY PAGE ── */
        .history-page { min-height:100vh; background:var(--white); }
        .history-nav { display:flex; align-items:center; gap:10px; padding:16px 20px 12px; border-bottom:1px solid var(--gray-100); }
        .history-nav-back { background:none; border:none; cursor:pointer; display:flex; align-items:center; gap:6px; font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:1px; color:var(--gray-600); font-family:var(--font); padding:0; }
        .history-nav-back:hover { color:var(--black); }
        .history-nav-title { font-size:15px; font-weight:700; font-family:var(--din); letter-spacing:.5px; }

        /* chart section */
        .history-chart-section { padding:24px 20px 16px; background:var(--black); color:var(--white); }
        .history-chart-title { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:1.5px; opacity:.5; margin-bottom:16px; }
        .history-charts-row { display:flex; gap:16px; align-items:center; }
        .donut-wrap { position:relative; flex-shrink:0; }
        .donut-center { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; pointer-events:none; }
        .donut-center-val { font-size:22px; font-weight:700; font-family:var(--din); line-height:1; }
        .donut-center-lbl { font-size:9px; opacity:.55; text-transform:uppercase; letter-spacing:.8px; margin-top:2px; }
        .history-legend { flex:1; display:flex; flex-direction:column; gap:10px; }
        .legend-item { display:flex; align-items:center; gap:8px; }
        .legend-dot { width:9px; height:9px; border-radius:50%; flex-shrink:0; }
        .legend-label { font-size:11px; opacity:.65; flex:1; }
        .legend-val { font-size:14px; font-weight:700; font-family:var(--din); }

        /* percentile banner */
        .history-percentile { margin:0; padding:16px 20px; background:#111; border-top:1px solid #222; display:flex; align-items:center; gap:14px; }
        .percentile-big { font-size:40px; font-weight:700; font-family:var(--din); color:var(--white); line-height:1; }
        .percentile-big span { font-size:20px; }
        .percentile-text { flex:1; }
        .percentile-text strong { display:block; font-size:13px; color:var(--white); margin-bottom:3px; }
        .percentile-text small { font-size:11px; color:rgba(255,255,255,.5); }
        .percentile-bar-wrap { margin-top:8px; }
        .percentile-bar-track { height:2px; background:rgba(255,255,255,.15); }
        .percentile-bar-fill { height:100%; background:var(--white); transition:width 1s cubic-bezier(.4,0,.2,1); }

        /* archive list */
        .archive-list-section { padding:20px; }
        .archive-list-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
        .archive-count-badge { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; color:var(--gray-400); }
        .archive-item {
            border:1px solid var(--gray-200); margin-bottom:10px;
            overflow:hidden; transition:border-color .15s;
        }
        .archive-item:hover { border-color:var(--gray-500); }
        .archive-item-top { padding:14px 16px 10px; display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
        .archive-item-left { flex:1; min-width:0; }
        .archive-item-name { font-size:14px; font-weight:600; color:var(--black); margin-bottom:4px; }
        .archive-item-range { font-size:10px; color:var(--gray-400); font-family:var(--din); letter-spacing:.3px; }
        .archive-rate-circle { width:50px; height:50px; flex-shrink:0; position:relative; }
        .archive-item-tags { padding:0 16px 12px; display:flex; gap:6px; flex-wrap:wrap; }
        .archive-tag { font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; padding:2px 7px; background:var(--gray-100); color:var(--gray-500); }
        .archive-prog-bar { height:3px; background:var(--gray-100); }
        .archive-prog-fill { height:100%; transition:width .6s cubic-bezier(.4,0,.2,1); }

        /* history entry button in profile */
        .history-entry-btn {
            width:100%; display:flex; align-items:center; justify-content:space-between;
            padding:16px; border:1px solid var(--gray-200); background:var(--white);
            cursor:pointer; transition:.15s; font-family:var(--font); margin-top:4px;
        }
        .history-entry-btn:hover { border-color:var(--black); background:var(--gray-50); }
        .history-entry-left { display:flex; align-items:center; gap:12px; }
        .history-entry-icon { width:36px; height:36px; background:var(--black); display:flex; align-items:center; justify-content:center; flex-shrink:0; }
        .history-entry-text strong { display:block; font-size:13px; font-weight:700; color:var(--black); }
        .history-entry-text span { font-size:11px; color:var(--gray-400); }
        .history-entry-arrow { color:var(--gray-300); }
        /* ── COMMENTS ── */
        .comments-section { border-top:1px solid var(--gray-100); padding:10px 14px; }
        .comment-item { display:flex; gap:9px; margin-bottom:10px; }
        .comment-avatar { width:26px; height:26px; background:var(--gray-100); border:1px solid var(--gray-200); display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:700; flex-shrink:0; }
        .comment-body { flex:1; }
        .comment-user { font-size:11px; font-weight:700; color:var(--black); margin-bottom:2px; }
        .comment-text { font-size:12px; color:var(--gray-700); line-height:1.5; }
        .comment-time { font-size:9px; color:var(--gray-400); margin-top:2px; text-transform:uppercase; letter-spacing:.4px; }
        .comment-input-row { display:flex; gap:8px; margin-top:8px; }
        .comment-input { flex:1; padding:8px 10px; border:1px solid var(--gray-200); font-size:12px; font-family:var(--font); outline:none; background:var(--white); color:var(--black); border-radius:0; }
        .comment-input:focus { border-color:var(--black); }
        .comment-send { padding:8px 13px; background:var(--black); color:var(--white); border:none; font-size:10px; font-weight:700; cursor:pointer; font-family:var(--font); text-transform:uppercase; letter-spacing:.8px; flex-shrink:0; }
        .comment-send:disabled { background:var(--gray-300); cursor:not-allowed; }
        .comments-toggle { font-size:11px; color:var(--gray-500); cursor:pointer; font-weight:600; padding:4px 0; display:inline-block; }
        .comments-toggle:hover { color:var(--black); }

        /* ── PWA INSTALL BANNER ── */
        .pwa-install-banner {
            position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
            max-width:440px; width:calc(100% - 32px);
            background:var(--black); color:var(--white);
            padding:14px 16px; display:flex; align-items:center; gap:12px;
            z-index:500; box-shadow:0 4px 24px rgba(0,0,0,.25);
            animation: slideUp .3s ease;
        }
        @keyframes slideUp { from { opacity:0; transform:translateX(-50%) translateY(20px); } to { opacity:1; transform:translateX(-50%) translateY(0); } }
        .pwa-install-icon { width:40px; height:40px; flex-shrink:0; border-radius:8px; overflow:hidden; }
        .pwa-install-icon img { width:100%; height:100%; }
        .pwa-install-text { flex:1; }
        .pwa-install-text strong { display:block; font-size:13px; font-weight:700; margin-bottom:2px; }
        .pwa-install-text span { font-size:11px; opacity:.6; }
        .pwa-install-btn { padding:8px 14px; background:var(--white); color:var(--black); border:none; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; cursor:pointer; font-family:var(--font); white-space:nowrap; }
        .pwa-install-close { background:none; border:none; color:rgba(255,255,255,.5); font-size:18px; cursor:pointer; padding:0 4px; line-height:1; flex-shrink:0; }
        /* ── NOTIF PROMPT ── */
        .notif-prompt {
            position:fixed; top:0; left:50%; transform:translateX(-50%);
            max-width:480px; width:100%; background:var(--white);
            border-bottom:2px solid var(--black); padding:14px 20px;
            display:flex; align-items:center; gap:12px; z-index:600;
            box-shadow:0 2px 16px rgba(0,0,0,.1);
            animation: slideDown .3s ease;
        }
        @keyframes slideDown { from { opacity:0; transform:translateX(-50%) translateY(-20px); } to { opacity:1; transform:translateX(-50%) translateY(0); } }
        .notif-prompt-text { flex:1; font-size:12px; color:var(--gray-700); line-height:1.5; }
        .notif-prompt-text strong { display:block; font-size:13px; font-weight:700; color:var(--black); margin-bottom:2px; }
        .notif-yes { padding:7px 14px; background:var(--black); color:var(--white); border:none; font-size:11px; font-weight:700; cursor:pointer; font-family:var(--font); }
        .notif-no  { padding:7px 10px; background:none; border:none; font-size:11px; color:var(--gray-400); cursor:pointer; font-family:var(--font); }

        /* ── CLOUDINARY UPLOAD OVERLAY ── */
        .upload-overlay {
            position:fixed; inset:0; background:rgba(0,0,0,.6);
            display:flex; align-items:center; justify-content:center; z-index:2000;
        }
        .upload-overlay-box {
            background:var(--white); padding:32px 28px; max-width:320px; width:90%;
            text-align:center; border-top:3px solid var(--black);
        }
        .upload-overlay-title { font-size:13px; font-weight:700; text-transform:uppercase; letter-spacing:1px; margin-bottom:10px; }
        .upload-overlay-sub { font-size:11px; color:var(--gray-400); }
        .upload-progress-bar { height:4px; background:var(--gray-100); margin-top:16px; overflow:hidden; }
        .upload-progress-fill { height:100%; background:var(--black); transition:width .3s; }
        .cloudinary-setup-box {
            background:#fffbe6; border:1px solid #e0c060; padding:14px 16px;
            margin-bottom:16px; font-size:11px; color:#7a6000; line-height:1.6;
        }
        .cloudinary-setup-box a { color:#7a6000; font-weight:700; }
        .cloudinary-setup-box code { background:#f5e97a; padding:1px 4px; font-size:10px; border-radius:2px; }

        /* avatar upload */
        .profile-avatar-wrap { position:relative; width:72px; margin:0 auto 14px; cursor:pointer; }
        .profile-avatar-wrap:hover .avatar-edit-overlay { opacity:1; }
        .avatar-edit-overlay {
            position:absolute; inset:0; background:rgba(0,0,0,.45);
            display:flex; align-items:center; justify-content:center;
            font-size:9px; font-weight:700; text-transform:uppercase;
            letter-spacing:.8px; color:white; opacity:0; transition:.2s;
        }
        .avatar-img { width:72px; height:72px; object-fit:cover; border:2px solid var(--black); display:block; }

        /* ── AUTH ── */
        .auth-page {
            display:flex; flex-direction:column;
            justify-content:center; align-items:center;
            min-height:100vh; padding:40px 20px;
            background: var(--white);
        }
        .auth-logo {
            font-size:28px; font-weight:700; letter-spacing:-1px;
            margin-bottom:4px; font-family:var(--din);
        }
        .auth-subtitle { font-size:13px; color:var(--gray-500); margin-bottom:48px; font-weight:400; letter-spacing:2px; text-transform:uppercase; }
        .auth-form { width:100%; max-width:360px; }
        .form-group { margin-bottom:16px; }
        .form-label { display:block; font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:0.8px; margin-bottom:8px; color:var(--gray-600); }
        .form-input { width:100%; padding:13px 14px; border:1px solid var(--gray-200); font-size:14px; font-family:var(--font); transition:border-color .2s; background:var(--white); color:var(--black); border-radius:0; outline:none; }
        .form-input:focus { border-color:var(--black); }
        .form-input option { font-family: var(--font); }
        .button { width:100%; padding:13px; border:none; font-size:12px; font-weight:700; cursor:pointer; transition:all .2s; text-transform:uppercase; letter-spacing:1.5px; font-family:var(--font); border-radius:0; }
        .button-primary { background:var(--black); color:var(--white); margin-bottom:10px; }
        .button-primary:hover { background:var(--gray-800); }
        .button-primary:disabled { background:var(--gray-400); cursor:not-allowed; }
        .button-secondary { background:var(--white); color:var(--black); border:1px solid var(--gray-200); }
        .button-secondary:hover { background:var(--gray-50); border-color:var(--black); }
        .auth-switch { text-align:center; margin-top:24px; font-size:13px; color:var(--gray-500); }
        .auth-switch a { color:var(--black); text-decoration:none; font-weight:700; cursor:pointer; }
        .demo-badge { background:var(--gray-50); border:1px solid var(--gray-200); padding:12px 16px; margin-bottom:24px; font-size:12px; max-width:360px; width:100%; color:var(--gray-600); }
        .demo-badge strong { color:var(--black); }
        .error-message { background:var(--black); color:var(--white); padding:12px 16px; margin-bottom:16px; font-size:12px; max-width:360px; width:100%; }

        /* ── HEADER ── */
        .header {
            background:var(--black); padding:18px 20px;
            color:var(--white); display:flex;
            justify-content:space-between; align-items:center;
            position:sticky; top:0; z-index:100;
        }
        .header-title h1 { font-size:17px; font-weight:700; letter-spacing:-0.3px; font-family:var(--din); }
        .header-title p { font-size:11px; opacity:.5; margin-top:2px; letter-spacing:.5px; }
        .logout-btn { padding:6px 12px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); color:white; font-size:10px; cursor:pointer; text-transform:uppercase; letter-spacing:1px; font-weight:700; font-family:var(--font); transition:.2s; }
        .logout-btn:hover { background:rgba(255,255,255,.16); }

        /* ── CONTENT ── */
        .content { padding:20px; padding-bottom:90px; }

        /* ── TAB BAR ── */
        .tab-bar {
            position:fixed; bottom:0; left:50%; transform:translateX(-50%);
            max-width:480px; width:100%; background:var(--white);
            border-top:1px solid var(--gray-200);
            display:flex; justify-content:space-around; padding:10px 0 12px;
            z-index:200;
        }
        .tab-item { flex:1; text-align:center; padding:4px; cursor:pointer; border:none; background:none; color:var(--gray-400); transition:color .15s; }
        .tab-item.active { color:var(--black); }
        .tab-item svg { width:20px; height:20px; display:block; margin:0 auto 3px; }
        .tab-item span { font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; display:block; }

        /* ── HOME ADD BUTTON ── */
        .home-top {
            display:flex; justify-content:center;
            margin-bottom:24px; padding-top:8px;
        }
        .center-add-btn-standalone {
            width:56px; height:56px;
            background:var(--black); border:none;
            cursor:pointer; display:flex;
            align-items:center; justify-content:center;
            transition:all .2s;
            box-shadow: 0 2px 16px rgba(0,0,0,.18);
        }
        .center-add-btn-standalone:hover { background:var(--gray-800); transform:scale(1.07); }
        .center-add-btn-standalone svg { width:22px; height:22px; }

        /* ── SECTION TITLE ── */
        .section-title { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1.5px; margin-bottom:14px; color:var(--gray-500); }

        /* ── HABIT CARDS (list) ── */
        .habit-card {
            border:1px solid var(--gray-200); padding:14px 16px;
            margin-bottom:10px; transition:.2s; cursor:pointer;
        }
        .habit-card:hover { border-color:var(--black); }
        .habit-header { display:flex; justify-content:space-between; align-items:flex-start; gap:10px; }
        .habit-info { flex:1; }
        .habit-title { font-size:14px; font-weight:600; color:var(--black); margin-bottom:6px; }
        .habit-meta { display:flex; gap:10px; align-items:center; margin-bottom:10px; }
        .habit-category { display:inline-block; padding:2px 7px; font-size:9px; background:var(--gray-100); color:var(--gray-600); font-weight:700; text-transform:uppercase; letter-spacing:.5px; }
        .habit-streak { display:flex; align-items:center; gap:4px; font-size:12px; font-weight:700; color:var(--gray-600); }
        .habit-time-range { font-size:10px; color:var(--gray-400); font-family:var(--din); }

        /* habit progress bar (replaces check button) */
        .habit-progress-section { flex-shrink:0; display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
        .habit-progress-bar-wrap { width:80px; }
        .habit-prog-label { display:flex; justify-content:space-between; font-size:9px; color:var(--gray-400); font-weight:600; letter-spacing:.5px; margin-bottom:4px; }
        .habit-prog-track { height:5px; background:var(--gray-100); border-radius:0; overflow:hidden; }
        .habit-prog-fill { height:100%; background:var(--black); transition:width .4s cubic-bezier(.4,0,.2,1); border-radius:0; }
        .habit-prog-fill.done { background:var(--black); }
        .habit-mark-btn { font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; border:1px solid var(--gray-200); background:var(--white); color:var(--gray-600); padding:5px 10px; cursor:pointer; transition:.2s; font-family:var(--font); white-space:nowrap; }
        .habit-mark-btn:hover { border-color:var(--black); color:var(--black); }
        .habit-mark-btn.marked { background:var(--black); color:var(--white); border-color:var(--black); }

        /* ── HABIT DETAIL VIEW ── */
        .detail-back { display:flex; align-items:center; gap:8px; font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; margin-bottom:20px; color:var(--gray-600); padding:0; border:none; background:none; }
        .detail-back svg { width:16px; height:16px; }
        .detail-back:hover { color:var(--black); }
        .detail-title { font-size:22px; font-weight:700; margin-bottom:4px; }
        .detail-category { font-size:10px; color:var(--gray-400); text-transform:uppercase; letter-spacing:1px; margin-bottom:24px; }
        .detail-stats-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:1px; background:var(--gray-200); border:1px solid var(--gray-200); margin-bottom:24px; }
        .detail-stat-card { background:var(--white); padding:18px; text-align:center; }
        .detail-stat-value { font-size:28px; font-weight:700; color:var(--black); font-family:var(--din); }
        .detail-stat-label { font-size:10px; color:var(--gray-400); text-transform:uppercase; letter-spacing:1px; font-weight:600; margin-top:4px; }

        /* ── MODAL ── */
        .modal { position:fixed; inset:0; background:rgba(0,0,0,.7); display:flex; align-items:flex-end; justify-content:center; padding:0; z-index:1000; }
        .modal-content { background:var(--white); padding:28px; max-width:480px; width:100%; max-height:85vh; overflow-y:auto; border-top:3px solid var(--black); }
        .modal-header { font-size:16px; font-weight:700; margin-bottom:24px; text-transform:uppercase; letter-spacing:.5px; font-family:var(--din); }
        .button-group { display:flex; gap:10px; margin-top:20px; }
        .button-group .button { flex:1; }

        /* time range row */
        .time-range-row { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }
        .time-range-row .form-input { padding:10px 8px; font-size:12px; }

        /* ── GROUPS ── */
        .group-card {
            background:var(--white); border:1px solid var(--gray-200);
            padding:16px; margin-bottom:12px; cursor:pointer; transition:.2s;
        }
        .group-card:hover { border-color:var(--black); }
        .group-card-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:8px; }
        .group-name { font-size:15px; font-weight:700; }
        .group-category-tag { font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; padding:3px 8px; background:var(--gray-100); color:var(--gray-600); }
        .group-info { font-size:11px; color:var(--gray-500); display:flex; gap:12px; margin-bottom:12px; }
        .group-progress { margin-bottom:12px; }
        .progress-label { display:flex; justify-content:space-between; margin-bottom:5px; font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; color:var(--gray-500); }
        .progress-bar { height:3px; background:var(--gray-100); }
        .progress-fill { height:100%; background:var(--black); transition:width .3s; }
        .group-bottom { display:flex; justify-content:space-between; align-items:center; }
        .group-members { display:flex; gap:4px; }
        .member-avatar-sm { width:26px; height:26px; background:var(--gray-100); border:1px solid var(--gray-200); display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:700; }
        .join-btn { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; border:1px solid var(--black); background:var(--white); color:var(--black); padding:6px 14px; cursor:pointer; transition:.2s; font-family:var(--font); }
        .join-btn:hover { background:var(--black); color:var(--white); }
        .join-btn.joined { background:var(--black); color:var(--white); }

        /* ── GROUP DETAIL (member list) ── */
        .group-detail-header { margin-bottom:20px; }
        .group-detail-title { font-size:20px; font-weight:700; margin-bottom:6px; }
        .group-detail-meta { font-size:12px; color:var(--gray-500); display:flex; gap:12px; margin-bottom:16px; }
        .group-detail-progress { margin-bottom:8px; }
        .member-list-title { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1.5px; color:var(--gray-400); margin:20px 0 12px; }
        .member-row {
            display:flex; align-items:center; gap:14px;
            padding:14px 0; border-bottom:1px solid var(--gray-100);
            cursor:pointer; transition:.1s;
        }
        .member-row:hover { background:var(--gray-50); margin:0 -20px; padding:14px 20px; }
        .member-avatar-lg { width:44px; height:44px; flex-shrink:0; background:var(--gray-100); border:1px solid var(--gray-200); display:flex; align-items:center; justify-content:center; font-size:17px; font-weight:700; }
        .member-info { flex:1; min-width:0; }
        .member-name { font-size:14px; font-weight:600; margin-bottom:3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
        .member-sub { font-size:11px; color:var(--gray-400); margin-bottom:6px; }
        .member-prog-wrap { display:flex; align-items:center; gap:8px; }
        .member-prog-track { flex:1; height:4px; background:var(--gray-100); }
        .member-prog-fill { height:100%; background:var(--black); transition:width .4s; }
        .member-prog-pct { font-size:10px; font-weight:700; color:var(--gray-500); font-family:var(--din); flex-shrink:0; width:30px; text-align:right; }
        .member-arrow { color:var(--gray-300); flex-shrink:0; }

        /* ── MEMBER PROFILE VIEW ── */
        .member-profile-header { padding:28px 0 20px; text-align:center; border-bottom:1px solid var(--gray-100); margin-bottom:20px; }
        .member-profile-avatar { width:72px; height:72px; background:var(--gray-100); border:2px solid var(--black); margin:0 auto 14px; display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:700; }
        .member-profile-name { font-size:20px; font-weight:700; margin-bottom:4px; }
        .member-profile-handle { font-size:12px; color:var(--gray-400); margin-bottom:14px; }
        .member-profile-actions { display:flex; gap:10px; justify-content:center; margin-bottom:16px; }
        .follow-btn { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; border:1px solid var(--black); background:var(--black); color:var(--white); padding:8px 20px; cursor:pointer; transition:.2s; font-family:var(--font); }
        .follow-btn.following { background:var(--white); color:var(--black); }
        .follow-btn:hover { opacity:.8; }
        .msg-btn { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; border:1px solid var(--gray-200); background:var(--white); color:var(--black); padding:8px 20px; cursor:pointer; transition:.2s; font-family:var(--font); }
        .msg-btn:hover { border-color:var(--black); }
        .profile-stat-row { display:flex; justify-content:center; gap:0; border:1px solid var(--gray-200); }
        .profile-stat-cell { flex:1; text-align:center; padding:14px 8px; border-right:1px solid var(--gray-100); }
        .profile-stat-cell:last-child { border-right:none; }
        .profile-stat-num { font-size:20px; font-weight:700; font-family:var(--din); }
        .profile-stat-lbl { font-size:9px; color:var(--gray-400); text-transform:uppercase; letter-spacing:1px; font-weight:600; margin-top:3px; }
        .privacy-notice { background:var(--gray-50); border:1px solid var(--gray-200); padding:12px 16px; font-size:12px; color:var(--gray-500); text-align:center; margin-bottom:20px; }
        .posts-grid { display:flex; flex-direction:column; gap:0; }

        /* ── FEED / POSTS ── */
        .feed-card { background:var(--white); border:1px solid var(--gray-200); margin-bottom:14px; }
        .feed-header { padding:12px 14px; display:flex; align-items:center; gap:10px; border-bottom:1px solid var(--gray-50); }
        .feed-avatar { width:34px; height:34px; background:var(--gray-100); border:1px solid var(--gray-200); display:flex; align-items:center; justify-content:center; font-size:13px; font-weight:700; flex-shrink:0; }
        .feed-user-info h4 { font-size:13px; font-weight:700; margin-bottom:1px; }
        .feed-time { font-size:10px; color:var(--gray-400); text-transform:uppercase; letter-spacing:.5px; }
        .feed-content { padding:14px; }
        .feed-text { font-size:13px; line-height:1.6; margin-bottom:10px; color:var(--gray-800); }
        .feed-habit-tag { display:inline-block; padding:3px 9px; background:var(--gray-100); font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; color:var(--gray-600); }
        .feed-media { margin-top:12px; border:1px solid var(--gray-100); overflow:hidden; }
        .feed-media img { width:100%; height:180px; object-fit:cover; display:block; }
        .feed-media-placeholder { width:100%; height:160px; background:var(--gray-100); display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px; color:var(--gray-400); font-size:12px; }
        .feed-actions { padding:10px 14px; border-top:1px solid var(--gray-50); display:flex; gap:18px; }
        .feed-action { display:flex; align-items:center; gap:5px; font-size:11px; color:var(--gray-500); cursor:pointer; transition:color .15s; font-weight:600; }
        .feed-action:hover { color:var(--black); }
        .feed-action svg { width:15px; height:15px; }
        .feed-action.liked { color:var(--black); }

        /* ── PROFILE PAGE ── */
        .profile-header { padding:28px 0 20px; text-align:center; border-bottom:1px solid var(--gray-100); }
        .profile-avatar { width:72px; height:72px; background:var(--gray-100); border:2px solid var(--black); margin:0 auto 14px; display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:700; }
        .profile-name { font-size:20px; font-weight:700; margin-bottom:4px; }
        .profile-email { font-size:12px; color:var(--gray-400); margin-bottom:16px; }
        .profile-stats { display:flex; border:1px solid var(--gray-200); margin-top:12px; }
        .profile-stat { flex:1; text-align:center; padding:14px 8px; border-right:1px solid var(--gray-100); }
        .profile-stat:last-child { border-right:none; }
        .profile-stat-value { font-size:20px; font-weight:700; font-family:var(--din); }
        .profile-stat-label { font-size:9px; color:var(--gray-400); text-transform:uppercase; letter-spacing:1px; font-weight:600; margin-top:3px; }
        .profile-privacy-section { margin-top:20px; padding-top:16px; border-top:1px solid var(--gray-100); }
        .privacy-toggle-row { display:flex; justify-content:space-between; align-items:center; padding:12px 0; border-bottom:1px solid var(--gray-50); }
        .privacy-toggle-label { font-size:13px; font-weight:600; }
        .privacy-toggle-sub { font-size:11px; color:var(--gray-400); margin-top:2px; }
        .toggle-switch { position:relative; width:44px; height:24px; cursor:pointer; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:var(--gray-200); transition:.3s; }
        .toggle-slider:before { position:absolute; content:""; height:18px; width:18px; left:3px; bottom:3px; background:white; transition:.3s; }
        .toggle-switch input:checked + .toggle-slider { background:var(--black); }
        .toggle-switch input:checked + .toggle-slider:before { transform:translateX(20px); }

        /* ── POST COMPOSER ── */
        .composer-wrap { margin-top:20px; border:1px solid var(--gray-200); }
        .composer-textarea {
            width:100%; padding:14px 16px; font-size:14px; font-family:var(--font);
            border:none; outline:none; resize:none; min-height:100px;
            color:var(--black); background:var(--white); line-height:1.6;
        }
        .composer-textarea::placeholder { color:var(--gray-300); }
        .composer-media-preview {
            position:relative; margin:0 16px 12px;
            border:1px solid var(--gray-100); overflow:hidden;
            height:200px; background:#000; flex-shrink:0;
        }
        .composer-media-preview img,
        .composer-media-preview video {
            width:100%; height:100%; object-fit:cover; display:block;
        }
        .composer-media-remove {
            position:absolute; top:6px; right:6px;
            width:24px; height:24px; background:rgba(0,0,0,.6); color:white;
            border:none; cursor:pointer; font-size:14px; display:flex;
            align-items:center; justify-content:center; font-weight:700;
        }
        .composer-toolbar {
            display:flex; align-items:center; justify-content:space-between;
            padding:10px 14px; border-top:1px solid var(--gray-100);
            background:var(--gray-50);
        }
        .composer-media-btns { display:flex; gap:8px; }
        .composer-media-btn {
            display:flex; align-items:center; gap:5px;
            font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px;
            border:1px solid var(--gray-200); background:var(--white);
            color:var(--gray-600); padding:6px 11px; cursor:pointer;
            transition:.15s; font-family:var(--font);
        }
        .composer-media-btn:hover { border-color:var(--black); color:var(--black); }
        .composer-media-btn svg { width:13px; height:13px; }
        .composer-submit {
            font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1px;
            border:none; background:var(--black); color:var(--white);
            padding:8px 18px; cursor:pointer; transition:.15s; font-family:var(--font);
        }
        .composer-submit:hover { background:var(--gray-800); }
        .composer-submit:disabled { background:var(--gray-300); cursor:not-allowed; }
        .composer-char { font-size:10px; color:var(--gray-400); font-family:var(--mono); }
        /* my posts list */
        .my-posts-section { margin-top:24px; }
        .my-post-item { border:1px solid var(--gray-200); margin-bottom:10px; }
        .my-post-header { padding:10px 14px 0; display:flex; justify-content:space-between; align-items:center; }
        .my-post-time { font-size:10px; color:var(--gray-400); text-transform:uppercase; letter-spacing:.5px; }
        .my-post-delete { border:none; background:none; font-size:10px; color:var(--gray-400); cursor:pointer; font-family:var(--font); font-weight:700; text-transform:uppercase; letter-spacing:.5px; padding:0; transition:.15s; }
        .my-post-delete:hover { color:#c00; }
        .my-post-body { padding:10px 14px 12px; font-size:13px; line-height:1.6; color:var(--gray-800); }
        .my-post-media { border-top:1px solid var(--gray-100); }
        .my-post-media img, .my-post-media video { width:100%; max-height:180px; object-fit:cover; display:block; }
        .my-post-actions { padding:8px 14px; border-top:1px solid var(--gray-50); display:flex; gap:16px; }

        /* ── EMPTY STATE ── */
        .empty-state { text-align:center; padding:50px 20px; color:var(--gray-400); }
        .empty-state svg { width:40px; height:40px; margin:0 auto 14px; opacity:.25; }
        .empty-state h3 { font-size:15px; font-weight:700; margin-bottom:6px; color:var(--black); }
        .empty-state p { font-size:12px; line-height:1.5; }

        /* ── LOADING ── */
        .loading { text-align:center; padding:60px 20px; font-size:13px; color:var(--gray-400); font-family:var(--din); }

        /* ── BACK NAV ── */
        .back-nav { display:flex; align-items:center; gap:8px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; margin-bottom:20px; color:var(--gray-500); border:none; background:none; padding:0; font-family:var(--font); }
        .back-nav:hover { color:var(--black); }
        .back-nav svg { width:14px; height:14px; }

        /* ── CHIP TAG ── */
        .chip { display:inline-block; padding:3px 9px; background:var(--gray-100); font-size:9px; font-weight:700; text-transform:uppercase; letter-spacing:.5px; color:var(--gray-600); margin-right:6px; margin-bottom:4px; }

        /* ── FREQ / DURATION PILLS ── */
        .pill-group { display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
        .pill {
            padding:6px 13px; border:1px solid var(--gray-200);
            font-size:11px; font-weight:700; cursor:pointer;
            font-family:var(--font); background:var(--white);
            color:var(--gray-600); transition:.15s;
            text-transform:uppercase; letter-spacing:.5px;
            border-radius:0; white-space:nowrap;
        }
        .pill:hover { border-color:var(--black); color:var(--black); }
        .pill.selected { background:var(--black); color:var(--white); border-color:var(--black); }
        .pill-custom-wrap { display:flex; align-items:center; gap:6px; margin-top:8px; }
        .pill-custom-input {
            width:60px; padding:6px 8px; border:1px solid var(--gray-200);
            font-size:12px; font-family:var(--mono); background:var(--white);
            color:var(--black); border-radius:0; outline:none; text-align:center;
        }
        .pill-custom-input:focus { border-color:var(--black); }
        .pill-unit-select {
            padding:6px 8px; border:1px solid var(--gray-200);
            font-size:11px; font-family:var(--font); background:var(--white);
            color:var(--black); border-radius:0; outline:none; cursor:pointer;
            font-weight:600;
        }
        .pill-unit-select:focus { border-color:var(--black); }
        .section-divider { height:1px; background:var(--gray-100); margin:16px 0; }
        .modal-section-label {
            font-size:10px; font-weight:700; text-transform:uppercase;
            letter-spacing:1.2px; color:var(--gray-400); margin-bottom:10px;
        }

        /* date-row: simplified */
        .date-row { display:flex; gap:6px; align-items:center; }
        .date-row .form-input { padding:9px 6px; font-size:12px; flex:1; }
        .date-sep { font-size:12px; color:var(--gray-400); font-weight:700; flex-shrink:0; }

        /* progress count badge on card */
        .prog-count { font-size:10px; color:var(--gray-400); font-family:var(--mono); margin-bottom:3px; text-align:right; }

        /* today counter buttons */
        .counter-wrap { display:flex; align-items:center; gap:0; margin-top:8px; border:1px solid var(--gray-200); width:fit-content; }
        .counter-btn { width:30px; height:30px; border:none; background:var(--white); font-size:16px; cursor:pointer; color:var(--gray-600); display:flex; align-items:center; justify-content:center; transition:.15s; font-family:var(--font); font-weight:700; }
        .counter-btn:hover { background:var(--black); color:var(--white); }
        .counter-val { min-width:30px; text-align:center; font-size:13px; font-weight:700; font-family:var(--mono); border-left:1px solid var(--gray-200); border-right:1px solid var(--gray-200); padding:0 4px; line-height:30px; }

        /* delete row at bottom of card */
        .card-delete-row {
            margin-top:12px;
            padding-top:10px;
            border-top:1px solid var(--gray-100);
            display:flex;
            justify-content:flex-end;
        }
        .card-delete-btn {
            border:none; background:none; cursor:pointer;
            font-size:10px; font-weight:700; text-transform:uppercase;
            letter-spacing:.8px; color:var(--gray-400);
            font-family:var(--font); padding:4px 0;
            display:flex; align-items:center; gap:5px;
            transition:.15s;
        }
        .card-delete-btn:hover { color:#c00; }
        .card-delete-btn svg { width:11px; height:11px; }


        /* ── DELETE ACCOUNT MODAL ── */
        .delete-account-btn {
            width:100%; padding:12px; background:none; border:1px solid #fca5a5;
            color:#dc2626; font-size:11px; font-weight:700; text-transform:uppercase;
            letter-spacing:1px; cursor:pointer; font-family:var(--font); margin-top:8px;
            transition:.2s;
        }
        .delete-account-btn:hover { background:#fef2f2; border-color:#dc2626; }
        .danger-modal { position:fixed; inset:0; background:rgba(0,0,0,.75); display:flex; align-items:center; justify-content:center; z-index:3000; padding:20px; }
        .danger-modal-box { background:var(--white); padding:28px; max-width:360px; width:100%; border-top:4px solid #dc2626; }
        .danger-modal-title { font-size:16px; font-weight:700; color:#dc2626; margin-bottom:8px; font-family:var(--din); text-transform:uppercase; letter-spacing:.5px; }
        .danger-modal-body { font-size:12px; color:var(--gray-600); line-height:1.7; margin-bottom:20px; }
        .danger-modal-body strong { color:var(--black); }
        .danger-confirm-input { width:100%; padding:10px 12px; border:1px solid var(--gray-200); font-size:13px; font-family:var(--font); outline:none; margin-bottom:14px; }
        .danger-confirm-input:focus { border-color:#dc2626; }
        .danger-confirm-btn { width:100%; padding:12px; background:#dc2626; color:white; border:none; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; font-family:var(--font); margin-bottom:8px; }
        .danger-confirm-btn:disabled { background:#fca5a5; cursor:not-allowed; }
        .danger-cancel-btn { width:100%; padding:10px; background:none; border:1px solid var(--gray-200); font-size:11px; font-weight:600; cursor:pointer; font-family:var(--font); color:var(--gray-600); }
        .danger-step { font-size:10px; color:var(--gray-400); text-align:center; margin-bottom:12px; text-transform:uppercase; letter-spacing:.8px; }
        .danger-deleting { text-align:center; padding:20px 0; }
        .danger-deleting p { font-size:12px; color:var(--gray-500); margin-top:8px; }
        /* scrollbar */
        ::-webkit-scrollbar { width:4px; }
        ::-webkit-scrollbar-track { background:transparent; }
        ::-webkit-scrollbar-thumb { background:var(--gray-200); }
    </style>
</head>
<body>
<!-- 骨架 loading screen — 在 Babel/React 初始化前顯示，React mount 後自動隱藏 -->
<div id="pre-loader" style="
  position:fixed;inset:0;background:#fff;z-index:9999;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  font-family:'DM Sans',system-ui,sans-serif;
">
  <div style="width:48px;height:48px;background:#0a0a0a;display:flex;align-items:center;justify-content:center;margin-bottom:20px">
    <span style="color:#fff;font-size:10px;font-weight:700;letter-spacing:1px">HT</span>
  </div>
  <div style="display:flex;gap:6px">
    <span style="width:7px;height:7px;background:#0a0a0a;border-radius:50%;animation:pldi 1s infinite"></span>
    <span style="width:7px;height:7px;background:#0a0a0a;border-radius:50%;animation:pldi 1s .2s infinite"></span>
    <span style="width:7px;height:7px;background:#0a0a0a;border-radius:50%;animation:pldi 1s .4s infinite"></span>
  </div>
  <style>@keyframes pldi{0%,80%,100%{opacity:.15}40%{opacity:1}}</style>
</div>
<div id="root"></div>
<script>
  // Hide pre-loader once React has mounted anything into #root
  var _plObserver = new MutationObserver(function(mutations){
    if(document.getElementById('root').childElementCount > 0){
      var pl = document.getElementById('pre-loader');
      if(pl){ pl.style.transition='opacity .25s'; pl.style.opacity='0'; setTimeout(function(){ pl.remove(); },260); }
      _plObserver.disconnect();
    }
  });
  _plObserver.observe(document.getElementById('root'),{childList:true});
</script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<!-- React -->
<script>/* React 18 */
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
(function(){'use strict';(function(c,x){"object"===typeof exports&&"undefined"!==typeof module?x(exports):"function"===typeof define&&define.amd?define(["exports"],x):(c=c||self,x(c.React={}))})(this,function(c){function x(a){if(null===a||"object"!==typeof a)return null;a=V&&a[V]||a["@@iterator"];return"function"===typeof a?a:null}function w(a,b,e){this.props=a;this.context=b;this.refs=W;this.updater=e||X}function Y(){}function K(a,b,e){this.props=a;this.context=b;this.refs=W;this.updater=e||X}function Z(a,b,
e){var m,d={},c=null,h=null;if(null!=b)for(m in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(c=""+b.key),b)aa.call(b,m)&&!ba.hasOwnProperty(m)&&(d[m]=b[m]);var l=arguments.length-2;if(1===l)d.children=e;else if(1<l){for(var f=Array(l),k=0;k<l;k++)f[k]=arguments[k+2];d.children=f}if(a&&a.defaultProps)for(m in l=a.defaultProps,l)void 0===d[m]&&(d[m]=l[m]);return{$$typeof:y,type:a,key:c,ref:h,props:d,_owner:L.current}}function oa(a,b){return{$$typeof:y,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}
function M(a){return"object"===typeof a&&null!==a&&a.$$typeof===y}function pa(a){var b={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(a){return b[a]})}function N(a,b){return"object"===typeof a&&null!==a&&null!=a.key?pa(""+a.key):b.toString(36)}function B(a,b,e,m,d){var c=typeof a;if("undefined"===c||"boolean"===c)a=null;var h=!1;if(null===a)h=!0;else switch(c){case "string":case "number":h=!0;break;case "object":switch(a.$$typeof){case y:case qa:h=!0}}if(h)return h=a,d=d(h),a=""===m?"."+
N(h,0):m,ca(d)?(e="",null!=a&&(e=a.replace(da,"$&/")+"/"),B(d,b,e,"",function(a){return a})):null!=d&&(M(d)&&(d=oa(d,e+(!d.key||h&&h.key===d.key?"":(""+d.key).replace(da,"$&/")+"/")+a)),b.push(d)),1;h=0;m=""===m?".":m+":";if(ca(a))for(var l=0;l<a.length;l++){c=a[l];var f=m+N(c,l);h+=B(c,b,e,f,d)}else if(f=x(a),"function"===typeof f)for(a=f.call(a),l=0;!(c=a.next()).done;)c=c.value,f=m+N(c,l++),h+=B(c,b,e,f,d);else if("object"===c)throw b=String(a),Error("Objects are not valid as a React child (found: "+
("[object Object]"===b?"object with keys {"+Object.keys(a).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return h}function C(a,b,e){if(null==a)return a;var c=[],d=0;B(a,c,"","",function(a){return b.call(e,a,d++)});return c}function ra(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=
0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}function O(a,b){var e=a.length;a.push(b);a:for(;0<e;){var c=e-1>>>1,d=a[c];if(0<D(d,b))a[c]=b,a[e]=d,e=c;else break a}}function p(a){return 0===a.length?null:a[0]}function E(a){if(0===a.length)return null;var b=a[0],e=a.pop();if(e!==b){a[0]=e;a:for(var c=0,d=a.length,k=d>>>1;c<k;){var h=2*(c+1)-1,l=a[h],f=h+1,g=a[f];if(0>D(l,e))f<d&&0>D(g,l)?(a[c]=g,a[f]=e,c=f):(a[c]=l,a[h]=e,c=h);else if(f<d&&0>D(g,e))a[c]=g,a[f]=e,c=f;else break a}}return b}
function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function P(a){for(var b=p(r);null!==b;){if(null===b.callback)E(r);else if(b.startTime<=a)E(r),b.sortIndex=b.expirationTime,O(q,b);else break;b=p(r)}}function Q(a){z=!1;P(a);if(!u)if(null!==p(q))u=!0,R(S);else{var b=p(r);null!==b&&T(Q,b.startTime-a)}}function S(a,b){u=!1;z&&(z=!1,ea(A),A=-1);F=!0;var c=k;try{P(b);for(n=p(q);null!==n&&(!(n.expirationTime>b)||a&&!fa());){var m=n.callback;if("function"===typeof m){n.callback=null;
k=n.priorityLevel;var d=m(n.expirationTime<=b);b=v();"function"===typeof d?n.callback=d:n===p(q)&&E(q);P(b)}else E(q);n=p(q)}if(null!==n)var g=!0;else{var h=p(r);null!==h&&T(Q,h.startTime-b);g=!1}return g}finally{n=null,k=c,F=!1}}function fa(){return v()-ha<ia?!1:!0}function R(a){G=a;H||(H=!0,I())}function T(a,b){A=ja(function(){a(v())},b)}function ka(a){throw Error("act(...) is not supported in production builds of React.");}var y=Symbol.for("react.element"),qa=Symbol.for("react.portal"),sa=Symbol.for("react.fragment"),
ta=Symbol.for("react.strict_mode"),ua=Symbol.for("react.profiler"),va=Symbol.for("react.provider"),wa=Symbol.for("react.context"),xa=Symbol.for("react.forward_ref"),ya=Symbol.for("react.suspense"),za=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),V=Symbol.iterator,X={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,m){},enqueueSetState:function(a,b,c,m){}},la=Object.assign,W={};w.prototype.isReactComponent={};w.prototype.setState=function(a,
b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};Y.prototype=w.prototype;var t=K.prototype=new Y;t.constructor=K;la(t,w.prototype);t.isPureReactComponent=!0;var ca=Array.isArray,aa=Object.prototype.hasOwnProperty,L={current:null},
ba={key:!0,ref:!0,__self:!0,__source:!0},da=/\/+/g,g={current:null},J={transition:null};if("object"===typeof performance&&"function"===typeof performance.now){var Ba=performance;var v=function(){return Ba.now()}}else{var ma=Date,Ca=ma.now();v=function(){return ma.now()-Ca}}var q=[],r=[],Da=1,n=null,k=3,F=!1,u=!1,z=!1,ja="function"===typeof setTimeout?setTimeout:null,ea="function"===typeof clearTimeout?clearTimeout:null,na="undefined"!==typeof setImmediate?setImmediate:null;"undefined"!==typeof navigator&&
void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var H=!1,G=null,A=-1,ia=5,ha=-1,U=function(){if(null!==G){var a=v();ha=a;var b=!0;try{b=G(!0,a)}finally{b?I():(H=!1,G=null)}}else H=!1};if("function"===typeof na)var I=function(){na(U)};else if("undefined"!==typeof MessageChannel){t=new MessageChannel;var Ea=t.port2;t.port1.onmessage=U;I=function(){Ea.postMessage(null)}}else I=function(){ja(U,0)};t={ReactCurrentDispatcher:g,
ReactCurrentOwner:L,ReactCurrentBatchConfig:J,Scheduler:{__proto__:null,unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=k;k=a;try{return b()}finally{k=c}},unstable_next:function(a){switch(k){case 1:case 2:case 3:var b=3;break;default:b=k}var c=k;k=b;try{return a()}finally{k=c}},unstable_scheduleCallback:function(a,
b,c){var e=v();"object"===typeof c&&null!==c?(c=c.delay,c="number"===typeof c&&0<c?e+c:e):c=e;switch(a){case 1:var d=-1;break;case 2:d=250;break;case 5:d=1073741823;break;case 4:d=1E4;break;default:d=5E3}d=c+d;a={id:Da++,callback:b,priorityLevel:a,startTime:c,expirationTime:d,sortIndex:-1};c>e?(a.sortIndex=c,O(r,a),null===p(q)&&a===p(r)&&(z?(ea(A),A=-1):z=!0,T(Q,c-e))):(a.sortIndex=d,O(q,a),u||F||(u=!0,R(S)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=
k;return function(){var c=k;k=b;try{return a.apply(this,arguments)}finally{k=c}}},unstable_getCurrentPriorityLevel:function(){return k},unstable_shouldYield:fa,unstable_requestPaint:function(){},unstable_continueExecution:function(){u||F||(u=!0,R(S))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return p(q)},get unstable_now(){return v},unstable_forceFrameRate:function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):
ia=0<a?Math.floor(1E3/a):5},unstable_Profiling:null}};c.Children={map:C,forEach:function(a,b,c){C(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;C(a,function(){b++});return b},toArray:function(a){return C(a,function(a){return a})||[]},only:function(a){if(!M(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};c.Component=w;c.Fragment=sa;c.Profiler=ua;c.PureComponent=K;c.StrictMode=ta;c.Suspense=ya;c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=
t;c.act=ka;c.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var e=la({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=L.current);void 0!==b.key&&(d=""+b.key);if(a.type&&a.type.defaultProps)var l=a.type.defaultProps;for(f in b)aa.call(b,f)&&!ba.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==l?l[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){l=
Array(f);for(var g=0;g<f;g++)l[g]=arguments[g+2];e.children=l}return{$$typeof:y,type:a.type,key:d,ref:k,props:e,_owner:h}};c.createContext=function(a){a={$$typeof:wa,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:va,_context:a};return a.Consumer=a};c.createElement=Z;c.createFactory=function(a){var b=Z.bind(null,a);b.type=a;return b};c.createRef=function(){return{current:null}};c.forwardRef=function(a){return{$$typeof:xa,
render:a}};c.isValidElement=M;c.lazy=function(a){return{$$typeof:Aa,_payload:{_status:-1,_result:a},_init:ra}};c.memo=function(a,b){return{$$typeof:za,type:a,compare:void 0===b?null:b}};c.startTransition=function(a,b){b=J.transition;J.transition={};try{a()}finally{J.transition=b}};c.unstable_act=ka;c.useCallback=function(a,b){return g.current.useCallback(a,b)};c.useContext=function(a){return g.current.useContext(a)};c.useDebugValue=function(a,b){};c.useDeferredValue=function(a){return g.current.useDeferredValue(a)};
c.useEffect=function(a,b){return g.current.useEffect(a,b)};c.useId=function(){return g.current.useId()};c.useImperativeHandle=function(a,b,c){return g.current.useImperativeHandle(a,b,c)};c.useInsertionEffect=function(a,b){return g.current.useInsertionEffect(a,b)};c.useLayoutEffect=function(a,b){return g.current.useLayoutEffect(a,b)};c.useMemo=function(a,b){return g.current.useMemo(a,b)};c.useReducer=function(a,b,c){return g.current.useReducer(a,b,c)};c.useRef=function(a){return g.current.useRef(a)};
c.useState=function(a){return g.current.useState(a)};c.useSyncExternalStore=function(a,b,c){return g.current.useSyncExternalStore(a,b,c)};c.useTransition=function(){return g.current.useTransition()};c.version="18.3.1"});
})();

</script>
<script>/* ReactDOM 18 */
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
(function(){/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(Q,zb){"object"===typeof exports&&"undefined"!==typeof module?zb(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],zb):(Q=Q||self,zb(Q.ReactDOM={},Q.React))})(this,function(Q,zb){function m(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function mb(a,b){Ab(a,b);Ab(a+"Capture",b)}function Ab(a,b){$b[a]=b;for(a=0;a<b.length;a++)cg.add(b[a])}function bj(a){if(Zd.call(dg,a))return!0;if(Zd.call(eg,a))return!1;if(cj.test(a))return dg[a]=!0;eg[a]=!0;return!1}function dj(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function ej(a,b,c,d){if(null===
b||"undefined"===typeof b||dj(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function Y(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}function $d(a,b,c,d){var e=R.hasOwnProperty(b)?R[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||"o"!==
b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1])ej(b,c,e,d)&&(c=null),d||null===e?bj(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}function ac(a){if(null===a||"object"!==typeof a)return null;a=fg&&a[fg]||a["@@iterator"];return"function"===typeof a?a:null}function bc(a,b,
c){if(void 0===ae)try{throw Error();}catch(d){ae=(b=d.stack.trim().match(/\n( *(at )?)/))&&b[1]||""}return"\n"+ae+a}function be(a,b){if(!a||ce)return"";ce=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(n){var d=n}Reflect.construct(a,[],b)}else{try{b.call()}catch(n){d=n}a.call(b.prototype)}else{try{throw Error();
}catch(n){d=n}a()}}catch(n){if(n&&d&&"string"===typeof n.stack){for(var e=n.stack.split("\n"),f=d.stack.split("\n"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k="\n"+e[g].replace(" at new "," at ");a.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{ce=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?bc(a):
""}function fj(a){switch(a.tag){case 5:return bc(a.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return a=be(a.type,!1),a;case 11:return a=be(a.type.render,!1),a;case 1:return a=be(a.type,!0),a;default:return""}}function de(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Bb:return"Fragment";case Cb:return"Portal";case ee:return"Profiler";case fe:return"StrictMode";
case ge:return"Suspense";case he:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case gg:return(a.displayName||"Context")+".Consumer";case hg:return(a._context.displayName||"Context")+".Provider";case ie:var b=a.render;a=a.displayName;a||(a=b.displayName||b.name||"",a=""!==a?"ForwardRef("+a+")":"ForwardRef");return a;case je:return b=a.displayName||null,null!==b?b:de(a.type)||"Memo";case Ta:b=a._payload;a=a._init;try{return de(a(b))}catch(c){}}return null}function gj(a){var b=a.type;
switch(a.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=b.render,a=a.displayName||a.name||"",b.displayName||(""!==a?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(b);case 8:return b===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";
case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof b)return b.displayName||b.name||null;if("string"===typeof b)return b}return null}function Ua(a){switch(typeof a){case "boolean":case "number":case "string":case "undefined":return a;case "object":return a;default:return""}}function ig(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===
b)}function hj(a){var b=ig(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=
null;delete a[b]}}}}function Pc(a){a._valueTracker||(a._valueTracker=hj(a))}function jg(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=ig(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Qc(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function ke(a,b){var c=b.checked;return E({},b,{defaultChecked:void 0,defaultValue:void 0,
value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function kg(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Ua(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function lg(a,b){b=b.checked;null!=b&&$d(a,"checked",b,!1)}function le(a,b){lg(a,b);var c=Ua(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=
c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?me(a,b.type,c):b.hasOwnProperty("defaultValue")&&me(a,b.type,Ua(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function mg(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;
c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function me(a,b,c){if("number"!==b||Qc(a.ownerDocument)!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function Db(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=
!0)}else{c=""+Ua(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function ne(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(m(91));return E({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ng(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(m(92));if(cc(c)){if(1<c.length)throw Error(m(93));
c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:Ua(c)}}function og(a,b){var c=Ua(b.value),d=Ua(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function pg(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}function qg(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}
function oe(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?qg(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function rg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||dc.hasOwnProperty(a)&&dc[a]?(""+b).trim():b+"px"}function sg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=rg(c,b[c],d);"float"===c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function pe(a,b){if(b){if(ij[a]&&
(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(m(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(m(60));if("object"!==typeof b.dangerouslySetInnerHTML||!("__html"in b.dangerouslySetInnerHTML))throw Error(m(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(m(62));}}function qe(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function re(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}function tg(a){if(a=ec(a)){if("function"!==typeof se)throw Error(m(280));var b=a.stateNode;b&&(b=Rc(b),se(a.stateNode,a.type,b))}}function ug(a){Eb?Fb?Fb.push(a):Fb=[a]:Eb=a}function vg(){if(Eb){var a=Eb,b=Fb;Fb=Eb=null;tg(a);if(b)for(a=0;a<b.length;a++)tg(b[a])}}function wg(a,b,c){if(te)return a(b,c);te=!0;try{return xg(a,b,c)}finally{if(te=
!1,null!==Eb||null!==Fb)yg(),vg()}}function fc(a,b){var c=a.stateNode;if(null===c)return null;var d=Rc(c);if(null===d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;
if(c&&"function"!==typeof c)throw Error(m(231,b,typeof c));return c}function jj(a,b,c,d,e,f,g,h,k){gc=!1;Sc=null;kj.apply(lj,arguments)}function mj(a,b,c,d,e,f,g,h,k){jj.apply(this,arguments);if(gc){if(gc){var n=Sc;gc=!1;Sc=null}else throw Error(m(198));Tc||(Tc=!0,ue=n)}}function nb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function zg(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,
null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Ag(a){if(nb(a)!==a)throw Error(m(188));}function nj(a){var b=a.alternate;if(!b){b=nb(a);if(null===b)throw Error(m(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Ag(e),a;if(f===d)return Ag(e),b;f=f.sibling}throw Error(m(188));}if(c.return!==d.return)c=e,d=f;
else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(m(189));}}if(c.alternate!==d)throw Error(m(190));}if(3!==c.tag)throw Error(m(188));return c.stateNode.current===c?a:b}function Bg(a){a=nj(a);return null!==a?Cg(a):null}function Cg(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=Cg(a);if(null!==b)return b;a=a.sibling}return null}
function oj(a,b){if(Ca&&"function"===typeof Ca.onCommitFiberRoot)try{Ca.onCommitFiberRoot(Uc,a,void 0,128===(a.current.flags&128))}catch(c){}}function pj(a){a>>>=0;return 0===a?32:31-(qj(a)/rj|0)|0}function hc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&
4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Vc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=hc(h):(f&=g,0!==f&&(d=hc(f)))}else g=c&~e,0!==g?d=hc(g):0!==f&&(d=hc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&
(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-ta(b),e=1<<c,d|=a[c],b&=~e;return d}function sj(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;
case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tj(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-ta(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=sj(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function ve(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Dg(){var a=Wc;Wc<<=1;0===(Wc&4194240)&&(Wc=64);return a}function we(a){for(var b=[],c=0;31>c;c++)b.push(a);
return b}function ic(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-ta(b);a[b]=c}function uj(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-ta(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}function xe(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-ta(c),e=1<<d;e&b|a[d]&
b&&(a[d]|=b);c&=~e}}function Eg(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}function Fg(a,b){switch(a){case "focusin":case "focusout":Va=null;break;case "dragenter":case "dragleave":Wa=null;break;case "mouseover":case "mouseout":Xa=null;break;case "pointerover":case "pointerout":jc.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":kc.delete(b.pointerId)}}function lc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,
nativeEvent:f,targetContainers:[e]},null!==b&&(b=ec(b),null!==b&&Gg(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}function vj(a,b,c,d,e){switch(b){case "focusin":return Va=lc(Va,a,b,c,d,e),!0;case "dragenter":return Wa=lc(Wa,a,b,c,d,e),!0;case "mouseover":return Xa=lc(Xa,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;jc.set(f,lc(jc.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,kc.set(f,lc(kc.get(f)||null,a,b,
c,d,e)),!0}return!1}function Hg(a){var b=ob(a.target);if(null!==b){var c=nb(b);if(null!==c)if(b=c.tag,13===b){if(b=zg(c),null!==b){a.blockedOn=b;wj(a.priority,function(){xj(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=ye(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;
var d=new c.constructor(c.type,c);ze=d;c.target.dispatchEvent(d);ze=null}else return b=ec(c),null!==b&&Gg(b),a.blockedOn=c,!1;b.shift()}return!0}function Ig(a,b,c){Xc(a)&&c.delete(b)}function yj(){Ae=!1;null!==Va&&Xc(Va)&&(Va=null);null!==Wa&&Xc(Wa)&&(Wa=null);null!==Xa&&Xc(Xa)&&(Xa=null);jc.forEach(Ig);kc.forEach(Ig)}function mc(a,b){a.blockedOn===b&&(a.blockedOn=null,Ae||(Ae=!0,Jg(Kg,yj)))}function nc(a){if(0<Yc.length){mc(Yc[0],a);for(var b=1;b<Yc.length;b++){var c=Yc[b];c.blockedOn===a&&(c.blockedOn=
null)}}null!==Va&&mc(Va,a);null!==Wa&&mc(Wa,a);null!==Xa&&mc(Xa,a);b=function(b){return mc(b,a)};jc.forEach(b);kc.forEach(b);for(b=0;b<Ya.length;b++)c=Ya[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Ya.length&&(b=Ya[0],null===b.blockedOn);)Hg(b),null===b.blockedOn&&Ya.shift()}function zj(a,b,c,d){var e=z,f=Gb.transition;Gb.transition=null;try{z=1,Be(a,b,c,d)}finally{z=e,Gb.transition=f}}function Aj(a,b,c,d){var e=z,f=Gb.transition;Gb.transition=null;try{z=4,Be(a,b,c,d)}finally{z=e,Gb.transition=
f}}function Be(a,b,c,d){if(Zc){var e=ye(a,b,c,d);if(null===e)Ce(a,b,d,$c,c),Fg(a,d);else if(vj(e,a,b,c,d))d.stopPropagation();else if(Fg(a,d),b&4&&-1<Bj.indexOf(a)){for(;null!==e;){var f=ec(e);null!==f&&Cj(f);f=ye(a,b,c,d);null===f&&Ce(a,b,d,$c,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else Ce(a,b,d,null,c)}}function ye(a,b,c,d){$c=null;a=re(d);a=ob(a);if(null!==a)if(b=nb(a),null===b)a=null;else if(c=b.tag,13===c){a=zg(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===
b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);$c=a;return null}function Lg(a){switch(a){case "cancel":case "click":case "close":case "contextmenu":case "copy":case "cut":case "auxclick":case "dblclick":case "dragend":case "dragstart":case "drop":case "focusin":case "focusout":case "input":case "invalid":case "keydown":case "keypress":case "keyup":case "mousedown":case "mouseup":case "paste":case "pause":case "play":case "pointercancel":case "pointerdown":case "pointerup":case "ratechange":case "reset":case "resize":case "seeked":case "submit":case "touchcancel":case "touchend":case "touchstart":case "volumechange":case "change":case "selectionchange":case "textInput":case "compositionstart":case "compositionend":case "compositionupdate":case "beforeblur":case "afterblur":case "beforeinput":case "blur":case "fullscreenchange":case "focus":case "hashchange":case "popstate":case "select":case "selectstart":return 1;
case "drag":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "mousemove":case "mouseout":case "mouseover":case "pointermove":case "pointerout":case "pointerover":case "scroll":case "toggle":case "touchmove":case "wheel":case "mouseenter":case "mouseleave":case "pointerenter":case "pointerleave":return 4;case "message":switch(Dj()){case De:return 1;case Mg:return 4;case ad:case Ej:return 16;case Ng:return 536870912;default:return 16}default:return 16}}function Og(){if(bd)return bd;
var a,b=Ee,c=b.length,d,e="value"in Za?Za.value:Za.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return bd=e.slice(a,1<d?1-d:void 0)}function cd(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function dd(){return!0}function Pg(){return!1}function ka(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;
for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?dd:Pg;this.isPropagationStopped=Pg;return this}E(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():
"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd});return b}function Fj(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Gj[a])?!!b[a]:!1}function Fe(a){return Fj}function Qg(a,b){switch(a){case "keyup":return-1!==Hj.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "focusout":return!0;default:return!1}}function Rg(a){a=a.detail;return"object"===typeof a&&
"data"in a?a.data:null}function Ij(a,b){switch(a){case "compositionend":return Rg(b);case "keypress":if(32!==b.which)return null;Sg=!0;return Tg;case "textInput":return a=b.data,a===Tg&&Sg?null:a;default:return null}}function Jj(a,b){if(Hb)return"compositionend"===a||!Ge&&Qg(a,b)?(a=Og(),bd=Ee=Za=null,Hb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return Ug&&"ko"!==b.locale?null:b.data;default:return null}}function Vg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Kj[a.type]:"textarea"===b?!0:!1}function Lj(a){if(!Ia)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Wg(a,b,c,d){ug(d);b=ed(b,"onChange");0<b.length&&(c=new He("onChange","change",null,c,d),a.push({event:c,listeners:b}))}function Mj(a){Xg(a,
0)}function fd(a){var b=Ib(a);if(jg(b))return a}function Nj(a,b){if("change"===a)return b}function Yg(){oc&&(oc.detachEvent("onpropertychange",Zg),pc=oc=null)}function Zg(a){if("value"===a.propertyName&&fd(pc)){var b=[];Wg(b,pc,a,re(a));wg(Mj,b)}}function Oj(a,b,c){"focusin"===a?(Yg(),oc=b,pc=c,oc.attachEvent("onpropertychange",Zg)):"focusout"===a&&Yg()}function Pj(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return fd(pc)}function Qj(a,b){if("click"===a)return fd(b)}function Rj(a,b){if("input"===
a||"change"===a)return fd(b)}function Sj(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function qc(a,b){if(ua(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!Zd.call(b,e)||!ua(a[e],b[e]))return!1}return!0}function $g(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ah(a,b){var c=$g(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;
if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=$g(c)}}function bh(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?bh(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function ch(){for(var a=window,b=Qc();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;
b=Qc(a.document)}return b}function Ie(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function Tj(a){var b=ch(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&bh(c.ownerDocument.documentElement,c)){if(null!==d&&Ie(c))if(b=d.start,a=d.end,void 0===a&&(a=b),"selectionStart"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);
else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=ah(c,f);var g=ah(c,d);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),
a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});"function"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}function dh(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Je||null==Jb||Jb!==Qc(d)||(d=Jb,"selectionStart"in d&&Ie(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d=
{anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),rc&&qc(rc,d)||(rc=d,d=ed(Ke,"onSelect"),0<d.length&&(b=new He("onSelect","select",null,b,c),a.push({event:b,listeners:d}),b.target=Jb)))}function gd(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function hd(a){if(Le[a])return Le[a];if(!Kb[a])return a;var b=Kb[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in eh)return Le[a]=b[c];return a}function $a(a,
b){fh.set(a,b);mb(b,[a])}function gh(a,b,c){var d=a.type||"unknown-event";a.currentTarget=c;mj(d,b,void 0,a);a.currentTarget=null}function Xg(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,n=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;gh(e,h,n);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;n=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;
gh(e,h,n);f=k}}}if(Tc)throw a=ue,Tc=!1,ue=null,a;}function B(a,b){var c=b[Me];void 0===c&&(c=b[Me]=new Set);var d=a+"__bubble";c.has(d)||(hh(b,a,2,!1),c.add(d))}function Ne(a,b,c){var d=0;b&&(d|=4);hh(c,a,d,b)}function sc(a){if(!a[id]){a[id]=!0;cg.forEach(function(b){"selectionchange"!==b&&(Uj.has(b)||Ne(b,!1,a),Ne(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[id]||(b[id]=!0,Ne("selectionchange",!1,b))}}function hh(a,b,c,d,e){switch(Lg(b)){case 1:e=zj;break;case 4:e=Aj;break;default:e=
Be}c=e.bind(null,b,c,a);e=void 0;!Oe||"touchstart"!==b&&"touchmove"!==b&&"wheel"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}function Ce(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;
if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=ob(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}wg(function(){var d=f,e=re(c),g=[];a:{var h=fh.get(a);if(void 0!==h){var k=He,m=a;switch(a){case "keypress":if(0===cd(c))break a;case "keydown":case "keyup":k=Vj;break;case "focusin":m="focus";k=Pe;break;case "focusout":m="blur";k=Pe;break;case "beforeblur":case "afterblur":k=Pe;break;
case "click":if(2===c.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":k=ih;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":k=Wj;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":k=Xj;break;case jh:case kh:case lh:k=Yj;break;case mh:k=Zj;break;case "scroll":k=ak;break;case "wheel":k=bk;break;case "copy":case "cut":case "paste":k=
ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":k=nh}var l=0!==(b&4),p=!l&&"scroll"===a,w=l?null!==h?h+"Capture":null:h;l=[];for(var A=d,t;null!==A;){t=A;var M=t.stateNode;5===t.tag&&null!==M&&(t=M,null!==w&&(M=fc(A,w),null!=M&&l.push(tc(A,M,t))));if(p)break;A=A.return}0<l.length&&(h=new k(h,m,null,c,e),g.push({event:h,listeners:l}))}}if(0===(b&7)){a:{h="mouseover"===a||"pointerover"===
a;k="mouseout"===a||"pointerout"===a;if(h&&c!==ze&&(m=c.relatedTarget||c.fromElement)&&(ob(m)||m[Ja]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(m=c.relatedTarget||c.toElement,k=d,m=m?ob(m):null,null!==m&&(p=nb(m),m!==p||5!==m.tag&&6!==m.tag))m=null}else k=null,m=d;if(k!==m){l=ih;M="onMouseLeave";w="onMouseEnter";A="mouse";if("pointerout"===a||"pointerover"===a)l=nh,M="onPointerLeave",w="onPointerEnter",A="pointer";p=null==k?h:Ib(k);t=null==
m?h:Ib(m);h=new l(M,A+"leave",k,c,e);h.target=p;h.relatedTarget=t;M=null;ob(e)===d&&(l=new l(w,A+"enter",m,c,e),l.target=t,l.relatedTarget=p,M=l);p=M;if(k&&m)b:{l=k;w=m;A=0;for(t=l;t;t=Lb(t))A++;t=0;for(M=w;M;M=Lb(M))t++;for(;0<A-t;)l=Lb(l),A--;for(;0<t-A;)w=Lb(w),t--;for(;A--;){if(l===w||null!==w&&l===w.alternate)break b;l=Lb(l);w=Lb(w)}l=null}else l=null;null!==k&&oh(g,h,k,l,!1);null!==m&&null!==p&&oh(g,p,m,l,!0)}}}a:{h=d?Ib(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if("select"===k||"input"===
k&&"file"===h.type)var ma=Nj;else if(Vg(h))if(ph)ma=Rj;else{ma=Pj;var va=Oj}else(k=h.nodeName)&&"input"===k.toLowerCase()&&("checkbox"===h.type||"radio"===h.type)&&(ma=Qj);if(ma&&(ma=ma(a,d))){Wg(g,ma,c,e);break a}va&&va(a,h,d);"focusout"===a&&(va=h._wrapperState)&&va.controlled&&"number"===h.type&&me(h,"number",h.value)}va=d?Ib(d):window;switch(a){case "focusin":if(Vg(va)||"true"===va.contentEditable)Jb=va,Ke=d,rc=null;break;case "focusout":rc=Ke=Jb=null;break;case "mousedown":Je=!0;break;case "contextmenu":case "mouseup":case "dragend":Je=
!1;dh(g,c,e);break;case "selectionchange":if(dk)break;case "keydown":case "keyup":dh(g,c,e)}var ab;if(Ge)b:{switch(a){case "compositionstart":var da="onCompositionStart";break b;case "compositionend":da="onCompositionEnd";break b;case "compositionupdate":da="onCompositionUpdate";break b}da=void 0}else Hb?Qg(a,c)&&(da="onCompositionEnd"):"keydown"===a&&229===c.keyCode&&(da="onCompositionStart");da&&(Ug&&"ko"!==c.locale&&(Hb||"onCompositionStart"!==da?"onCompositionEnd"===da&&Hb&&(ab=Og()):(Za=e,Ee=
"value"in Za?Za.value:Za.textContent,Hb=!0)),va=ed(d,da),0<va.length&&(da=new qh(da,a,null,c,e),g.push({event:da,listeners:va}),ab?da.data=ab:(ab=Rg(c),null!==ab&&(da.data=ab))));if(ab=ek?Ij(a,c):Jj(a,c))d=ed(d,"onBeforeInput"),0<d.length&&(e=new fk("onBeforeInput","beforeinput",null,c,e),g.push({event:e,listeners:d}),e.data=ab)}Xg(g,b)})}function tc(a,b,c){return{instance:a,listener:b,currentTarget:c}}function ed(a,b){for(var c=b+"Capture",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==
f&&(e=f,f=fc(a,c),null!=f&&d.unshift(tc(a,f,e)),f=fc(a,b),null!=f&&d.push(tc(a,f,e)));a=a.return}return d}function Lb(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}function oh(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,n=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==n&&(h=n,e?(k=fc(c,f),null!=k&&g.unshift(tc(c,k,h))):e||(k=fc(c,f),null!=k&&g.push(tc(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function rh(a){return("string"===
typeof a?a:""+a).replace(gk,"\n").replace(hk,"")}function jd(a,b,c,d){b=rh(b);if(rh(a)!==b&&c)throw Error(m(425));}function kd(){}function Qe(a,b){return"textarea"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function ik(a){setTimeout(function(){throw a;})}function Re(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=
e.data,"/$"===c){if(0===d){a.removeChild(e);nc(b);return}d--}else"$"!==c&&"$?"!==c&&"$!"!==c||d++;c=e}while(c);nc(b)}function Ka(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if("$"===b||"$!"===b||"$?"===b)break;if("/$"===b)return null}}return a}function sh(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}function ob(a){var b=a[Da];
if(b)return b;for(var c=a.parentNode;c;){if(b=c[Ja]||c[Da]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sh(a);null!==a;){if(c=a[Da])return c;a=sh(a)}return b}a=c;c=a.parentNode}return null}function ec(a){a=a[Da]||a[Ja];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Ib(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(m(33));}function Rc(a){return a[uc]||null}function bb(a){return{current:a}}function v(a,b){0>Mb||(a.current=Se[Mb],Se[Mb]=null,Mb--)}
function y(a,b,c){Mb++;Se[Mb]=a.current;a.current=b}function Nb(a,b){var c=a.type.contextTypes;if(!c)return cb;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function ea(a){a=a.childContextTypes;return null!==a&&void 0!==a}function th(a,b,c){if(J.current!==cb)throw Error(m(168));
y(J,b);y(S,c)}function uh(a,b,c){var d=a.stateNode;b=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(m(108,gj(a)||"Unknown",e));return E({},c,d)}function ld(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||cb;pb=J.current;y(J,a);y(S,S.current);return!0}function vh(a,b,c){var d=a.stateNode;if(!d)throw Error(m(169));c?(a=uh(a,b,pb),d.__reactInternalMemoizedMergedChildContext=a,v(S),v(J),y(J,a)):v(S);
y(S,c)}function wh(a){null===La?La=[a]:La.push(a)}function jk(a){md=!0;wh(a)}function db(){if(!Te&&null!==La){Te=!0;var a=0,b=z;try{var c=La;for(z=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}La=null;md=!1}catch(e){throw null!==La&&(La=La.slice(a+1)),xh(De,db),e;}finally{z=b,Te=!1}}return null}function qb(a,b){Ob[Pb++]=nd;Ob[Pb++]=od;od=a;nd=b}function yh(a,b,c){na[oa++]=Ma;na[oa++]=Na;na[oa++]=rb;rb=a;var d=Ma;a=Na;var e=32-ta(d)-1;d&=~(1<<e);c+=1;var f=32-ta(b)+e;if(30<f){var g=e-e%5;
f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;Ma=1<<32-ta(b)+e|c<<e|d;Na=f+a}else Ma=1<<f|c<<e|d,Na=a}function Ue(a){null!==a.return&&(qb(a,1),yh(a,1,0))}function Ve(a){for(;a===od;)od=Ob[--Pb],Ob[Pb]=null,nd=Ob[--Pb],Ob[Pb]=null;for(;a===rb;)rb=na[--oa],na[oa]=null,Na=na[--oa],na[oa]=null,Ma=na[--oa],na[oa]=null}function zh(a,b){var c=pa(5,null,null,0);c.elementType="DELETED";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}function Ah(a,b){switch(a.tag){case 5:var c=
a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,la=a,fa=Ka(b.firstChild),!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,la=a,fa=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==rb?{id:Ma,overflow:Na}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=pa(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,la=a,fa=null,!0):!1;default:return!1}}function We(a){return 0!==
(a.mode&1)&&0===(a.flags&128)}function Xe(a){if(D){var b=fa;if(b){var c=b;if(!Ah(a,b)){if(We(a))throw Error(m(418));b=Ka(c.nextSibling);var d=la;b&&Ah(a,b)?zh(d,c):(a.flags=a.flags&-4097|2,D=!1,la=a)}}else{if(We(a))throw Error(m(418));a.flags=a.flags&-4097|2;D=!1;la=a}}}function Bh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;la=a}function pd(a){if(a!==la)return!1;if(!D)return Bh(a),D=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b="head"!==b&&"body"!==b&&!Qe(a.type,
a.memoizedProps));if(b&&(b=fa)){if(We(a)){for(a=fa;a;)a=Ka(a.nextSibling);throw Error(m(418));}for(;b;)zh(a,b),b=Ka(b.nextSibling)}Bh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(m(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){fa=Ka(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}fa=null}}else fa=la?Ka(a.stateNode.nextSibling):null;return!0}function Qb(){fa=la=null;D=!1}function Ye(a){null===
wa?wa=[a]:wa.push(a)}function vc(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(m(309));var d=c.stateNode}if(!d)throw Error(m(147,a));var e=d,f=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if("string"!==typeof a)throw Error(m(284));if(!c._owner)throw Error(m(290,a));}return a}function qd(a,b){a=
Object.prototype.toString.call(b);throw Error(m(31,"[object Object]"===a?"object with keys {"+Object.keys(b).join(", ")+"}":a));}function Ch(a){var b=a._init;return b(a._payload)}function Dh(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=eb(a,b);a.index=
0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&null===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ze(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===Bb)return l(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||"object"===typeof f&&null!==f&&f.$$typeof===Ta&&
Ch(f)===b.type))return d=e(b,c.props),d.ref=vc(a,b,c),d.return=a,d;d=rd(c.type,c.key,c.props,null,a.mode,d);d.ref=vc(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=$e(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=sb(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function u(a,b,c){if("string"===
typeof b&&""!==b||"number"===typeof b)return b=Ze(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case sd:return c=rd(b.type,b.key,b.props,null,a.mode,c),c.ref=vc(a,null,b),c.return=a,c;case Cb:return b=$e(b,a.mode,c),b.return=a,b;case Ta:var d=b._init;return u(a,d(b._payload),c)}if(cc(b)||ac(b))return b=sb(b,a.mode,c,null),b.return=a,b;qd(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c&&""!==c||"number"===typeof c)return null!==
e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case sd:return c.key===e?k(a,b,c,d):null;case Cb:return c.key===e?n(a,b,c,d):null;case Ta:return e=c._init,r(a,b,e(c._payload),d)}if(cc(c)||ac(c))return null!==e?null:l(a,b,c,d,null);qd(a,c)}return null}function p(a,b,c,d,e){if("string"===typeof d&&""!==d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case sd:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,
e);case Cb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e);case Ta:var f=d._init;return p(a,b,c,f(d._payload),e)}if(cc(d)||ac(d))return a=a.get(c)||null,l(b,a,d,e,null);qd(b,d)}return null}function x(e,g,h,k){for(var n=null,m=null,l=g,t=g=0,q=null;null!==l&&t<h.length;t++){l.index>t?(q=l,l=null):q=l.sibling;var A=r(e,l,h[t],k);if(null===A){null===l&&(l=q);break}a&&l&&null===A.alternate&&b(e,l);g=f(A,g,t);null===m?n=A:m.sibling=A;m=A;l=q}if(t===h.length)return c(e,l),D&&qb(e,t),n;if(null===l){for(;t<
h.length;t++)l=u(e,h[t],k),null!==l&&(g=f(l,g,t),null===m?n=l:m.sibling=l,m=l);D&&qb(e,t);return n}for(l=d(e,l);t<h.length;t++)q=p(l,e,t,h[t],k),null!==q&&(a&&null!==q.alternate&&l.delete(null===q.key?t:q.key),g=f(q,g,t),null===m?n=q:m.sibling=q,m=q);a&&l.forEach(function(a){return b(e,a)});D&&qb(e,t);return n}function I(e,g,h,k){var n=ac(h);if("function"!==typeof n)throw Error(m(150));h=n.call(h);if(null==h)throw Error(m(151));for(var l=n=null,q=g,t=g=0,A=null,w=h.next();null!==q&&!w.done;t++,w=
h.next()){q.index>t?(A=q,q=null):A=q.sibling;var x=r(e,q,w.value,k);if(null===x){null===q&&(q=A);break}a&&q&&null===x.alternate&&b(e,q);g=f(x,g,t);null===l?n=x:l.sibling=x;l=x;q=A}if(w.done)return c(e,q),D&&qb(e,t),n;if(null===q){for(;!w.done;t++,w=h.next())w=u(e,w.value,k),null!==w&&(g=f(w,g,t),null===l?n=w:l.sibling=w,l=w);D&&qb(e,t);return n}for(q=d(e,q);!w.done;t++,w=h.next())w=p(q,e,t,w.value,k),null!==w&&(a&&null!==w.alternate&&q.delete(null===w.key?t:w.key),g=f(w,g,t),null===l?n=w:l.sibling=
w,l=w);a&&q.forEach(function(a){return b(e,a)});D&&qb(e,t);return n}function v(a,d,f,h){"object"===typeof f&&null!==f&&f.type===Bb&&null===f.key&&(f=f.props.children);if("object"===typeof f&&null!==f){switch(f.$$typeof){case sd:a:{for(var k=f.key,n=d;null!==n;){if(n.key===k){k=f.type;if(k===Bb){if(7===n.tag){c(a,n.sibling);d=e(n,f.props.children);d.return=a;a=d;break a}}else if(n.elementType===k||"object"===typeof k&&null!==k&&k.$$typeof===Ta&&Ch(k)===n.type){c(a,n.sibling);d=e(n,f.props);d.ref=vc(a,
n,f);d.return=a;a=d;break a}c(a,n);break}else b(a,n);n=n.sibling}f.type===Bb?(d=sb(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=rd(f.type,f.key,f.props,null,a.mode,h),h.ref=vc(a,d,f),h.return=a,a=h)}return g(a);case Cb:a:{for(n=f.key;null!==d;){if(d.key===n)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=$e(f,a.mode,h);d.return=a;
a=d}return g(a);case Ta:return n=f._init,v(a,d,n(f._payload),h)}if(cc(f))return x(a,d,f,h);if(ac(f))return I(a,d,f,h);qd(a,f)}return"string"===typeof f&&""!==f||"number"===typeof f?(f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ze(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return v}function af(){bf=Rb=td=null}function cf(a,b){b=ud.current;v(ud);a._currentValue=b}function df(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=
b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}function Sb(a,b){td=a;bf=Rb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ha=!0),a.firstContext=null)}function qa(a){var b=a._currentValue;if(bf!==a)if(a={context:a,memoizedValue:b,next:null},null===Rb){if(null===td)throw Error(m(308));Rb=a;td.dependencies={lanes:0,firstContext:a}}else Rb=Rb.next=a;return b}function ef(a){null===tb?tb=[a]:tb.push(a)}function Eh(a,b,c,d){var e=b.interleaved;
null===e?(c.next=c,ef(b)):(c.next=e.next,e.next=c);b.interleaved=c;return Oa(a,d)}function Oa(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}function ff(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue=
{baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Pa(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function fb(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(p&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return kk(a,c)}e=d.interleaved;null===e?(b.next=b,ef(d)):(b.next=e.next,e.next=b);d.interleaved=b;return Oa(a,c)}function vd(a,b,c){b=
b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;xe(a,c)}}function Gh(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,
shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=b;c.lastBaseUpdate=b}function wd(a,b,c,d){var e=a.updateQueue;gb=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,n=k.next;k.next=null;null===g?f=n:g.next=n;g=k;var l=a.alternate;null!==l&&(l=l.updateQueue,h=l.lastBaseUpdate,h!==g&&(null===h?l.firstBaseUpdate=n:h.next=n,l.lastBaseUpdate=k))}if(null!==f){var m=e.baseState;g=0;l=
n=k=null;h=f;do{var r=h.lane,p=h.eventTime;if((d&r)===r){null!==l&&(l=l.next={eventTime:p,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});a:{var x=a,v=h;r=b;p=c;switch(v.tag){case 1:x=v.payload;if("function"===typeof x){m=x.call(p,m,r);break a}m=x;break a;case 3:x.flags=x.flags&-65537|128;case 0:x=v.payload;r="function"===typeof x?x.call(p,m,r):x;if(null===r||void 0===r)break a;m=E({},m,r);break a;case 2:gb=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=
[h]:r.push(h))}else p={eventTime:p,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===l?(n=l=p,k=m):l=l.next=p,g|=r;h=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===l&&(k=m);e.baseState=k;e.firstBaseUpdate=n;e.lastBaseUpdate=l;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);ra|=g;a.lanes=g;a.memoizedState=m}}function Hh(a,
b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if("function"!==typeof e)throw Error(m(191,e));e.call(d)}}}function ub(a){if(a===wc)throw Error(m(174));return a}function gf(a,b){y(xc,b);y(yc,a);y(Ea,wc);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:oe(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=oe(b,a)}v(Ea);y(Ea,b)}function Tb(a){v(Ea);v(yc);v(xc)}function Ih(a){ub(xc.current);
var b=ub(Ea.current);var c=oe(b,a.type);b!==c&&(y(yc,a),y(Ea,c))}function hf(a){yc.current===a&&(v(Ea),v(yc))}function xd(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=
b.return;b=b.sibling}return null}function jf(){for(var a=0;a<kf.length;a++)kf[a]._workInProgressVersionPrimary=null;kf.length=0}function V(){throw Error(m(321));}function lf(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!ua(a[c],b[c]))return!1;return!0}function mf(a,b,c,d,e,f){vb=f;C=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;yd.current=null===a||null===a.memoizedState?lk:mk;a=c(d,e);if(zc){f=0;do{zc=!1;Ac=0;if(25<=f)throw Error(m(301));f+=1;N=K=null;b.updateQueue=null;
yd.current=nk;a=c(d,e)}while(zc)}yd.current=zd;b=null!==K&&null!==K.next;vb=0;N=K=C=null;Ad=!1;if(b)throw Error(m(300));return a}function nf(){var a=0!==Ac;Ac=0;return a}function Fa(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===N?C.memoizedState=N=a:N=N.next=a;return N}function sa(){if(null===K){var a=C.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===N?C.memoizedState:N.next;if(null!==b)N=b,K=a;else{if(null===a)throw Error(m(310));K=a;
a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===N?C.memoizedState=N=a:N=N.next=a}return N}function Bc(a,b){return"function"===typeof b?b(a):b}function of(a,b,c){b=sa();c=b.queue;if(null===c)throw Error(m(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,n=f;do{var l=n.lane;if((vb&
l)===l)null!==k&&(k=k.next={lane:0,action:n.action,hasEagerState:n.hasEagerState,eagerState:n.eagerState,next:null}),d=n.hasEagerState?n.eagerState:a(d,n.action);else{var u={lane:l,action:n.action,hasEagerState:n.hasEagerState,eagerState:n.eagerState,next:null};null===k?(h=k=u,g=d):k=k.next=u;C.lanes|=l;ra|=l}n=n.next}while(null!==n&&n!==f);null===k?g=d:k.next=h;ua(d,b.memoizedState)||(ha=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=
e.lane,C.lanes|=f,ra|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}function pf(a,b,c){b=sa();c=b.queue;if(null===c)throw Error(m(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);ua(f,b.memoizedState)||(ha=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Jh(a,b,c){}function Kh(a,b,c){c=C;var d=sa(),
e=b(),f=!ua(d.memoizedState,e);f&&(d.memoizedState=e,ha=!0);d=d.queue;qf(Lh.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==N&&N.memoizedState.tag&1){c.flags|=2048;Cc(9,Mh.bind(null,c,d,e,b),void 0,null);if(null===O)throw Error(m(349));0!==(vb&30)||Nh(c,b,e)}return e}function Nh(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=C.updateQueue;null===b?(b={lastEffect:null,stores:null},C.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}function Mh(a,b,c,d){b.value=c;b.getSnapshot=
d;Oh(b)&&Ph(a)}function Lh(a,b,c){return c(function(){Oh(b)&&Ph(a)})}function Oh(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!ua(a,c)}catch(d){return!0}}function Ph(a){var b=Oa(a,1);null!==b&&xa(b,a,1,-1)}function Qh(a){var b=Fa();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:a};b.queue=a;a=a.dispatch=ok.bind(null,C,a);return[b.memoizedState,a]}function Cc(a,b,c,d){a={tag:a,create:b,
destroy:c,deps:d,next:null};b=C.updateQueue;null===b?(b={lastEffect:null,stores:null},C.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Rh(a){return sa().memoizedState}function Bd(a,b,c,d){var e=Fa();C.flags|=a;e.memoizedState=Cc(1|b,c,void 0,void 0===d?null:d)}function Cd(a,b,c,d){var e=sa();d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&lf(d,g.deps)){e.memoizedState=
Cc(b,c,f,d);return}}C.flags|=a;e.memoizedState=Cc(1|b,c,f,d)}function Sh(a,b){return Bd(8390656,8,a,b)}function qf(a,b){return Cd(2048,8,a,b)}function Th(a,b){return Cd(4,2,a,b)}function Uh(a,b){return Cd(4,4,a,b)}function Vh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function Wh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Cd(4,4,Vh.bind(null,b,a),c)}function rf(a,b){}function Xh(a,b){var c=
sa();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&lf(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function Yh(a,b){var c=sa();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&lf(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Zh(a,b,c){if(0===(vb&21))return a.baseState&&(a.baseState=!1,ha=!0),a.memoizedState=c;ua(c,b)||(c=Dg(),C.lanes|=c,ra|=c,a.baseState=!0);return b}function pk(a,b,c){c=z;z=0!==c&&4>c?c:4;a(!0);var d=sf.transition;sf.transition=
{};try{a(!1),b()}finally{z=c,sf.transition=d}}function $h(){return sa().memoizedState}function qk(a,b,c){var d=hb(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(ai(a))bi(b,c);else if(c=Eh(a,b,c,d),null!==c){var e=Z();xa(c,a,d,e);ci(c,b,d)}}function ok(a,b,c){var d=hb(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(ai(a))bi(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(ua(h,g)){var k=b.interleaved;null===k?(e.next=e,ef(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(n){}finally{}c=Eh(a,b,e,d);null!==c&&(e=Z(),xa(c,a,d,e),ci(c,b,d))}}function ai(a){var b=a.alternate;return a===C||null!==b&&b===C}function bi(a,b){zc=Ad=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function ci(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;xe(a,c)}}function ya(a,b){if(a&&
a.defaultProps){b=E({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function tf(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:E({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}function di(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!qc(c,d)||!qc(e,f):!0}function ei(a,b,c){var d=!1,e=cb;var f=b.contextType;"object"===typeof f&&
null!==f?f=qa(f):(e=ea(b)?pb:J.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Nb(a,e):cb);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Dd;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function fi(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&
b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Dd.enqueueReplaceState(b,b.state,null)}function uf(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};ff(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=qa(f):(f=ea(b)?pb:J.current,e.context=Nb(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;"function"===typeof f&&(tf(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==
typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Dd.enqueueReplaceState(e,e.state,null),wd(a,c,e,d),e.state=a.memoizedState);"function"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ub(a,b){try{var c="",d=b;do c+=fj(d),d=d.return;while(d);var e=c}catch(f){e="\nError generating stack: "+f.message+
"\n"+f.stack}return{value:a,source:b,stack:e,digest:null}}function vf(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function wf(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}function gi(a,b,c){c=Pa(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Ed||(Ed=!0,xf=d);wf(a,b)};return c}function hi(a,b,c){c=Pa(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){return d(e)};
c.callback=function(){wf(a,b)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){wf(a,b);"function"!==typeof d&&(null===ib?ib=new Set([this]):ib.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ii(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new rk;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=sk.bind(null,a,b,c),b.then(a,a))}function ji(a){do{var b;
if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}function ki(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=Pa(-1,1),b.tag=2,fb(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}function aa(a,b,c,d){b.child=null===a?li(b,null,c,d):Vb(b,a.child,c,d)}function mi(a,b,c,d,e){c=c.render;var f=b.ref;Sb(b,e);d=mf(a,b,c,d,f,
e);c=nf();if(null!==a&&!ha)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Qa(a,b,e);D&&c&&Ue(b);b.flags|=1;aa(a,b,d,e);return b.child}function ni(a,b,c,d,e){if(null===a){var f=c.type;if("function"===typeof f&&!yf(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,oi(a,b,f,d,e);a=rd(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:qc;if(c(g,d)&&a.ref===
b.ref)return Qa(a,b,e)}b.flags|=1;a=eb(f,d);a.ref=b.ref;a.return=b;return b.child=a}function oi(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(qc(f,d)&&a.ref===b.ref)if(ha=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(ha=!0);else return b.lanes=a.lanes,Qa(a,b,e)}return zf(a,b,c,d,e)}function pi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if("hidden"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},y(Ga,ba),ba|=c;
else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,y(Ga,ba),ba|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;y(Ga,ba);ba|=d}else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,y(Ga,ba),ba|=d;aa(a,b,e,c);return b.child}function qi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function zf(a,
b,c,d,e){var f=ea(c)?pb:J.current;f=Nb(b,f);Sb(b,e);c=mf(a,b,c,d,f,e);d=nf();if(null!==a&&!ha)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Qa(a,b,e);D&&d&&Ue(b);b.flags|=1;aa(a,b,c,e);return b.child}function ri(a,b,c,d,e){if(ea(c)){var f=!0;ld(b)}else f=!1;Sb(b,e);if(null===b.stateNode)Fd(a,b),ei(b,c,d),uf(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=qa(n):(n=ea(c)?pb:J.current,n=Nb(b,
n));var l=c.getDerivedStateFromProps,m="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate;m||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||k!==n)&&fi(b,g,d,n);gb=!1;var r=b.memoizedState;g.state=r;wd(b,d,g,e);k=b.memoizedState;h!==d||r!==k||S.current||gb?("function"===typeof l&&(tf(b,c,l,d),k=b.memoizedState),(h=gb||di(b,c,h,d,r,k,n))?(m||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||
("function"===typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.flags|=4194308)):("function"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;Fh(a,b);h=b.memoizedProps;n=b.type===b.elementType?h:ya(b.type,h);g.props=
n;m=b.pendingProps;r=g.context;k=c.contextType;"object"===typeof k&&null!==k?k=qa(k):(k=ea(c)?pb:J.current,k=Nb(b,k));var p=c.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==m||r!==k)&&fi(b,g,d,k);gb=!1;r=b.memoizedState;g.state=r;wd(b,d,g,e);var x=b.memoizedState;h!==m||r!==x||S.current||gb?("function"===typeof p&&(tf(b,c,p,d),x=b.memoizedState),
(n=gb||di(b,c,n,d,r,x,k)||!1)?(l||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,x,k),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),"function"===typeof g.componentDidUpdate&&(b.flags|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=
4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=n):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return Af(a,b,c,d,f,e)}function Af(a,b,c,d,e,f){qi(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&vh(b,c,!1),
Qa(a,b,f);d=b.stateNode;tk.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Vb(b,a.child,null,f),b.child=Vb(b,null,h,f)):aa(a,b,h,f);b.memoizedState=d.state;e&&vh(b,c,!0);return b.child}function si(a){var b=a.stateNode;b.pendingContext?th(a,b.pendingContext,b.pendingContext!==b.context):b.context&&th(a,b.context,!1);gf(a,b.containerInfo)}function ti(a,b,c,d,e){Qb();Ye(e);b.flags|=256;aa(a,b,c,d);return b.child}function Bf(a){return{baseLanes:a,
cachePool:null,transitions:null}}function ui(a,b,c){var d=b.pendingProps,e=F.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;y(F,e&1);if(null===a){Xe(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:"$!"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:"hidden",children:g},0===(d&1)&&null!==
f?(f.childLanes=0,f.pendingProps=g):f=Gd(g,d,0,null),a=sb(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=Bf(c),b.memoizedState=Cf,a):Df(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return uk(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:"hidden",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=eb(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=eb(h,f):(f=
sb(f,g,c,null),f.flags|=2);f.return=b;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?Bf(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=Cf;return d}f=a.child;a=f.sibling;d=eb(f,{mode:"visible",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}
function Df(a,b,c){b=Gd({mode:"visible",children:b},a.mode,0,null);b.return=a;return a.child=b}function Hd(a,b,c,d){null!==d&&Ye(d);Vb(b,a.child,null,c);a=Df(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}function uk(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=vf(Error(m(422))),Hd(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=Gd({mode:"visible",children:d.children},e,0,null);f=sb(f,e,g,null);f.flags|=2;d.return=
b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Vb(b,a.child,null,g);b.child.memoizedState=Bf(g);b.memoizedState=Cf;return f}if(0===(b.mode&1))return Hd(a,b,g,null);if("$!"===e.data){d=e.nextSibling&&e.nextSibling.dataset;if(d)var h=d.dgst;d=h;f=Error(m(419));d=vf(f,d,void 0);return Hd(a,b,g,d)}h=0!==(g&a.childLanes);if(ha||h){d=O;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=
32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;0!==e&&e!==f.retryLane&&(f.retryLane=e,Oa(a,e),xa(d,a,e,-1))}Ef();d=vf(Error(m(421)));return Hd(a,b,g,d)}if("$?"===e.data)return b.flags|=128,b.child=a.child,b=vk.bind(null,a),e._reactRetry=b,null;a=f.treeContext;fa=Ka(e.nextSibling);la=b;D=!0;wa=null;null!==a&&(na[oa++]=Ma,na[oa++]=Na,na[oa++]=rb,Ma=a.id,Na=a.overflow,rb=b);b=Df(b,d.children);b.flags|=4096;return b}function vi(a,b,c){a.lanes|=b;var d=a.alternate;
null!==d&&(d.lanes|=b);df(a.return,b,c)}function Ff(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}function wi(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;aa(a,b,d.children,c);d=F.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&
vi(a,c,b);else if(19===a.tag)vi(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(F,d);if(0===(b.mode&1))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===xd(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ff(b,!1,e,c,f);break;case "backwards":c=
null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===xd(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ff(b,!0,c,null,f);break;case "together":Ff(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Fd(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Qa(a,b,c){null!==a&&(b.dependencies=a.dependencies);ra|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(m(153));if(null!==
b.child){a=b.child;c=eb(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=eb(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}function wk(a,b,c){switch(b.tag){case 3:si(b);Qb();break;case 5:Ih(b);break;case 1:ea(b.type)&&ld(b);break;case 4:gf(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;y(ud,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return y(F,F.current&
1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return ui(a,b,c);y(F,F.current&1);a=Qa(a,b,c);return null!==a?a.sibling:null}y(F,F.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&128)){if(d)return wi(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);y(F,F.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,pi(a,b,c)}return Qa(a,b,c)}function Dc(a,b){if(!D)switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==
b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function W(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,
d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}function xk(a,b,c){var d=b.pendingProps;Ve(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return W(b),null;case 1:return ea(b.type)&&(v(S),v(J)),W(b),null;case 3:d=b.stateNode;Tb();v(S);v(J);jf();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)pd(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&
256)||(b.flags|=1024,null!==wa&&(Gf(wa),wa=null));xi(a,b);W(b);return null;case 5:hf(b);var e=ub(xc.current);c=b.type;if(null!==a&&null!=b.stateNode)yk(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(m(166));W(b);return null}a=ub(Ea.current);if(pd(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Da]=b;d[uc]=f;a=0!==(b.mode&1);switch(c){case "dialog":B("cancel",d);B("close",d);break;case "iframe":case "object":case "embed":B("load",d);break;
case "video":case "audio":for(e=0;e<Ec.length;e++)B(Ec[e],d);break;case "source":B("error",d);break;case "img":case "image":case "link":B("error",d);B("load",d);break;case "details":B("toggle",d);break;case "input":kg(d,f);B("invalid",d);break;case "select":d._wrapperState={wasMultiple:!!f.multiple};B("invalid",d);break;case "textarea":ng(d,f),B("invalid",d)}pe(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&
jd(d.textContent,h,a),e=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(!0!==f.suppressHydrationWarning&&jd(d.textContent,h,a),e=["children",""+h]):$b.hasOwnProperty(g)&&null!=h&&"onScroll"===g&&B("scroll",d)}switch(c){case "input":Pc(d);mg(d,f,!0);break;case "textarea":Pc(d);pg(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=kd)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;"http://www.w3.org/1999/xhtml"===
a&&(a=qg(c));"http://www.w3.org/1999/xhtml"===a?"script"===c?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),"select"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Da]=b;a[uc]=d;zk(a,b,!1,!1);b.stateNode=a;a:{g=qe(c,d);switch(c){case "dialog":B("cancel",a);B("close",a);e=d;break;case "iframe":case "object":case "embed":B("load",a);e=d;break;
case "video":case "audio":for(e=0;e<Ec.length;e++)B(Ec[e],a);e=d;break;case "source":B("error",a);e=d;break;case "img":case "image":case "link":B("error",a);B("load",a);e=d;break;case "details":B("toggle",a);e=d;break;case "input":kg(a,d);e=ke(a,d);B("invalid",a);break;case "option":e=d;break;case "select":a._wrapperState={wasMultiple:!!d.multiple};e=E({},d,{value:void 0});B("invalid",a);break;case "textarea":ng(a,d);e=ne(a,d);B("invalid",a);break;default:e=d}pe(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=
h[f];"style"===f?sg(a,k):"dangerouslySetInnerHTML"===f?(k=k?k.__html:void 0,null!=k&&yi(a,k)):"children"===f?"string"===typeof k?("textarea"!==c||""!==k)&&Fc(a,k):"number"===typeof k&&Fc(a,""+k):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&($b.hasOwnProperty(f)?null!=k&&"onScroll"===f&&B("scroll",a):null!=k&&$d(a,f,k,g))}switch(c){case "input":Pc(a);mg(a,d,!1);break;case "textarea":Pc(a);pg(a);break;case "option":null!=d.value&&a.setAttribute("value",""+Ua(d.value));
break;case "select":a.multiple=!!d.multiple;f=d.value;null!=f?Db(a,!!d.multiple,f,!1):null!=d.defaultValue&&Db(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof e.onClick&&(a.onclick=kd)}switch(c){case "button":case "input":case "select":case "textarea":d=!!d.autoFocus;break a;case "img":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}W(b);return null;case 6:if(a&&null!=b.stateNode)Ak(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===
b.stateNode)throw Error(m(166));c=ub(xc.current);ub(Ea.current);if(pd(b)){d=b.stateNode;c=b.memoizedProps;d[Da]=b;if(f=d.nodeValue!==c)if(a=la,null!==a)switch(a.tag){case 3:jd(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&jd(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Da]=b,b.stateNode=d}W(b);return null;case 13:v(F);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(D&&
null!==fa&&0!==(b.mode&1)&&0===(b.flags&128)){for(f=fa;f;)f=Ka(f.nextSibling);Qb();b.flags|=98560;f=!1}else if(f=pd(b),null!==d&&null!==d.dehydrated){if(null===a){if(!f)throw Error(m(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(m(317));f[Da]=b}else Qb(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;W(b);f=!1}else null!==wa&&(Gf(wa),wa=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&
d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(F.current&1)?0===L&&(L=3):Ef()));null!==b.updateQueue&&(b.flags|=4);W(b);return null;case 4:return Tb(),xi(a,b),null===a&&sc(b.stateNode.containerInfo),W(b),null;case 10:return cf(b.type._context),W(b),null;case 17:return ea(b.type)&&(v(S),v(J)),W(b),null;case 19:v(F);f=b.memoizedState;if(null===f)return W(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dc(f,!1);else{if(0!==L||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=
xd(a);if(null!==g){b.flags|=128;Dc(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,
f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;y(F,F.current&1|2);return b.child}a=a.sibling}null!==f.tail&&P()>Hf&&(b.flags|=128,d=!0,Dc(f,!1),b.lanes=4194304)}else{if(!d)if(a=xd(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dc(f,!0),null===f.tail&&"hidden"===f.tailMode&&!g.alternate&&!D)return W(b),null}else 2*P()-f.renderingStartTime>Hf&&1073741824!==c&&(b.flags|=
128,d=!0,Dc(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=b,f.tail=b.sibling,f.renderingStartTime=P(),b.sibling=null,c=F.current,y(F,d?c&1|2:c&1),b;W(b);return null;case 22:case 23:return ba=Ga.current,v(Ga),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(ba&1073741824)&&(W(b),b.subtreeFlags&6&&(b.flags|=8192)):W(b),null;case 24:return null;
case 25:return null}throw Error(m(156,b.tag));}function Bk(a,b,c){Ve(b);switch(b.tag){case 1:return ea(b.type)&&(v(S),v(J)),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return Tb(),v(S),v(J),jf(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return hf(b),null;case 13:v(F);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(m(340));Qb()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return v(F),null;case 4:return Tb(),
null;case 10:return cf(b.type._context),null;case 22:case 23:return ba=Ga.current,v(Ga),null;case 24:return null;default:return null}}function Wb(a,b){var c=a.ref;if(null!==c)if("function"===typeof c)try{c(null)}catch(d){G(a,b,d)}else c.current=null}function If(a,b,c){try{c()}catch(d){G(a,b,d)}}function Ck(a,b){Jf=Zc;a=ch();if(Ie(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();
if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(M){c=null;break a}var g=0,h=-1,k=-1,n=0,q=0,u=a,r=null;b:for(;;){for(var p;;){u!==c||0!==e&&3!==u.nodeType||(h=g+e);u!==f||0!==d&&3!==u.nodeType||(k=g+d);3===u.nodeType&&(g+=u.nodeValue.length);if(null===(p=u.firstChild))break;r=u;u=p}for(;;){if(u===a)break b;r===c&&++n===e&&(h=g);r===f&&++q===d&&(k=g);if(null!==(p=u.nextSibling))break;u=r;r=u.parentNode}u=p}c=-1===h||-1===k?null:
{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Kf={focusedElem:a,selectionRange:c};Zc=!1;for(l=b;null!==l;)if(b=l,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,l=a;else for(;null!==l;){b=l;try{var x=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;case 1:if(null!==x){var v=x.memoizedProps,z=x.memoizedState,w=b.stateNode,A=w.getSnapshotBeforeUpdate(b.elementType===b.type?v:ya(b.type,v),z);w.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var t=
b.stateNode.containerInfo;1===t.nodeType?t.textContent="":9===t.nodeType&&t.documentElement&&t.removeChild(t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(m(163));}}catch(M){G(b,b.return,M)}a=b.sibling;if(null!==a){a.return=b.return;l=a;break}l=b.return}x=zi;zi=!1;return x}function Gc(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&If(b,c,f)}e=e.next}while(e!==d)}}
function Id(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Lf(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}"function"===typeof b?b(a):b.current=a}}function Ai(a){var b=a.alternate;null!==b&&(a.alternate=null,Ai(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Da],delete b[uc],delete b[Me],delete b[Dk],
delete b[Ek]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Bi(a){return 5===a.tag||3===a.tag||4===a.tag}function Ci(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Bi(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&
2))return a.stateNode}}function Mf(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=kd));else if(4!==d&&(a=a.child,null!==a))for(Mf(a,b,c),a=a.sibling;null!==a;)Mf(a,b,c),a=a.sibling}function Nf(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);
else if(4!==d&&(a=a.child,null!==a))for(Nf(a,b,c),a=a.sibling;null!==a;)Nf(a,b,c),a=a.sibling}function jb(a,b,c){for(c=c.child;null!==c;)Di(a,b,c),c=c.sibling}function Di(a,b,c){if(Ca&&"function"===typeof Ca.onCommitFiberUnmount)try{Ca.onCommitFiberUnmount(Uc,c)}catch(h){}switch(c.tag){case 5:X||Wb(c,b);case 6:var d=T,e=za;T=null;jb(a,b,c);T=d;za=e;null!==T&&(za?(a=T,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):T.removeChild(c.stateNode));break;case 18:null!==T&&(za?
(a=T,c=c.stateNode,8===a.nodeType?Re(a.parentNode,c):1===a.nodeType&&Re(a,c),nc(a)):Re(T,c.stateNode));break;case 4:d=T;e=za;T=c.stateNode.containerInfo;za=!0;jb(a,b,c);T=d;za=e;break;case 0:case 11:case 14:case 15:if(!X&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?If(c,b,g):0!==(f&4)&&If(c,b,g));e=e.next}while(e!==d)}jb(a,b,c);break;case 1:if(!X&&(Wb(c,b),d=c.stateNode,"function"===typeof d.componentWillUnmount))try{d.props=
c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){G(c,b,h)}jb(a,b,c);break;case 21:jb(a,b,c);break;case 22:c.mode&1?(X=(d=X)||null!==c.memoizedState,jb(a,b,c),X=d):jb(a,b,c);break;default:jb(a,b,c)}}function Ei(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Fk);b.forEach(function(b){var d=Gk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Aa(a,b,c){c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=
c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:T=h.stateNode;za=!1;break a;case 3:T=h.stateNode.containerInfo;za=!0;break a;case 4:T=h.stateNode.containerInfo;za=!0;break a}h=h.return}if(null===T)throw Error(m(160));Di(f,g,e);T=null;za=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(n){G(e,b,n)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)Fi(b,a),b=b.sibling}function Fi(a,b,c){var d=a.alternate;c=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Aa(b,a);
Ha(a);if(c&4){try{Gc(3,a,a.return),Id(3,a)}catch(I){G(a,a.return,I)}try{Gc(5,a,a.return)}catch(I){G(a,a.return,I)}}break;case 1:Aa(b,a);Ha(a);c&512&&null!==d&&Wb(d,d.return);break;case 5:Aa(b,a);Ha(a);c&512&&null!==d&&Wb(d,d.return);if(a.flags&32){var e=a.stateNode;try{Fc(e,"")}catch(I){G(a,a.return,I)}}if(c&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==d?d.memoizedProps:f,h=a.type,k=a.updateQueue;a.updateQueue=null;if(null!==k)try{"input"===h&&"radio"===f.type&&null!=f.name&&lg(e,f);
qe(h,g);var n=qe(h,f);for(g=0;g<k.length;g+=2){var q=k[g],u=k[g+1];"style"===q?sg(e,u):"dangerouslySetInnerHTML"===q?yi(e,u):"children"===q?Fc(e,u):$d(e,q,u,n)}switch(h){case "input":le(e,f);break;case "textarea":og(e,f);break;case "select":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var p=f.value;null!=p?Db(e,!!f.multiple,p,!1):r!==!!f.multiple&&(null!=f.defaultValue?Db(e,!!f.multiple,f.defaultValue,!0):Db(e,!!f.multiple,f.multiple?[]:"",!1))}e[uc]=f}catch(I){G(a,a.return,
I)}}break;case 6:Aa(b,a);Ha(a);if(c&4){if(null===a.stateNode)throw Error(m(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(I){G(a,a.return,I)}}break;case 3:Aa(b,a);Ha(a);if(c&4&&null!==d&&d.memoizedState.isDehydrated)try{nc(b.containerInfo)}catch(I){G(a,a.return,I)}break;case 4:Aa(b,a);Ha(a);break;case 13:Aa(b,a);Ha(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||null!==e.alternate&&null!==e.alternate.memoizedState||(Of=P()));c&4&&Ei(a);break;case 22:q=
null!==d&&null!==d.memoizedState;a.mode&1?(X=(n=X)||q,Aa(b,a),X=n):Aa(b,a);Ha(a);if(c&8192){n=null!==a.memoizedState;if((a.stateNode.isHidden=n)&&!q&&0!==(a.mode&1))for(l=a,q=a.child;null!==q;){for(u=l=q;null!==l;){r=l;p=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Gc(4,r,r.return);break;case 1:Wb(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){c=r;b=r.return;try{d=c,x.props=d.memoizedProps,x.state=d.memoizedState,x.componentWillUnmount()}catch(I){G(c,b,I)}}break;
case 5:Wb(r,r.return);break;case 22:if(null!==r.memoizedState){Gi(u);continue}}null!==p?(p.return=r,l=p):Gi(u)}q=q.sibling}a:for(q=null,u=a;;){if(5===u.tag){if(null===q){q=u;try{e=u.stateNode,n?(f=e.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(h=u.stateNode,k=u.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty("display")?k.display:null,h.style.display=rg("display",g))}catch(I){G(a,a.return,I)}}}else if(6===u.tag){if(null===q)try{u.stateNode.nodeValue=
n?"":u.memoizedProps}catch(I){G(a,a.return,I)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===a)&&null!==u.child){u.child.return=u;u=u.child;continue}if(u===a)break a;for(;null===u.sibling;){if(null===u.return||u.return===a)break a;q===u&&(q=null);u=u.return}q===u&&(q=null);u.sibling.return=u.return;u=u.sibling}}break;case 19:Aa(b,a);Ha(a);c&4&&Ei(a);break;case 21:break;default:Aa(b,a),Ha(a)}}function Ha(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Bi(c)){var d=c;
break a}c=c.return}throw Error(m(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(Fc(e,""),d.flags&=-33);var f=Ci(a);Nf(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Ci(a);Mf(a,h,g);break;default:throw Error(m(161));}}catch(k){G(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function Hk(a,b,c){l=a;Hi(a,b,c)}function Hi(a,b,c){for(var d=0!==(a.mode&1);null!==l;){var e=l,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jd;if(!g){var h=e.alternate,k=null!==h&&null!==
h.memoizedState||X;h=Jd;var n=X;Jd=g;if((X=k)&&!n)for(l=e;null!==l;)g=l,k=g.child,22===g.tag&&null!==g.memoizedState?Ii(e):null!==k?(k.return=g,l=k):Ii(e);for(;null!==f;)l=f,Hi(f,b,c),f=f.sibling;l=e;Jd=h;X=n}Ji(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,l=f):Ji(a,b,c)}}function Ji(a,b,c){for(;null!==l;){b=l;if(0!==(b.flags&8772)){c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:X||Id(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!X)if(null===c)d.componentDidMount();
else{var e=b.elementType===b.type?c.memoizedProps:ya(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&Hh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=b.child.stateNode;break;case 1:c=b.child.stateNode}Hh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case "button":case "input":case "select":case "textarea":k.autoFocus&&
c.focus();break;case "img":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var n=b.alternate;if(null!==n){var q=n.memoizedState;if(null!==q){var p=q.dehydrated;null!==p&&nc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(m(163));}X||b.flags&512&&Lf(b)}catch(r){G(b,b.return,r)}}if(b===a){l=null;break}c=b.sibling;if(null!==c){c.return=b.return;l=c;break}l=b.return}}function Gi(a){for(;null!==l;){var b=l;if(b===
a){l=null;break}var c=b.sibling;if(null!==c){c.return=b.return;l=c;break}l=b.return}}function Ii(a){for(;null!==l;){var b=l;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Id(4,b)}catch(k){G(b,c,k)}break;case 1:var d=b.stateNode;if("function"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){G(b,e,k)}}var f=b.return;try{Lf(b)}catch(k){G(b,f,k)}break;case 5:var g=b.return;try{Lf(b)}catch(k){G(b,g,k)}}}catch(k){G(b,b.return,k)}if(b===a){l=null;break}var h=b.sibling;
if(null!==h){h.return=b.return;l=h;break}l=b.return}}function Hc(){Hf=P()+500}function Z(){return 0!==(p&6)?P():-1!==Kd?Kd:Kd=P()}function hb(a){if(0===(a.mode&1))return 1;if(0!==(p&2)&&0!==U)return U&-U;if(null!==Ik.transition)return 0===Ld&&(Ld=Dg()),Ld;a=z;if(0!==a)return a;a=window.event;a=void 0===a?16:Lg(a.type);return a}function xa(a,b,c,d){if(50<Ic)throw Ic=0,Pf=null,Error(m(185));ic(a,c,d);if(0===(p&2)||a!==O)a===O&&(0===(p&2)&&(Md|=c),4===L&&kb(a,U)),ia(a,d),1===c&&0===p&&0===(b.mode&1)&&
(Hc(),md&&db())}function ia(a,b){var c=a.callbackNode;tj(a,b);var d=Vc(a,a===O?U:0);if(0===d)null!==c&&Ki(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&Ki(c);if(1===b)0===a.tag?jk(Li.bind(null,a)):wh(Li.bind(null,a)),Jk(function(){0===(p&6)&&db()}),c=null;else{switch(Eg(d)){case 1:c=De;break;case 4:c=Mg;break;case 16:c=ad;break;case 536870912:c=Ng;break;default:c=ad}c=Mi(c,Ni.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}function Ni(a,b){Kd=-1;
Ld=0;if(0!==(p&6))throw Error(m(327));var c=a.callbackNode;if(Xb()&&a.callbackNode!==c)return null;var d=Vc(a,a===O?U:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Nd(a,d);else{b=d;var e=p;p|=2;var f=Oi();if(O!==a||U!==b)Ra=null,Hc(),wb(a,b);do try{Kk();break}catch(h){Pi(a,h)}while(1);af();Od.current=f;p=e;null!==H?b=0:(O=null,U=0,b=L)}if(0!==b){2===b&&(e=ve(a),0!==e&&(d=e,b=Qf(a,e)));if(1===b)throw c=Jc,wb(a,0),kb(a,d),ia(a,P()),c;if(6===b)kb(a,d);else{e=a.current.alternate;
if(0===(d&30)&&!Lk(e)&&(b=Nd(a,d),2===b&&(f=ve(a),0!==f&&(d=f,b=Qf(a,f))),1===b))throw c=Jc,wb(a,0),kb(a,d),ia(a,P()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(m(345));case 2:xb(a,ja,Ra);break;case 3:kb(a,d);if((d&130023424)===d&&(b=Of+500-P(),10<b)){if(0!==Vc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){Z();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Rf(xb.bind(null,a,ja,Ra),b);break}xb(a,ja,Ra);break;case 4:kb(a,d);if((d&4194240)===d)break;b=a.eventTimes;
for(e=-1;0<d;){var g=31-ta(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=P()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*Mk(d/1960))-d;if(10<d){a.timeoutHandle=Rf(xb.bind(null,a,ja,Ra),d);break}xb(a,ja,Ra);break;case 5:xb(a,ja,Ra);break;default:throw Error(m(329));}}}ia(a,P());return a.callbackNode===c?Ni.bind(null,a):null}function Qf(a,b){var c=Kc;a.current.memoizedState.isDehydrated&&(wb(a,b).flags|=256);a=Nd(a,b);2!==a&&(b=ja,ja=c,null!==b&&Gf(b));return a}function Gf(a){null===
ja?ja=a:ja.push.apply(ja,a)}function Lk(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!ua(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}function kb(a,b){b&=~Sf;b&=~Md;a.suspendedLanes|=b;a.pingedLanes&=
~b;for(a=a.expirationTimes;0<b;){var c=31-ta(b),d=1<<c;a[c]=-1;b&=~d}}function Li(a){if(0!==(p&6))throw Error(m(327));Xb();var b=Vc(a,0);if(0===(b&1))return ia(a,P()),null;var c=Nd(a,b);if(0!==a.tag&&2===c){var d=ve(a);0!==d&&(b=d,c=Qf(a,d))}if(1===c)throw c=Jc,wb(a,0),kb(a,b),ia(a,P()),c;if(6===c)throw Error(m(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;xb(a,ja,Ra);ia(a,P());return null}function Tf(a,b){var c=p;p|=1;try{return a(b)}finally{p=c,0===p&&(Hc(),md&&db())}}function yb(a){null!==
lb&&0===lb.tag&&0===(p&6)&&Xb();var b=p;p|=1;var c=ca.transition,d=z;try{if(ca.transition=null,z=1,a)return a()}finally{z=d,ca.transition=c,p=b,0===(p&6)&&db()}}function wb(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Nk(c));if(null!==H)for(c=H.return;null!==c;){var d=c;Ve(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(v(S),v(J));break;case 3:Tb();v(S);v(J);jf();break;case 5:hf(d);break;case 4:Tb();break;case 13:v(F);break;
case 19:v(F);break;case 10:cf(d.type._context);break;case 22:case 23:ba=Ga.current,v(Ga)}c=c.return}O=a;H=a=eb(a.current,null);U=ba=b;L=0;Jc=null;Sf=Md=ra=0;ja=Kc=null;if(null!==tb){for(b=0;b<tb.length;b++)if(c=tb[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}tb=null}return a}function Pi(a,b){do{var c=H;try{af();yd.current=zd;if(Ad){for(var d=C.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ad=
!1}vb=0;N=K=C=null;zc=!1;Ac=0;Uf.current=null;if(null===c||null===c.return){L=1;Jc=b;H=null;break}a:{var f=a,g=c.return,h=c,k=b;b=U;h.flags|=32768;if(null!==k&&"object"===typeof k&&"function"===typeof k.then){var n=k,l=h,p=l.tag;if(0===(l.mode&1)&&(0===p||11===p||15===p)){var r=l.alternate;r?(l.updateQueue=r.updateQueue,l.memoizedState=r.memoizedState,l.lanes=r.lanes):(l.updateQueue=null,l.memoizedState=null)}var v=ji(g);if(null!==v){v.flags&=-257;ki(v,g,h,f,b);v.mode&1&&ii(f,n,b);b=v;k=n;var x=b.updateQueue;
if(null===x){var z=new Set;z.add(k);b.updateQueue=z}else x.add(k);break a}else{if(0===(b&1)){ii(f,n,b);Ef();break a}k=Error(m(426))}}else if(D&&h.mode&1){var y=ji(g);if(null!==y){0===(y.flags&65536)&&(y.flags|=256);ki(y,g,h,f,b);Ye(Ub(k,h));break a}}f=k=Ub(k,h);4!==L&&(L=2);null===Kc?Kc=[f]:Kc.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;b&=-b;f.lanes|=b;var w=gi(f,k,b);Gh(f,w);break a;case 1:h=k;var A=f.type,t=f.stateNode;if(0===(f.flags&128)&&("function"===typeof A.getDerivedStateFromError||
null!==t&&"function"===typeof t.componentDidCatch&&(null===ib||!ib.has(t)))){f.flags|=65536;b&=-b;f.lanes|=b;var B=hi(f,h,b);Gh(f,B);break a}}f=f.return}while(null!==f)}Qi(c)}catch(ma){b=ma;H===c&&null!==c&&(H=c=c.return);continue}break}while(1)}function Oi(){var a=Od.current;Od.current=zd;return null===a?zd:a}function Ef(){if(0===L||3===L||2===L)L=4;null===O||0===(ra&268435455)&&0===(Md&268435455)||kb(O,U)}function Nd(a,b){var c=p;p|=2;var d=Oi();if(O!==a||U!==b)Ra=null,wb(a,b);do try{Ok();break}catch(e){Pi(a,
e)}while(1);af();p=c;Od.current=d;if(null!==H)throw Error(m(261));O=null;U=0;return L}function Ok(){for(;null!==H;)Ri(H)}function Kk(){for(;null!==H&&!Pk();)Ri(H)}function Ri(a){var b=Qk(a.alternate,a,ba);a.memoizedProps=a.pendingProps;null===b?Qi(a):H=b;Uf.current=null}function Qi(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=xk(c,b,ba),null!==c){H=c;return}}else{c=Bk(c,b);if(null!==c){c.flags&=32767;H=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;
else{L=6;H=null;return}}b=b.sibling;if(null!==b){H=b;return}H=b=a}while(null!==b);0===L&&(L=5)}function xb(a,b,c){var d=z,e=ca.transition;try{ca.transition=null,z=1,Rk(a,b,c,d)}finally{ca.transition=e,z=d}return null}function Rk(a,b,c,d){do Xb();while(null!==lb);if(0!==(p&6))throw Error(m(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(m(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;
uj(a,f);a===O&&(H=O=null,U=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||Pd||(Pd=!0,Mi(ad,function(){Xb();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ca.transition;ca.transition=null;var g=z;z=1;var h=p;p|=4;Uf.current=null;Ck(a,c);Fi(c,a);Tj(Kf);Zc=!!Jf;Kf=Jf=null;a.current=c;Hk(c,a,e);Sk();p=h;z=g;ca.transition=f}else a.current=c;Pd&&(Pd=!1,lb=a,Qd=e);f=a.pendingLanes;0===f&&(ib=null);oj(c.stateNode,d);ia(a,P());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=
b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Ed)throw Ed=!1,a=xf,xf=null,a;0!==(Qd&1)&&0!==a.tag&&Xb();f=a.pendingLanes;0!==(f&1)?a===Pf?Ic++:(Ic=0,Pf=a):Ic=0;db();return null}function Xb(){if(null!==lb){var a=Eg(Qd),b=ca.transition,c=z;try{ca.transition=null;z=16>a?16:a;if(null===lb)var d=!1;else{a=lb;lb=null;Qd=0;if(0!==(p&6))throw Error(m(331));var e=p;p|=4;for(l=a.current;null!==l;){var f=l,g=f.child;if(0!==(l.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var n=
h[k];for(l=n;null!==l;){var q=l;switch(q.tag){case 0:case 11:case 15:Gc(8,q,f)}var u=q.child;if(null!==u)u.return=q,l=u;else for(;null!==l;){q=l;var r=q.sibling,v=q.return;Ai(q);if(q===n){l=null;break}if(null!==r){r.return=v;l=r;break}l=v}}}var x=f.alternate;if(null!==x){var y=x.child;if(null!==y){x.child=null;do{var C=y.sibling;y.sibling=null;y=C}while(null!==y)}}l=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,l=g;else b:for(;null!==l;){f=l;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Gc(9,
f,f.return)}var w=f.sibling;if(null!==w){w.return=f.return;l=w;break b}l=f.return}}var A=a.current;for(l=A;null!==l;){g=l;var t=g.child;if(0!==(g.subtreeFlags&2064)&&null!==t)t.return=g,l=t;else b:for(g=A;null!==l;){h=l;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Id(9,h)}}catch(ma){G(h,h.return,ma)}if(h===g){l=null;break b}var B=h.sibling;if(null!==B){B.return=h.return;l=B;break b}l=h.return}}p=e;db();if(Ca&&"function"===typeof Ca.onPostCommitFiberRoot)try{Ca.onPostCommitFiberRoot(Uc,
a)}catch(ma){}d=!0}return d}finally{z=c,ca.transition=b}}return!1}function Si(a,b,c){b=Ub(c,b);b=gi(a,b,1);a=fb(a,b,1);b=Z();null!==a&&(ic(a,1,b),ia(a,b))}function G(a,b,c){if(3===a.tag)Si(a,a,c);else for(;null!==b;){if(3===b.tag){Si(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if("function"===typeof b.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===ib||!ib.has(d))){a=Ub(c,a);a=hi(b,a,1);b=fb(b,a,1);a=Z();null!==b&&(ic(b,1,a),ia(b,a));break}}b=b.return}}function sk(a,
b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Z();a.pingedLanes|=a.suspendedLanes&c;O===a&&(U&c)===c&&(4===L||3===L&&(U&130023424)===U&&500>P()-Of?wb(a,0):Sf|=c);ia(a,b)}function Ti(a,b){0===b&&(0===(a.mode&1)?b=1:(b=Rd,Rd<<=1,0===(Rd&130023424)&&(Rd=4194304)));var c=Z();a=Oa(a,b);null!==a&&(ic(a,b,c),ia(a,c))}function vk(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Ti(a,c)}function Gk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);
break;case 19:d=a.stateNode;break;default:throw Error(m(314));}null!==d&&d.delete(b);Ti(a,c)}function Mi(a,b){return xh(a,b)}function Tk(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function yf(a){a=
a.prototype;return!(!a||!a.isReactComponent)}function Uk(a){if("function"===typeof a)return yf(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===ie)return 11;if(a===je)return 14}return 2}function eb(a,b){var c=a.alternate;null===c?(c=pa(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=
a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function rd(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)yf(a)&&(g=1);else if("string"===typeof a)g=5;else a:switch(a){case Bb:return sb(c.children,e,f,b);case fe:g=8;e|=8;break;case ee:return a=pa(12,c,b,e|2),a.elementType=ee,a.lanes=f,a;case ge:return a=
pa(13,c,b,e),a.elementType=ge,a.lanes=f,a;case he:return a=pa(19,c,b,e),a.elementType=he,a.lanes=f,a;case Ui:return Gd(c,e,f,b);default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case hg:g=10;break a;case gg:g=9;break a;case ie:g=11;break a;case je:g=14;break a;case Ta:g=16;d=null;break a}throw Error(m(130,null==a?a:typeof a,""));}b=pa(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function sb(a,b,c,d){a=pa(7,a,d,b);a.lanes=c;return a}function Gd(a,b,c,d){a=pa(22,a,d,b);a.elementType=
Ui;a.lanes=c;a.stateNode={isHidden:!1};return a}function Ze(a,b,c){a=pa(6,a,null,b);a.lanes=c;return a}function $e(a,b,c){b=pa(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Vk(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=
0;this.eventTimes=we(0);this.expirationTimes=we(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=we(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=null}function Vf(a,b,c,d,e,f,g,h,k,l){a=new Vk(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=pa(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,
pendingSuspenseBoundaries:null};ff(f);return a}function Wk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Cb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Vi(a){if(!a)return cb;a=a._reactInternals;a:{if(nb(a)!==a||1!==a.tag)throw Error(m(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(ea(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(m(171));
}if(1===a.tag){var c=a.type;if(ea(c))return uh(a,c,b)}return b}function Wi(a,b,c,d,e,f,g,h,k,l){a=Vf(c,d,!0,a,e,f,g,h,k);a.context=Vi(null);c=a.current;d=Z();e=hb(c);f=Pa(d,e);f.callback=void 0!==b&&null!==b?b:null;fb(c,f,e);a.current.lanes=e;ic(a,e,d);ia(a,d);return a}function Sd(a,b,c,d){var e=b.current,f=Z(),g=hb(e);c=Vi(c);null===b.context?b.context=c:b.pendingContext=c;b=Pa(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=fb(e,b,g);null!==a&&(xa(a,e,g,f),vd(a,e,g));return g}
function Td(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Xi(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function Wf(a,b){Xi(a,b);(a=a.alternate)&&Xi(a,b)}function Xk(a){a=Bg(a);return null===a?null:a.stateNode}function Yk(a){return null}function Xf(a){this._internalRoot=a}function Ud(a){this._internalRoot=a}function Yf(a){return!(!a||1!==a.nodeType&&9!==
a.nodeType&&11!==a.nodeType)}function Vd(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Yi(){}function Zk(a,b,c,d,e){if(e){if("function"===typeof d){var f=d;d=function(){var a=Td(g);f.call(a)}}var g=Wi(b,d,a,0,null,!1,!1,"",Yi);a._reactRootContainer=g;a[Ja]=g.current;sc(8===a.nodeType?a.parentNode:a);yb();return g}for(;e=a.lastChild;)a.removeChild(e);if("function"===typeof d){var h=d;d=function(){var a=Td(k);
h.call(a)}}var k=Vf(a,0,!1,null,null,!1,!1,"",Yi);a._reactRootContainer=k;a[Ja]=k.current;sc(8===a.nodeType?a.parentNode:a);yb(function(){Sd(b,k,c,d)});return k}function Wd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if("function"===typeof e){var h=e;e=function(){var a=Td(g);h.call(a)}}Sd(b,g,a,e)}else g=Zk(c,b,a,e,d);return Td(g)}var cg=new Set,$b={},Ia=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Zd=Object.prototype.hasOwnProperty,
cj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},dg={},R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){R[a]=
new Y(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];R[b]=new Y(b,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){R[a]=new Y(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){R[a]=new Y(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){R[a]=
new Y(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){R[a]=new Y(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){R[a]=new Y(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){R[a]=new Y(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){R[a]=new Y(a,5,!1,a.toLowerCase(),null,!1,!1)});var Zf=/[\-:]([a-z])/g,$f=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(Zf,$f);R[b]=new Y(b,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(Zf,$f);R[b]=new Y(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(Zf,$f);R[b]=new Y(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){R[a]=new Y(a,1,!1,a.toLowerCase(),null,!1,!1)});R.xlinkHref=new Y("xlinkHref",
1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){R[a]=new Y(a,1,!1,a.toLowerCase(),null,!0,!0)});var Sa=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sd=Symbol.for("react.element"),Cb=Symbol.for("react.portal"),Bb=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),hg=Symbol.for("react.provider"),gg=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),
he=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var Ui=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var fg=Symbol.iterator,E=Object.assign,ae,ce=!1,cc=Array.isArray,Xd,yi=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,
c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{Xd=Xd||document.createElement("div");Xd.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=Xd.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Fc=function(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,
borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,
strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$k=["Webkit","ms","Moz","O"];Object.keys(dc).forEach(function(a){$k.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);dc[b]=dc[a]})});var ij=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ze=null,se=null,Eb=null,Fb=null,xg=function(a,b){return a(b)},yg=function(){},te=!1,Oe=!1;if(Ia)try{var Lc={};Object.defineProperty(Lc,
"passive",{get:function(){Oe=!0}});window.addEventListener("test",Lc,Lc);window.removeEventListener("test",Lc,Lc)}catch(a){Oe=!1}var kj=function(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(q){this.onError(q)}},gc=!1,Sc=null,Tc=!1,ue=null,lj={onError:function(a){gc=!0;Sc=a}},Ba=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Jg=Ba.unstable_scheduleCallback,Kg=Ba.unstable_NormalPriority,xh=Jg,Ki=Ba.unstable_cancelCallback,Pk=Ba.unstable_shouldYield,
Sk=Ba.unstable_requestPaint,P=Ba.unstable_now,Dj=Ba.unstable_getCurrentPriorityLevel,De=Ba.unstable_ImmediatePriority,Mg=Ba.unstable_UserBlockingPriority,ad=Kg,Ej=Ba.unstable_LowPriority,Ng=Ba.unstable_IdlePriority,Uc=null,Ca=null,ta=Math.clz32?Math.clz32:pj,qj=Math.log,rj=Math.LN2,Wc=64,Rd=4194304,z=0,Ae=!1,Yc=[],Va=null,Wa=null,Xa=null,jc=new Map,kc=new Map,Ya=[],Bj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),
Gb=Sa.ReactCurrentBatchConfig,Zc=!0,$c=null,Za=null,Ee=null,bd=null,Yb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},He=ka(Yb),Mc=E({},Yb,{view:0,detail:0}),ak=ka(Mc),ag,bg,Nc,Yd=E({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fe,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:
a.relatedTarget},movementX:function(a){if("movementX"in a)return a.movementX;a!==Nc&&(Nc&&"mousemove"===a.type?(ag=a.screenX-Nc.screenX,bg=a.screenY-Nc.screenY):bg=ag=0,Nc=a);return ag},movementY:function(a){return"movementY"in a?a.movementY:bg}}),ih=ka(Yd),al=E({},Yd,{dataTransfer:0}),Wj=ka(al),bl=E({},Mc,{relatedTarget:0}),Pe=ka(bl),cl=E({},Yb,{animationName:0,elapsedTime:0,pseudoElement:0}),Yj=ka(cl),dl=E({},Yb,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),
ck=ka(dl),el=E({},Yb,{data:0}),qh=ka(el),fk=qh,fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",
112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},hl=E({},Mc,{key:function(a){if(a.key){var b=fl[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=cd(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?gl[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,
metaKey:0,repeat:0,locale:0,getModifierState:Fe,charCode:function(a){return"keypress"===a.type?cd(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?cd(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),Vj=ka(hl),il=E({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nh=ka(il),jl=E({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,
ctrlKey:0,shiftKey:0,getModifierState:Fe}),Xj=ka(jl),kl=E({},Yb,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zj=ka(kl),ll=E({},Yd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),bk=ka(ll),Hj=[9,13,27,32],Ge=Ia&&"CompositionEvent"in window,Oc=null;Ia&&"documentMode"in document&&(Oc=document.documentMode);var ek=Ia&&"TextEvent"in
window&&!Oc,Ug=Ia&&(!Ge||Oc&&8<Oc&&11>=Oc),Tg=String.fromCharCode(32),Sg=!1,Hb=!1,Kj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},oc=null,pc=null,ph=!1;Ia&&(ph=Lj("input")&&(!document.documentMode||9<document.documentMode));var ua="function"===typeof Object.is?Object.is:Sj,dk=Ia&&"documentMode"in document&&11>=document.documentMode,Jb=null,Ke=null,rc=null,Je=!1,Kb={animationend:gd("Animation","AnimationEnd"),
animationiteration:gd("Animation","AnimationIteration"),animationstart:gd("Animation","AnimationStart"),transitionend:gd("Transition","TransitionEnd")},Le={},eh={};Ia&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete Kb.animationend.animation,delete Kb.animationiteration.animation,delete Kb.animationstart.animation),"TransitionEvent"in window||delete Kb.transitionend.transition);var jh=hd("animationend"),kh=hd("animationiteration"),lh=hd("animationstart"),mh=hd("transitionend"),
fh=new Map,Zi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");
(function(){for(var a=0;a<Zi.length;a++){var b=Zi[a],c=b.toLowerCase();b=b[0].toUpperCase()+b.slice(1);$a(c,"on"+b)}$a(jh,"onAnimationEnd");$a(kh,"onAnimationIteration");$a(lh,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(mh,"onTransitionEnd")})();Ab("onMouseEnter",["mouseout","mouseover"]);Ab("onMouseLeave",["mouseout","mouseover"]);Ab("onPointerEnter",["pointerout","pointerover"]);Ab("onPointerLeave",["pointerout","pointerover"]);mb("onChange",
"change click focusin focusout input keydown keyup selectionchange".split(" "));mb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mb("onBeforeInput",["compositionend","keypress","textInput","paste"]);mb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));
var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ec)),id="_reactListening"+Math.random().toString(36).slice(2),gk=/\r\n?/g,hk=/\u0000|\uFFFD/g,Jf=null,Kf=null,Rf="function"===typeof setTimeout?setTimeout:void 0,Nk="function"===typeof clearTimeout?
clearTimeout:void 0,$i="function"===typeof Promise?Promise:void 0,Jk="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof $i?function(a){return $i.resolve(null).then(a).catch(ik)}:Rf,Zb=Math.random().toString(36).slice(2),Da="__reactFiber$"+Zb,uc="__reactProps$"+Zb,Ja="__reactContainer$"+Zb,Me="__reactEvents$"+Zb,Dk="__reactListeners$"+Zb,Ek="__reactHandles$"+Zb,Se=[],Mb=-1,cb={},J=bb(cb),S=bb(!1),pb=cb,La=null,md=!1,Te=!1,Ob=[],Pb=0,od=null,nd=0,na=[],oa=0,rb=null,Ma=1,Na="",la=
null,fa=null,D=!1,wa=null,Ik=Sa.ReactCurrentBatchConfig,Vb=Dh(!0),li=Dh(!1),ud=bb(null),td=null,Rb=null,bf=null,tb=null,kk=Oa,gb=!1,wc={},Ea=bb(wc),yc=bb(wc),xc=bb(wc),F=bb(0),kf=[],yd=Sa.ReactCurrentDispatcher,sf=Sa.ReactCurrentBatchConfig,vb=0,C=null,K=null,N=null,Ad=!1,zc=!1,Ac=0,ml=0,zd={readContext:qa,useCallback:V,useContext:V,useEffect:V,useImperativeHandle:V,useInsertionEffect:V,useLayoutEffect:V,useMemo:V,useReducer:V,useRef:V,useState:V,useDebugValue:V,useDeferredValue:V,useTransition:V,
useMutableSource:V,useSyncExternalStore:V,useId:V,unstable_isNewReconciler:!1},lk={readContext:qa,useCallback:function(a,b){Fa().memoizedState=[a,void 0===b?null:b];return a},useContext:qa,useEffect:Sh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Bd(4194308,4,Vh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return Bd(4194308,4,a,b)},useInsertionEffect:function(a,b){return Bd(4,2,a,b)},useMemo:function(a,b){var c=Fa();b=void 0===b?null:b;a=a();c.memoizedState=
[a,b];return a},useReducer:function(a,b,c){var d=Fa();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=qk.bind(null,C,a);return[d.memoizedState,a]},useRef:function(a){var b=Fa();a={current:a};return b.memoizedState=a},useState:Qh,useDebugValue:rf,useDeferredValue:function(a){return Fa().memoizedState=a},useTransition:function(){var a=Qh(!1),b=a[0];a=pk.bind(null,a[1]);Fa().memoizedState=
a;return[b,a]},useMutableSource:function(a,b,c){},useSyncExternalStore:function(a,b,c){var d=C,e=Fa();if(D){if(void 0===c)throw Error(m(407));c=c()}else{c=b();if(null===O)throw Error(m(349));0!==(vb&30)||Nh(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;Sh(Lh.bind(null,d,f,a),[a]);d.flags|=2048;Cc(9,Mh.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Fa(),b=O.identifierPrefix;if(D){var c=Na;var d=Ma;c=(d&~(1<<32-ta(d)-1)).toString(32)+c;b=":"+b+"R"+c;c=Ac++;0<c&&
(b+="H"+c.toString(32));b+=":"}else c=ml++,b=":"+b+"r"+c.toString(32)+":";return a.memoizedState=b},unstable_isNewReconciler:!1},mk={readContext:qa,useCallback:Xh,useContext:qa,useEffect:qf,useImperativeHandle:Wh,useInsertionEffect:Th,useLayoutEffect:Uh,useMemo:Yh,useReducer:of,useRef:Rh,useState:function(a){return of(Bc)},useDebugValue:rf,useDeferredValue:function(a){var b=sa();return Zh(b,K.memoizedState,a)},useTransition:function(){var a=of(Bc)[0],b=sa().memoizedState;return[a,b]},useMutableSource:Jh,
useSyncExternalStore:Kh,useId:$h,unstable_isNewReconciler:!1},nk={readContext:qa,useCallback:Xh,useContext:qa,useEffect:qf,useImperativeHandle:Wh,useInsertionEffect:Th,useLayoutEffect:Uh,useMemo:Yh,useReducer:pf,useRef:Rh,useState:function(a){return pf(Bc)},useDebugValue:rf,useDeferredValue:function(a){var b=sa();return null===K?b.memoizedState=a:Zh(b,K.memoizedState,a)},useTransition:function(){var a=pf(Bc)[0],b=sa().memoizedState;return[a,b]},useMutableSource:Jh,useSyncExternalStore:Kh,useId:$h,
unstable_isNewReconciler:!1},Dd={isMounted:function(a){return(a=a._reactInternals)?nb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Z(),e=hb(a),f=Pa(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=fb(a,f,e);null!==b&&(xa(b,a,e,d),vd(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Z(),e=hb(a),f=Pa(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=fb(a,f,e);null!==b&&(xa(b,a,e,d),vd(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;
var c=Z(),d=hb(a),e=Pa(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=fb(a,e,d);null!==b&&(xa(b,a,d,c),vd(b,a,d))}},rk="function"===typeof WeakMap?WeakMap:Map,tk=Sa.ReactCurrentOwner,ha=!1,Cf={dehydrated:null,treeContext:null,retryLane:0};var zk=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=
c.return;c=c.sibling}};var xi=function(a,b){};var yk=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){a=b.stateNode;ub(Ea.current);e=null;switch(c){case "input":f=ke(a,f);d=ke(a,d);e=[];break;case "select":f=E({},f,{value:void 0});d=E({},d,{value:void 0});e=[];break;case "textarea":f=ne(a,f);d=ne(a,d);e=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(a.onclick=kd)}pe(c,d);var g;c=null;for(l in f)if(!d.hasOwnProperty(l)&&f.hasOwnProperty(l)&&null!=f[l])if("style"===
l){var h=f[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&($b.hasOwnProperty(l)?e||(e=[]):(e=e||[]).push(l,null));for(l in d){var k=d[l];h=null!=f?f[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if("style"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]="");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||
(c={}),c[g]=k[g])}else c||(e||(e=[]),e.push(l,c)),c=k;else"dangerouslySetInnerHTML"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(e=e||[]).push(l,k)):"children"===l?"string"!==typeof k&&"number"!==typeof k||(e=e||[]).push(l,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&($b.hasOwnProperty(l)?(null!=k&&"onScroll"===l&&B("scroll",a),e||h===k||(e=[])):(e=e||[]).push(l,k))}c&&(e=e||[]).push("style",c);var l=e;if(b.updateQueue=l)b.flags|=4}};var Ak=function(a,
b,c,d){c!==d&&(b.flags|=4)};var Jd=!1,X=!1,Fk="function"===typeof WeakSet?WeakSet:Set,l=null,zi=!1,T=null,za=!1,Mk=Math.ceil,Od=Sa.ReactCurrentDispatcher,Uf=Sa.ReactCurrentOwner,ca=Sa.ReactCurrentBatchConfig,p=0,O=null,H=null,U=0,ba=0,Ga=bb(0),L=0,Jc=null,ra=0,Md=0,Sf=0,Kc=null,ja=null,Of=0,Hf=Infinity,Ra=null,Ed=!1,xf=null,ib=null,Pd=!1,lb=null,Qd=0,Ic=0,Pf=null,Kd=-1,Ld=0;var Qk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||S.current)ha=!0;else{if(0===(a.lanes&c)&&0===(b.flags&
128))return ha=!1,wk(a,b,c);ha=0!==(a.flags&131072)?!0:!1}else ha=!1,D&&0!==(b.flags&1048576)&&yh(b,nd,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;Fd(a,b);a=b.pendingProps;var e=Nb(b,J.current);Sb(b,c);e=mf(null,b,d,a,e,c);var f=nf();b.flags|=1;"object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=null,ea(d)?(f=!0,ld(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ff(b),e.updater=Dd,b.stateNode=
e,e._reactInternals=b,uf(b,d,a,c),b=Af(null,b,d,!0,f,c)):(b.tag=0,D&&f&&Ue(b),aa(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{Fd(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Uk(d);a=ya(d,a);switch(e){case 0:b=zf(null,b,d,a,c);break a;case 1:b=ri(null,b,d,a,c);break a;case 11:b=mi(null,b,d,a,c);break a;case 14:b=ni(null,b,d,ya(d.type,a),c);break a}throw Error(m(306,d,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ya(d,e),zf(a,b,d,e,c);
case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ya(d,e),ri(a,b,d,e,c);case 3:a:{si(b);if(null===a)throw Error(m(387));d=b.pendingProps;f=b.memoizedState;e=f.element;Fh(a,b);wd(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=f,b.memoizedState=f,b.flags&256){e=Ub(Error(m(423)),b);b=ti(a,b,d,c,e);break a}else if(d!==e){e=
Ub(Error(m(424)),b);b=ti(a,b,d,c,e);break a}else for(fa=Ka(b.stateNode.containerInfo.firstChild),la=b,D=!0,wa=null,c=li(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Qb();if(d===e){b=Qa(a,b,c);break a}aa(a,b,d,c)}b=b.child}return b;case 5:return Ih(b),null===a&&Xe(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Qe(d,e)?g=null:null!==f&&Qe(d,f)&&(b.flags|=32),qi(a,b),aa(a,b,g,c),b.child;case 6:return null===a&&Xe(b),null;case 13:return ui(a,b,c);case 4:return gf(b,
b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Vb(b,null,d,c):aa(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ya(d,e),mi(a,b,d,e,c);case 7:return aa(a,b,b.pendingProps,c),b.child;case 8:return aa(a,b,b.pendingProps.children,c),b.child;case 12:return aa(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;g=e.value;y(ud,d._currentValue);d._currentValue=g;if(null!==f)if(ua(f.value,g)){if(f.children===
e.children&&!S.current){b=Qa(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=Pa(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var p=l.pending;null===p?k.next=k:(k.next=p.next,p.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);df(f.return,c,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===
f.tag){g=f.return;if(null===g)throw Error(m(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);df(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}aa(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,Sb(b,c),e=qa(e),d=d(e),b.flags|=1,aa(a,b,d,c),b.child;case 14:return d=b.type,e=ya(d,b.pendingProps),e=ya(d.type,e),ni(a,b,d,e,c);case 15:return oi(a,
b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:ya(d,e),Fd(a,b),b.tag=1,ea(d)?(a=!0,ld(b)):a=!1,Sb(b,c),ei(b,d,e),uf(b,d,e,c),Af(null,b,d,!0,a,c);case 19:return wi(a,b,c);case 22:return pi(a,b,c)}throw Error(m(156,b.tag));};var pa=function(a,b,c,d){return new Tk(a,b,c,d)},aj="function"===typeof reportError?reportError:function(a){console.error(a)};Ud.prototype.render=Xf.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(m(409));
Sd(a,b,null,null)};Ud.prototype.unmount=Xf.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;yb(function(){Sd(null,a,null,null)});b[Ja]=null}};Ud.prototype.unstable_scheduleHydration=function(a){if(a){var b=nl();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Ya.length&&0!==b&&b<Ya[c].priority;c++);Ya.splice(c,0,a);0===c&&Hg(a)}};var Cj=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=
hc(b.pendingLanes);0!==c&&(xe(b,c|1),ia(b,P()),0===(p&6)&&(Hc(),db()))}break;case 13:yb(function(){var b=Oa(a,1);if(null!==b){var c=Z();xa(b,a,1,c)}}),Wf(a,1)}};var Gg=function(a){if(13===a.tag){var b=Oa(a,134217728);if(null!==b){var c=Z();xa(b,a,134217728,c)}Wf(a,134217728)}};var xj=function(a){if(13===a.tag){var b=hb(a),c=Oa(a,b);if(null!==c){var d=Z();xa(c,a,b,d)}Wf(a,b)}};var nl=function(){return z};var wj=function(a,b){var c=z;try{return z=a,b()}finally{z=c}};se=function(a,b,c){switch(b){case "input":le(a,
c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Rc(d);if(!e)throw Error(m(90));jg(d);le(d,e)}}}break;case "textarea":og(a,c);break;case "select":b=c.value,null!=b&&Db(a,!!c.multiple,b,!1)}};(function(a,b,c){xg=a;yg=c})(Tf,function(a,b,c,d,e){var f=z,g=ca.transition;try{return ca.transition=null,z=1,a(b,c,d,e)}finally{z=f,ca.transition=
g,0===p&&Hc()}},yb);var ol={usingClientEntryPoint:!1,Events:[ec,Ib,Rc,ug,vg,Tf]};(function(a){a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sa.ReactCurrentDispatcher,findHostInstanceByFiber:Xk,
findFiberByHostInstance:a.findFiberByHostInstance||Yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"};if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)a=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)a=!0;else{try{Uc=b.inject(a),Ca=b}catch(c){}a=b.checkDCE?!0:!1}}return a})({findFiberByHostInstance:ob,bundleType:0,version:"18.3.1-next-f1338f8080-20240426",
rendererPackageName:"react-dom"});Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ol;Q.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yf(b))throw Error(m(200));return Wk(a,b,null,c)};Q.createRoot=function(a,b){if(!Yf(a))throw Error(m(299));var c=!1,d="",e=aj;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=Vf(a,1,!1,null,null,
c,!1,d,e);a[Ja]=b.current;sc(8===a.nodeType?a.parentNode:a);return new Xf(b)};Q.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if("function"===typeof a.render)throw Error(m(188));a=Object.keys(a).join(",");throw Error(m(268,a));}a=Bg(b);a=null===a?null:a.stateNode;return a};Q.flushSync=function(a){return yb(a)};Q.hydrate=function(a,b,c){if(!Vd(b))throw Error(m(200));return Wd(null,a,b,!0,c)};Q.hydrateRoot=function(a,b,c){if(!Yf(a))throw Error(m(405));
var d=null!=c&&c.hydratedSources||null,e=!1,f="",g=aj;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=Wi(b,null,a,1,null!=c?c:null,e,!1,f,g);a[Ja]=b.current;sc(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,e);return new Ud(b)};Q.render=
function(a,b,c){if(!Vd(b))throw Error(m(200));return Wd(null,a,b,!1,c)};Q.unmountComponentAtNode=function(a){if(!Vd(a))throw Error(m(40));return a._reactRootContainer?(yb(function(){Wd(null,null,a,!1,function(){a._reactRootContainer=null;a[Ja]=null})}),!0):!1};Q.unstable_batchedUpdates=Tf;Q.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!Vd(c))throw Error(m(200));if(null==a||void 0===a._reactInternals)throw Error(m(38));return Wd(a,b,c,!1,d)};Q.version="18.3.1-next-f1338f8080-20240426"});
})();

</script>

<script>
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorValues(e) { if (null != e) { var t = e["function" == typeof Symbol && Symbol.iterator || "@@iterator"], r = 0; if (t) return t.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) return { next: function next() { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e }; } }; } throw new TypeError(_typeof(e) + " is not iterable"); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t.return || t.return(); } finally { if (u) throw o; } } }; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i.return) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, _regeneratorDefine2(e, r, n, t); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
var _React = React,
  useState = _React.useState,
  useEffect = _React.useEffect,
  useRef = _React.useRef;

/* ── Firebase config ── */
var firebaseConfig = {
  apiKey: "AIzaSyDxa2PZEep3eXY1Iiu4IhjXCwXd6z0HelA",
  authDomain: "health-habit-tracker-e6b50.firebaseapp.com",
  projectId: "health-habit-tracker-e6b50",
  storageBucket: "health-habit-tracker-e6b50.firebasestorage.app",
  messagingSenderId: "890093173627",
  appId: "1:890093173627:web:54032fce30ae7ef3f41bde"
};
var app, auth, db;
var isFirebaseConfigured = firebaseConfig.apiKey !== "YOUR_API_KEY";
if (isFirebaseConfigured) {
  app = firebase.initializeApp(firebaseConfig);
  auth = firebase.auth();
  db = firebase.firestore();
  // Enable offline persistence for faster subsequent loads
  db.enablePersistence({
    synchronizeTabs: true
  }).catch(function () {});
}

/* ── ICONS ── */
var HomeIcon = function HomeIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
  }));
};
var GroupIcon = function GroupIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
  }));
};
var FeedIcon = function FeedIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"
  }));
};
var ProfileIcon = function ProfileIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
  }));
};
var PlusIcon = function PlusIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "white",
    strokeWidth: 2.5
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M12 4v16m8-8H4"
  }));
};
var HeartIcon = function HeartIcon(_ref) {
  var filled = _ref.filled;
  return /*#__PURE__*/React.createElement("svg", {
    fill: filled ? "currentColor" : "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
  }));
};
var ChatIcon = function ChatIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
  }));
};
var FlameIcon = function FlameIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    width: "13",
    height: "13",
    fill: "currentColor",
    viewBox: "0 0 24 24"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M12 23a7.5 7.5 0 0 1-5.138-12.963C8.204 8.774 11.5 6.5 11 1.5c6 4 9 8 3 14 1 0 2.5 0 5-2.47.27.773.5 1.604.5 2.47A7.5 7.5 0 0 1 12 23z"
  }));
};
var BackIcon = function BackIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M15 19l-7-7 7-7"
  }));
};
var ChevronRightIcon = function ChevronRightIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    width: "16",
    height: "16",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M9 5l7 7-7 7"
  }));
};
var ImageIcon = function ImageIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 1.5,
    d: "M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
  }));
};
var VideoIcon = function VideoIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 1.5,
    d: "M15 10l4.553-2.069A1 1 0 0121 8.868v6.264a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
  }));
};
var LockIcon = function LockIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    width: "14",
    height: "14",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
  }));
};
var ShareIcon = function ShareIcon() {
  return /*#__PURE__*/React.createElement("svg", {
    width: "15",
    height: "15",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"
  }));
};

/* ══════════════════════════════════════════════════
   ★ CLOUDINARY Settings — Please fill in your own info ★
   Steps:
   1. Go to https://cloudinary.com and register for free
   2. Enter Settings → Upload → Add upload preset
      • Set Signing mode to "Unsigned"
      • Note Preset name
   3. Go back to Dashboard and note your Cloud name
   4. Fill in the two values below — completely free!
   ══════════════════════════════════════════════════ */
var CLOUDINARY_CLOUD_NAME = 'di21uvipg';
var CLOUDINARY_UPLOAD_PRESET = 'mxt3i95r';
var isCloudinaryConfigured = CLOUDINARY_CLOUD_NAME !== 'YOUR_CLOUD_NAME' && CLOUDINARY_UPLOAD_PRESET !== 'YOUR_UPLOAD_PRESET';

/* ══════════════════════════════════════════════════
   ★ Upload Quota Settings — 調整這裡的限制數值 ★
   ══════════════════════════════════════════════════ */
var UPLOAD_LIMITS = {
  IMAGE_MAX_MB: 2,
  // 單張圖片上傳上限 (MB)
  VIDEO_MAX_MB: 20,
  // 單個影片上傳上限 (MB)
  DAILY_IMAGE_COUNT: 5,
  // 每日最多上傳圖片數
  DAILY_VIDEO_COUNT: 2,
  // 每日最多上傳影片數
  MONTHLY_TOTAL_MB: 500,
  // 每月總流量上限 (MB)，Cloudinary 免費版約 25GB，保守設定
  IMAGE_COMPRESS_MAX_PX: 1280,
  // 圖片壓縮後最大邊長 (px)
  IMAGE_COMPRESS_QUALITY: 0.80 // 圖片壓縮品質 (0-1)
};

/* ── 圖片壓縮 ── */
function compressImage(_x) {
  return _compressImage.apply(this, arguments);
}
function _compressImage() {
  _compressImage = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee13(file) {
    return _regenerator().w(function (_context15) {
      while (1) switch (_context15.n) {
        case 0:
          return _context15.a(2, new Promise(function (resolve) {
            var img = new Image();
            var url = URL.createObjectURL(file);
            img.onload = function () {
              URL.revokeObjectURL(url);
              var maxPx = UPLOAD_LIMITS.IMAGE_COMPRESS_MAX_PX;
              var width = img.width,
                height = img.height;
              if (width > maxPx || height > maxPx) {
                if (width > height) {
                  height = Math.round(height * maxPx / width);
                  width = maxPx;
                } else {
                  width = Math.round(width * maxPx / height);
                  height = maxPx;
                }
              }
              var canvas = document.createElement('canvas');
              canvas.width = width;
              canvas.height = height;
              canvas.getContext('2d').drawImage(img, 0, 0, width, height);
              canvas.toBlob(function (blob) {
                // 若壓縮後比原始大，保留原始
                if (blob.size >= file.size) {
                  resolve(file);
                  return;
                }
                resolve(new File([blob], file.name, {
                  type: 'image/jpeg'
                }));
              }, 'image/jpeg', UPLOAD_LIMITS.IMAGE_COMPRESS_QUALITY);
            };
            img.onerror = function () {
              URL.revokeObjectURL(url);
              resolve(file);
            };
            img.src = url;
          }));
      }
    }, _callee13);
  }));
  return _compressImage.apply(this, arguments);
}
function getTodayKey() {
  return toISODay();
} // uses local date, not UTC
function getMonthKey() {
  var d = new Date();
  return "".concat(d.getFullYear(), "-").concat(String(d.getMonth() + 1).padStart(2, '0'));
} // local month

/* ── 取得目前 user uid ── */
function getCurrentUid() {
  try {
    var _auth;
    return ((_auth = auth) === null || _auth === void 0 || (_auth = _auth.currentUser) === null || _auth === void 0 ? void 0 : _auth.uid) || null;
  } catch (e) {
    return null;
  }
}

/* ── 從 Firestore 讀取配額文件 ── */
function fetchQuotaDoc(_x2) {
  return _fetchQuotaDoc.apply(this, arguments);
}
/* ── 檢查配額（上傳前，從 Firestore 讀） ── */
function _fetchQuotaDoc() {
  _fetchQuotaDoc = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee14(uid) {
    var snap, _t19;
    return _regenerator().w(function (_context16) {
      while (1) switch (_context16.p = _context16.n) {
        case 0:
          if (!(!uid || !db)) {
            _context16.n = 1;
            break;
          }
          return _context16.a(2, null);
        case 1:
          _context16.p = 1;
          _context16.n = 2;
          return db.collection('upload_quotas').doc(uid).get();
        case 2:
          snap = _context16.v;
          return _context16.a(2, snap.exists ? snap.data() : null);
        case 3:
          _context16.p = 3;
          _t19 = _context16.v;
          console.warn('[Quota] 讀取失敗:', _t19);
          return _context16.a(2, null);
      }
    }, _callee14, null, [[1, 3]]);
  }));
  return _fetchQuotaDoc.apply(this, arguments);
}
function checkQuotaFS(_x3, _x4, _x5) {
  return _checkQuotaFS.apply(this, arguments);
}
/* ── 上傳成功後寫回 Firestore（用 merge 避免覆蓋） ── */
function _checkQuotaFS() {
  _checkQuotaFS = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee15(uid, file, isVideo) {
    var fileMB, maxMB, q, today, month, dailyImages, dailyVideos, monthlyMB;
    return _regenerator().w(function (_context17) {
      while (1) switch (_context17.n) {
        case 0:
          fileMB = file.size / 1024 / 1024;
          maxMB = isVideo ? UPLOAD_LIMITS.VIDEO_MAX_MB : UPLOAD_LIMITS.IMAGE_MAX_MB; // 先檢查單檔大小（不需讀 DB）
          if (!(fileMB > maxMB)) {
            _context17.n = 1;
            break;
          }
          throw new Error("\u6A94\u6848\u592A\u5927\uFF01".concat(isVideo ? '影片' : '圖片', "\u4E0A\u9650 ").concat(maxMB, " MB\uFF0C\u6B64\u6A94\u6848\u7D04 ").concat(fileMB.toFixed(1), " MB"));
        case 1:
          _context17.n = 2;
          return fetchQuotaDoc(uid);
        case 2:
          q = _context17.v;
          today = getTodayKey(), month = getMonthKey(); // 每日計數（若日期不同代表新的一天，計數歸零）
          dailyImages = ((q === null || q === void 0 ? void 0 : q.dailyDate) === today ? q.dailyImages : 0) || 0;
          dailyVideos = ((q === null || q === void 0 ? void 0 : q.dailyDate) === today ? q.dailyVideos : 0) || 0; // 每月流量（若月份不同代表新月份，歸零）
          monthlyMB = ((q === null || q === void 0 ? void 0 : q.monthlyMonth) === month ? q.monthlyMB : 0) || 0;
          if (!(!isVideo && dailyImages >= UPLOAD_LIMITS.DAILY_IMAGE_COUNT)) {
            _context17.n = 3;
            break;
          }
          throw new Error("\u4ECA\u65E5\u5716\u7247\u4E0A\u50B3\u5DF2\u9054\u4E0A\u9650 ".concat(UPLOAD_LIMITS.DAILY_IMAGE_COUNT, " \u5F35\uFF0C\u660E\u5929\u518D\u8A66\uFF01"));
        case 3:
          if (!(isVideo && dailyVideos >= UPLOAD_LIMITS.DAILY_VIDEO_COUNT)) {
            _context17.n = 4;
            break;
          }
          throw new Error("\u4ECA\u65E5\u5F71\u7247\u4E0A\u50B3\u5DF2\u9054\u4E0A\u9650 ".concat(UPLOAD_LIMITS.DAILY_VIDEO_COUNT, " \u652F\uFF0C\u660E\u5929\u518D\u8A66\uFF01"));
        case 4:
          if (!(monthlyMB + fileMB > UPLOAD_LIMITS.MONTHLY_TOTAL_MB)) {
            _context17.n = 5;
            break;
          }
          throw new Error("\u672C\u6708\u4E0A\u50B3\u6D41\u91CF\u5DF2\u9054\u4E0A\u9650 ".concat(UPLOAD_LIMITS.MONTHLY_TOTAL_MB, " MB\uFF0C\u4E0B\u6708\u91CD\u7F6E\uFF01"));
        case 5:
          return _context17.a(2, {
            dailyImages: dailyImages,
            dailyVideos: dailyVideos,
            monthlyMB: monthlyMB
          });
      }
    }, _callee15);
  }));
  return _checkQuotaFS.apply(this, arguments);
}
function recordUploadFS(_x6, _x7, _x8, _x9, _x0) {
  return _recordUploadFS.apply(this, arguments);
}
/* ── 主上傳函數（含限制 + 壓縮 + Firestore quota） ── */
function _recordUploadFS() {
  _recordUploadFS = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee16(uid, fileMB, isVideo, userName, userEmail) {
    var today, month, q, dailyImages, dailyVideos, monthlyMB, totalImages, totalVideos, totalMB, newDoc, _t20;
    return _regenerator().w(function (_context18) {
      while (1) switch (_context18.p = _context18.n) {
        case 0:
          if (!(!uid || !db)) {
            _context18.n = 1;
            break;
          }
          return _context18.a(2);
        case 1:
          today = getTodayKey(), month = getMonthKey();
          _context18.p = 2;
          _context18.n = 3;
          return fetchQuotaDoc(uid);
        case 3:
          q = _context18.v;
          dailyImages = ((q === null || q === void 0 ? void 0 : q.dailyDate) === today ? q.dailyImages : 0) || 0;
          dailyVideos = ((q === null || q === void 0 ? void 0 : q.dailyDate) === today ? q.dailyVideos : 0) || 0;
          monthlyMB = ((q === null || q === void 0 ? void 0 : q.monthlyMonth) === month ? q.monthlyMB : 0) || 0;
          totalImages = (q === null || q === void 0 ? void 0 : q.totalImages) || 0;
          totalVideos = (q === null || q === void 0 ? void 0 : q.totalVideos) || 0;
          totalMB = (q === null || q === void 0 ? void 0 : q.totalMB) || 0;
          newDoc = {
            uid: uid,
            displayName: userName || (q === null || q === void 0 ? void 0 : q.displayName) || '',
            email: userEmail || (q === null || q === void 0 ? void 0 : q.email) || '',
            // 每日
            dailyDate: today,
            dailyImages: isVideo ? dailyImages : dailyImages + 1,
            dailyVideos: isVideo ? dailyVideos + 1 : dailyVideos,
            // 每月
            monthlyMonth: month,
            monthlyMB: +(monthlyMB + fileMB).toFixed(3),
            // 累計總量
            totalImages: isVideo ? totalImages : totalImages + 1,
            totalVideos: isVideo ? totalVideos + 1 : totalVideos,
            totalMB: +(totalMB + fileMB).toFixed(3),
            lastUploadAt: firebase.firestore.FieldValue.serverTimestamp()
          };
          _context18.n = 4;
          return db.collection('upload_quotas').doc(uid).set(newDoc, {
            merge: true
          });
        case 4:
          console.log("[Quota] \u2705 \u5DF2\u5BEB\u5165 Firestore | \u4ECA\u65E5\u5716:".concat(newDoc.dailyImages, "/").concat(UPLOAD_LIMITS.DAILY_IMAGE_COUNT, " \u5F71:").concat(newDoc.dailyVideos, "/").concat(UPLOAD_LIMITS.DAILY_VIDEO_COUNT, " | \u672C\u6708:").concat(newDoc.monthlyMB, "MB"));
          _context18.n = 6;
          break;
        case 5:
          _context18.p = 5;
          _t20 = _context18.v;
          console.warn('[Quota] 寫入失敗:', _t20);
        case 6:
          return _context18.a(2);
      }
    }, _callee16, null, [[2, 5]]);
  }));
  return _recordUploadFS.apply(this, arguments);
}
function uploadToCloudinary(_x1) {
  return _uploadToCloudinary.apply(this, arguments);
}
/* ── MOCK DATA ── */
function _uploadToCloudinary() {
  _uploadToCloudinary = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee18(file) {
    var _auth2;
    var resourceType,
      onProgress,
      isVideo,
      uid,
      currentUser,
      uploadFile,
      finalMB,
      url,
      formData,
      _args20 = arguments;
    return _regenerator().w(function (_context20) {
      while (1) switch (_context20.n) {
        case 0:
          resourceType = _args20.length > 1 && _args20[1] !== undefined ? _args20[1] : 'auto';
          onProgress = _args20.length > 2 ? _args20[2] : undefined;
          if (isCloudinaryConfigured) {
            _context20.n = 1;
            break;
          }
          return _context20.a(2, {
            url: URL.createObjectURL(file),
            publicId: null,
            local: true
          });
        case 1:
          isVideo = file.type.startsWith('video/') || resourceType === 'video';
          uid = getCurrentUid();
          currentUser = (_auth2 = auth) === null || _auth2 === void 0 ? void 0 : _auth2.currentUser; // ① 檢查配額（Firestore，跨裝置真實數字）
          _context20.n = 2;
          return checkQuotaFS(uid, file, isVideo);
        case 2:
          // ② 壓縮圖片
          uploadFile = file;
          if (!(!isVideo && file.type.startsWith('image/'))) {
            _context20.n = 4;
            break;
          }
          _context20.n = 3;
          return compressImage(file);
        case 3:
          uploadFile = _context20.v;
          console.log("[Upload] \u5716\u7247\u58D3\u7E2E: ".concat((file.size / 1024 / 1024).toFixed(2), "MB \u2192 ").concat((uploadFile.size / 1024 / 1024).toFixed(2), "MB"));
        case 4:
          finalMB = +(uploadFile.size / 1024 / 1024).toFixed(3);
          url = "https://api.cloudinary.com/v1_1/".concat(CLOUDINARY_CLOUD_NAME, "/").concat(resourceType, "/upload");
          formData = new FormData();
          formData.append('file', uploadFile);
          formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
          return _context20.a(2, new Promise(function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.open('POST', url);
            xhr.upload.onprogress = function (e) {
              if (e.lengthComputable && onProgress) onProgress(Math.round(e.loaded / e.total * 100));
            };
            xhr.onload = /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee17() {
              var data, _data$error, _t21;
              return _regenerator().w(function (_context19) {
                while (1) switch (_context19.p = _context19.n) {
                  case 0:
                    _context19.p = 0;
                    data = JSON.parse(xhr.responseText);
                    if (!data.secure_url) {
                      _context19.n = 2;
                      break;
                    }
                    _context19.n = 1;
                    return recordUploadFS(uid, finalMB, isVideo, (currentUser === null || currentUser === void 0 ? void 0 : currentUser.displayName) || (currentUser === null || currentUser === void 0 ? void 0 : currentUser.email) || '', (currentUser === null || currentUser === void 0 ? void 0 : currentUser.email) || '');
                  case 1:
                    resolve({
                      url: data.secure_url,
                      publicId: data.public_id
                    });
                    _context19.n = 3;
                    break;
                  case 2:
                    reject(new Error(((_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.message) || 'Upload failed'));
                  case 3:
                    _context19.n = 5;
                    break;
                  case 4:
                    _context19.p = 4;
                    _t21 = _context19.v;
                    reject(_t21);
                  case 5:
                    return _context19.a(2);
                }
              }, _callee17, null, [[0, 4]]);
            }));
            xhr.onerror = function () {
              return reject(new Error('Network error'));
            };
            xhr.send(formData);
          }));
      }
    }, _callee18);
  }));
  return _uploadToCloudinary.apply(this, arguments);
}
var mockGroups = [{
  id: 1,
  name: '30-Day Early Rise Challenge',
  members: 24,
  active: 18,
  progress: 75,
  category: 'Sleep',
  joined: false
}, {
  id: 2,
  name: 'Daily Workout Check-in',
  members: 156,
  active: 132,
  progress: 85,
  category: 'Fitness',
  joined: true
}, {
  id: 3,
  name: 'Skincare Routine Diary',
  members: 89,
  active: 67,
  progress: 60,
  category: 'Skincare',
  joined: false
}, {
  id: 4,
  name: 'Mindful Eating Plan',
  members: 43,
  active: 31,
  progress: 55,
  category: 'Nutrition',
  joined: false
}];
var mockGroupMembers = [{
  id: 'm1',
  name: 'Alex Chen',
  handle: '@alexc',
  avatar: 'A',
  progress: 92,
  streak: 14,
  habits: 8,
  followers: 34,
  following: 21,
  isPublic: true,
  isFollowing: false,
  posts: [{
    id: 'p1',
    text: 'Day 14 of waking up early! My morning routine has completely transformed my mornings — I feel amazing.',
    time: '2 hr ago',
    habit: 'Early Rising',
    likes: 24,
    comments: 5,
    hasImage: true,
    liked: false
  }, {
    id: 'p2',
    text: 'Morning meditation + cold shower = all-day energy. Try it for 7 days straight — you will thank yourself.',
    time: 'Yesterday',
    habit: 'Mindfulness',
    likes: 18,
    comments: 3,
    hasImage: false,
    liked: false
  }]
}, {
  id: 'm2',
  name: 'Jordan Lee',
  handle: '@jordanl',
  avatar: 'J',
  progress: 78,
  streak: 9,
  habits: 5,
  followers: 12,
  following: 8,
  isPublic: false,
  isFollowing: true,
  followApproved: true,
  posts: [{
    id: 'p3',
    text: 'Day 9 waking up before sunrise. Still hard, but absolutely worth it.',
    time: '3 hr ago',
    habit: 'Early Rising',
    likes: 11,
    comments: 2,
    hasImage: false,
    liked: false
  }]
}, {
  id: 'm3',
  name: 'Sam Wang',
  handle: '@samr',
  avatar: 'S',
  progress: 65,
  streak: 7,
  habits: 6,
  followers: 8,
  following: 15,
  isPublic: false,
  isFollowing: false,
  followApproved: false,
  posts: []
}, {
  id: 'm4',
  name: 'Morgan Wu',
  handle: '@morganw',
  avatar: 'M',
  progress: 88,
  streak: 21,
  habits: 9,
  followers: 67,
  following: 44,
  isPublic: true,
  isFollowing: false,
  posts: [{
    id: 'p4',
    text: '21-day streak! Consistency is the key. Here is my morning routine:',
    time: '1 day ago',
    habit: 'Early Rising',
    likes: 45,
    comments: 12,
    hasImage: true,
    liked: false
  }, {
    id: 'p5',
    text: 'All my meals prepped for the week. Eating clean has never been this easy.',
    time: '2 days ago',
    habit: 'Nutrition',
    likes: 32,
    comments: 7,
    hasImage: true,
    liked: false
  }]
}, {
  id: 'm5',
  name: 'Riley Park',
  handle: '@rileyp',
  avatar: 'R',
  progress: 41,
  streak: 3,
  habits: 4,
  followers: 5,
  following: 9,
  isPublic: false,
  isFollowing: false,
  followApproved: false,
  posts: []
}, {
  id: 'm6',
  name: 'Drew Kim',
  handle: '@drewk',
  avatar: 'D',
  progress: 95,
  streak: 30,
  habits: 12,
  followers: 120,
  following: 60,
  isPublic: true,
  isFollowing: true,
  followApproved: true,
  posts: [{
    id: 'p6',
    text: '30 days — that is how you build a truly lasting habit. Here is what I learned this month.',
    time: '5 hr ago',
    habit: 'All Habits',
    likes: 89,
    comments: 23,
    hasImage: false,
    liked: false
  }]
}];
var mockFeedGlobal = [{
  id: 'f1',
  user: 'Drew Kim',
  avatar: 'D',
  time: '5 hr ago',
  habit: 'All Habits',
  text: '30 days — that is how you build a truly lasting habit. Here is what I learned this month.',
  likes: 89,
  comments: 23,
  hasImage: false,
  liked: false
}, {
  id: 'f2',
  user: 'Morgan Wu',
  avatar: 'M',
  time: '1 day ago',
  habit: 'Early Rising',
  text: '21-day streak! Consistency is the key. Here is my morning routine:',
  likes: 45,
  comments: 12,
  hasImage: true,
  liked: false
}, {
  id: 'f3',
  user: 'Alex Chen',
  avatar: 'A',
  time: '2 hr ago',
  habit: 'Early Rising',
  text: 'Day 14 of waking up early! My morning routine has completely transformed my mornings — I feel amazing.',
  likes: 24,
  comments: 5,
  hasImage: true,
  liked: false
}, {
  id: 'f4',
  user: 'Morgan Wu',
  avatar: 'M',
  time: '2 days ago',
  habit: 'Nutrition',
  text: 'All my meals prepped for the week. Eating clean has never been this easy.',
  likes: 32,
  comments: 7,
  hasImage: true,
  liked: false
}, {
  id: 'f5',
  user: 'Jordan Lee',
  avatar: 'J',
  time: '3 hr ago',
  habit: 'Early Rising',
  text: 'Day 9 waking up before sunrise. Still hard, but absolutely worth it.',
  likes: 11,
  comments: 2,
  hasImage: false,
  liked: false
}];

/* ── AUTH PAGE ── */
function AuthPage(_ref2) {
  var onAuthSuccess = _ref2.onAuthSuccess;
  var _useState = useState(true),
    _useState2 = _slicedToArray(_useState, 2),
    isLogin = _useState2[0],
    setIsLogin = _useState2[1];
  var _useState3 = useState(''),
    _useState4 = _slicedToArray(_useState3, 2),
    email = _useState4[0],
    setEmail = _useState4[1];
  var _useState5 = useState(''),
    _useState6 = _slicedToArray(_useState5, 2),
    password = _useState6[0],
    setPassword = _useState6[1];
  var _useState7 = useState(''),
    _useState8 = _slicedToArray(_useState7, 2),
    displayName = _useState8[0],
    setDisplayName = _useState8[1];
  var _useState9 = useState(''),
    _useState0 = _slicedToArray(_useState9, 2),
    error = _useState0[0],
    setError = _useState0[1];
  var _useState1 = useState(false),
    _useState10 = _slicedToArray(_useState1, 2),
    loading = _useState10[0],
    setLoading = _useState10[1];
  // "Verification email sent" screen
  var _useState11 = useState(false),
    _useState12 = _slicedToArray(_useState11, 2),
    verificationSent = _useState12[0],
    setVerificationSent = _useState12[1];
  var _useState13 = useState(''),
    _useState14 = _slicedToArray(_useState13, 2),
    sentEmail = _useState14[0],
    setSentEmail = _useState14[1];
  var _useState15 = useState(0),
    _useState16 = _slicedToArray(_useState15, 2),
    resendCooldown = _useState16[0],
    setResendCooldown = _useState16[1];
  var handleDemoLogin = function handleDemoLogin() {
    var u = {
      uid: 'demo-user',
      email: 'demo@example.com',
      displayName: 'You'
    };
    localStorage.setItem('demoUser', JSON.stringify(u));
    onAuthSuccess(u);
  };

  /* Password strength validation */
  var validateForm = function validateForm() {
    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!email.trim()) return 'Please enter your email address';
    if (!emailRegex.test(email.trim())) return 'Please enter a valid email address (e.g., user@example.com)';
    if (!password) return 'Please enter a password';
    if (password.length < 8) return 'Password must be at least 8 characters';
    if (!/[A-Z]/.test(password)) return 'Password must contain at least one uppercase letter (A-Z)';
    if (!/[a-z]/.test(password)) return 'Password must contain at least one lowercase letter (a-z)';
    if (!/[0-9]/.test(password)) return 'Password must contain at least one number (0-9)';
    if (!isLogin) {
      if (!displayName.trim()) return 'Please enter your name';
      if (displayName.trim().length < 2) return 'Name must be at least 2 characters';
    }
    return null;
  };

  /* Firebase error code → message */
  var firebaseErrMsg = function firebaseErrMsg(code) {
    return {
      'auth/email-already-in-use': 'This email is already registered. Please sign in instead. (If you previously deleted your account but this error persists, the account may still exist in Firebase — please contact the administrator.)',
      'auth/invalid-email': 'Invalid email format',
      'auth/weak-password': 'Password is too weak. Please use a stronger password',
      'auth/user-not-found': 'Account not found. Please check your email address',
      'auth/wrong-password': 'Incorrect password. Please try again',
      'auth/too-many-requests': 'Too many attempts. Please try again later',
      'auth/network-request-failed': 'Network error. Please check your connection and try again',
      'auth/user-disabled': 'This account has been disabled. Please contact support'
    }[code] || null;
  };

  /* Countdown timer (resend cooldown) */
  var startCooldown = function startCooldown() {
    setResendCooldown(60);
    var t = setInterval(function () {
      setResendCooldown(function (prev) {
        if (prev <= 1) {
          clearInterval(t);
          return 0;
        }
        return prev - 1;
      });
    }, 1000);
  };

  /* Resend verification email */
  var handleResend = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
      var r, actionCodeSettings, _t;
      return _regenerator().w(function (_context) {
        while (1) switch (_context.p = _context.n) {
          case 0:
            if (!(resendCooldown > 0)) {
              _context.n = 1;
              break;
            }
            return _context.a(2);
          case 1:
            _context.p = 1;
            _context.n = 2;
            return auth.signInWithEmailAndPassword(email, password);
          case 2:
            r = _context.v;
            if (r.user.emailVerified) {
              _context.n = 4;
              break;
            }
            actionCodeSettings = {
              url: window.location.origin + window.location.pathname,
              handleCodeInApp: false
            };
            _context.n = 3;
            return r.user.sendEmailVerification(actionCodeSettings);
          case 3:
            startCooldown();
            setError('');
          case 4:
            _context.n = 5;
            return auth.signOut();
          case 5:
            _context.n = 7;
            break;
          case 6:
            _context.p = 6;
            _t = _context.v;
            setError(firebaseErrMsg(_t.code) || _t.message);
          case 7:
            return _context.a(2);
        }
      }, _callee, null, [[1, 6]]);
    }));
    return function handleResend() {
      return _ref3.apply(this, arguments);
    };
  }();
  var handleSubmit = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(e) {
      var validErr, r, _r, actionCodeSettings, _t2;
      return _regenerator().w(function (_context2) {
        while (1) switch (_context2.p = _context2.n) {
          case 0:
            e.preventDefault();
            setError('');
            validErr = validateForm();
            if (!validErr) {
              _context2.n = 1;
              break;
            }
            setError(validErr);
            return _context2.a(2);
          case 1:
            setLoading(true);
            if (isFirebaseConfigured) {
              _context2.n = 2;
              break;
            }
            handleDemoLogin();
            return _context2.a(2);
          case 2:
            _context2.p = 2;
            if (!isLogin) {
              _context2.n = 7;
              break;
            }
            _context2.n = 3;
            return auth.signInWithEmailAndPassword(email, password);
          case 3:
            r = _context2.v;
            if (r.user.emailVerified) {
              _context2.n = 5;
              break;
            }
            _context2.n = 4;
            return auth.signOut();
          case 4:
            setSentEmail(email);
            setVerificationSent(true);
            startCooldown();
            return _context2.a(2);
          case 5:
            _context2.n = 6;
            return db.collection('users').doc(r.user.uid).set({
              displayName: r.user.displayName || displayName || '',
              email: r.user.email || '',
              createdAt: firebase.firestore.FieldValue.serverTimestamp()
            }, {
              merge: true
            });
          case 6:
            onAuthSuccess(r.user);
            _context2.n = 12;
            break;
          case 7:
            _context2.n = 8;
            return auth.createUserWithEmailAndPassword(email, password);
          case 8:
            _r = _context2.v;
            _context2.n = 9;
            return _r.user.updateProfile({
              displayName: displayName
            });
          case 9:
            // ✅ 只寄驗證信，不寫入 Firestore（等登入且驗證通過後才寫）
            // actionCodeSettings 提升信件送達率，並設定驗證後回跳網址
            actionCodeSettings = {
              url: window.location.origin + window.location.pathname,
              handleCodeInApp: false
            };
            _context2.n = 10;
            return _r.user.sendEmailVerification(actionCodeSettings);
          case 10:
            _context2.n = 11;
            return auth.signOut();
          case 11:
            setSentEmail(email);
            setVerificationSent(true);
            startCooldown();
          case 12:
            _context2.n = 14;
            break;
          case 13:
            _context2.p = 13;
            _t2 = _context2.v;
            setError(firebaseErrMsg(_t2.code) || _t2.message);
          case 14:
            _context2.p = 14;
            setLoading(false);
            return _context2.f(14);
          case 15:
            return _context2.a(2);
        }
      }, _callee2, null, [[2, 13, 14, 15]]);
    }));
    return function handleSubmit(_x10) {
      return _ref4.apply(this, arguments);
    };
  }();

  /* ── Verification email sent screen ── */
  if (verificationSent) {
    return /*#__PURE__*/React.createElement("div", {
      className: "auth-page"
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        width: 64,
        height: 64,
        background: 'var(--black)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        margin: '0 auto 20px',
        fontSize: 28
      }
    }, "\u2709\uFE0F"), /*#__PURE__*/React.createElement("div", {
      className: "auth-logo",
      style: {
        textAlign: 'center',
        marginBottom: 8
      }
    }, "Verification Email Sent"), /*#__PURE__*/React.createElement("div", {
      style: {
        fontSize: 13,
        color: 'var(--gray-500)',
        textAlign: 'center',
        marginBottom: 16,
        lineHeight: 1.7,
        maxWidth: 320
      }
    }, "We've sent a verification email to", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", {
      style: {
        color: 'var(--black)'
      }
    }, sentEmail)), /*#__PURE__*/React.createElement("div", {
      style: {
        width: '100%',
        maxWidth: 360,
        marginBottom: 20,
        padding: '14px 16px',
        background: '#FFF8E1',
        border: '1px solid #FFD54F',
        borderRadius: 0,
        fontSize: 12,
        color: '#5D4037',
        lineHeight: 1.9,
        textAlign: 'left'
      }
    }, /*#__PURE__*/React.createElement("strong", {
      style: {
        color: '#E65100',
        fontSize: 13
      }
    }, "\u26A0\uFE0F \u8ACB\u5148\u53BB\u5783\u573E\u4FE1\u5323\u627E\uFF01"), /*#__PURE__*/React.createElement("br", null), "\u9A57\u8B49\u4FE1\u5F88\u53EF\u80FD\u5728 ", /*#__PURE__*/React.createElement("strong", null, "\u5783\u573E\u90F5\u4EF6 / Spam"), " \u8CC7\u6599\u593E\u3002", /*#__PURE__*/React.createElement("br", null), "\u627E\u5230\u5F8C\u8ACB\u9EDE ", /*#__PURE__*/React.createElement("strong", null, "\u300CReport not spam\u300D"), " \u518D\u9EDE\u64CA\u9A57\u8B49\u9023\u7D50\u3002"), error && /*#__PURE__*/React.createElement("div", {
      className: "error-message",
      style: {
        maxWidth: 360,
        width: '100%',
        marginBottom: 16
      }
    }, error), /*#__PURE__*/React.createElement("div", {
      style: {
        width: '100%',
        maxWidth: 360
      }
    }, /*#__PURE__*/React.createElement("button", {
      className: "button button-primary",
      onClick: function onClick() {
        setVerificationSent(false);
        setIsLogin(true);
        setPassword('');
      }
    }, "Verified \u2014 Sign In Now"), /*#__PURE__*/React.createElement("button", {
      className: "button button-secondary",
      onClick: handleResend,
      disabled: resendCooldown > 0,
      style: {
        marginTop: 0
      }
    }, resendCooldown > 0 ? "Resend Email (".concat(resendCooldown, "s)") : 'Resend Verification Email'), /*#__PURE__*/React.createElement("div", {
      style: {
        marginTop: 16,
        padding: '12px 16px',
        background: 'var(--gray-50)',
        border: '1px solid var(--gray-200)',
        fontSize: 11,
        color: 'var(--gray-500)',
        lineHeight: 1.9
      }
    }, /*#__PURE__*/React.createElement("strong", {
      style: {
        color: 'var(--gray-700)'
      }
    }, "\u6C92\u6709\u6536\u5230\u4FE1\uFF1F\u8ACB\u4F9D\u5E8F\u6AA2\u67E5\uFF1A"), /*#__PURE__*/React.createElement("br", null), "\u2460 ", /*#__PURE__*/React.createElement("strong", {
      style: {
        color: 'var(--gray-800)'
      }
    }, "\u5783\u573E\u90F5\u4EF6 / Spam"), " \u8CC7\u6599\u593E\uFF08\u6700\u5E38\u898B\uFF09", /*#__PURE__*/React.createElement("br", null), "\u2461 Gmail \u7684 ", /*#__PURE__*/React.createElement("strong", {
      style: {
        color: 'var(--gray-800)'
      }
    }, "\u4FC3\u92B7 Promotions"), " \u5206\u9801", /*#__PURE__*/React.createElement("br", null), "\u2462 Gmail \u7684 ", /*#__PURE__*/React.createElement("strong", {
      style: {
        color: 'var(--gray-800)'
      }
    }, "\u66F4\u65B0 Updates"), " \u5206\u9801", /*#__PURE__*/React.createElement("br", null), "\u2463 \u78BA\u8A8D email \u5730\u5740\u662F\u5426\u6B63\u78BA", /*#__PURE__*/React.createElement("br", null), "\u2464 \u9A57\u8B49\u9023\u7D50 24 \u5C0F\u6642\u5F8C\u904E\u671F\uFF0C\u8ACB\u76E1\u5FEB\u9EDE\u64CA")));
  }

  /* ── Login / Sign Up screen ── */
  return /*#__PURE__*/React.createElement("div", {
    className: "auth-page"
  }, /*#__PURE__*/React.createElement("div", {
    className: "auth-logo"
  }, "Habit Tracker"), /*#__PURE__*/React.createElement("div", {
    className: "auth-subtitle"
  }, "PROFESSIONAL WELLNESS"), !isFirebaseConfigured && /*#__PURE__*/React.createElement("div", {
    className: "demo-badge"
  }, /*#__PURE__*/React.createElement("strong", null, "Demo Mode:"), "Firebase not configured. Click to use the local demo version."), error && /*#__PURE__*/React.createElement("div", {
    className: "error-message"
  }, error), /*#__PURE__*/React.createElement("form", {
    className: "auth-form",
    onSubmit: handleSubmit
  }, !isLogin && /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", {
    className: "form-label"
  }, "Name"), /*#__PURE__*/React.createElement("input", {
    type: "text",
    className: "form-input",
    value: displayName,
    onChange: function onChange(e) {
      return setDisplayName(e.target.value);
    },
    placeholder: "Your name"
  })), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", {
    className: "form-label"
  }, "Email"), /*#__PURE__*/React.createElement("input", {
    type: "email",
    className: "form-input",
    value: email,
    onChange: function onChange(e) {
      return setEmail(e.target.value);
    },
    placeholder: "your@email.com"
  })), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", {
    className: "form-label"
  }, "Password"), /*#__PURE__*/React.createElement("input", {
    type: "password",
    className: "form-input",
    value: password,
    onChange: function onChange(e) {
      return setPassword(e.target.value);
    },
    placeholder: "\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",
    minLength: "8"
  }), !isLogin && /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      color: 'var(--gray-400)',
      marginTop: 6,
      lineHeight: 1.6
    }
  }, "Password must be at least 8 chars, with uppercase, lowercase, and a number")), /*#__PURE__*/React.createElement("button", {
    type: "submit",
    className: "button button-primary",
    disabled: loading
  }, loading ? 'Processing...' : isLogin ? 'Sign In' : 'Sign Up')), /*#__PURE__*/React.createElement("div", {
    className: "auth-switch"
  }, isLogin ? "Don't have an account?" : "Already have an account?", /*#__PURE__*/React.createElement("a", {
    onClick: function onClick() {
      setIsLogin(!isLogin);
      setError('');
    }
  }, isLogin ? 'Sign Up' : 'Sign In')));
}

/* ── FEED CARD COMPONENT (Firebase real likes + comments) ── */
function FeedCard(_ref5) {
  var post = _ref5.post,
    currentUser = _ref5.currentUser,
    onLike = _ref5.onLike,
    onReport = _ref5.onReport;
  var _useState17 = useState(false),
    _useState18 = _slicedToArray(_useState17, 2),
    showComments = _useState18[0],
    setShowComments = _useState18[1];
  var _useState19 = useState([]),
    _useState20 = _slicedToArray(_useState19, 2),
    comments = _useState20[0],
    setComments = _useState20[1];
  var _useState21 = useState(''),
    _useState22 = _slicedToArray(_useState21, 2),
    commentText = _useState22[0],
    setCommentText = _useState22[1];
  var _useState23 = useState(false),
    _useState24 = _slicedToArray(_useState23, 2),
    sendingComment = _useState24[0],
    setSendingComment = _useState24[1];
  var _useState25 = useState(false),
    _useState26 = _slicedToArray(_useState25, 2),
    loadingComments = _useState26[0],
    setLoadingComments = _useState26[1];

  // Load comments (only when expanded)
  useEffect(function () {
    if (!showComments || !isFirebaseConfigured || !post.id) return;
    setLoadingComments(true);
    var unsub = db.collection('posts').doc(post.id).collection('comments').orderBy('createdAt', 'asc').onSnapshot(function (snap) {
      setComments(snap.docs.map(function (d) {
        return _objectSpread({
          id: d.id
        }, d.data());
      }));
      setLoadingComments(false);
    }, function () {
      return setLoadingComments(false);
    });
    return function () {
      return unsub();
    };
  }, [showComments, post.id]);
  var handleSendComment = /*#__PURE__*/function () {
    var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
      var _ref7, _t3;
      return _regenerator().w(function (_context3) {
        while (1) switch (_context3.p = _context3.n) {
          case 0:
            if (!(!commentText.trim() || !currentUser)) {
              _context3.n = 1;
              break;
            }
            return _context3.a(2);
          case 1:
            setSendingComment(true);
            _context3.p = 2;
            if (!isFirebaseConfigured) {
              _context3.n = 5;
              break;
            }
            _context3.n = 3;
            return db.collection('posts').doc(post.id).collection('comments').add({
              text: commentText.trim(),
              userId: currentUser.uid,
              userName: currentUser.displayName || 'User',
              userAvatar: ((_ref7 = currentUser.displayName || currentUser.email) === null || _ref7 === void 0 || (_ref7 = _ref7[0]) === null || _ref7 === void 0 ? void 0 : _ref7.toUpperCase()) || 'U',
              createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
          case 3:
            _context3.n = 4;
            return db.collection('posts').doc(post.id).update({
              comments: firebase.firestore.FieldValue.increment(1)
            });
          case 4:
            _context3.n = 6;
            break;
          case 5:
            setComments(function (prev) {
              var _ref8;
              return [].concat(_toConsumableArray(prev), [{
                id: Date.now().toString(),
                text: commentText.trim(),
                userName: currentUser.displayName || 'User',
                userAvatar: ((_ref8 = currentUser.displayName || currentUser.email) === null || _ref8 === void 0 || (_ref8 = _ref8[0]) === null || _ref8 === void 0 ? void 0 : _ref8.toUpperCase()) || 'U',
                createdAt: null
              }]);
            });
          case 6:
            setCommentText('');
            _context3.n = 8;
            break;
          case 7:
            _context3.p = 7;
            _t3 = _context3.v;
            if (_t3.code === 'permission-denied' || _t3.message && _t3.message.toLowerCase().includes('permission')) {
              alert('留言失敗：Firestore 安全規則尚未設定留言寫入權限。\n請到 Firebase Console → Firestore → Rules，加入 comments subcollection 的寫入規則。\n\n詳細規則範本請見 README 或聯絡管理員。');
            } else {
              alert('Comment failed: ' + _t3.message);
            }
          case 8:
            _context3.p = 8;
            setSendingComment(false);
            return _context3.f(8);
          case 9:
            return _context3.a(2);
        }
      }, _callee3, null, [[2, 7, 8, 9]]);
    }));
    return function handleSendComment() {
      return _ref6.apply(this, arguments);
    };
  }();
  var likeCount = post.likes + (post.liked ? 0 : 0); // likes already updated by parent

  return /*#__PURE__*/React.createElement("div", {
    className: "feed-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "feed-header"
  }, /*#__PURE__*/React.createElement("div", {
    className: "feed-avatar"
  }, post.avatarUrl ? /*#__PURE__*/React.createElement("img", {
    src: post.avatarUrl,
    style: {
      width: '100%',
      height: '100%',
      objectFit: 'cover'
    },
    alt: ""
  }) : post.avatar), /*#__PURE__*/React.createElement("div", {
    className: "feed-user-info"
  }, /*#__PURE__*/React.createElement("h4", null, post.user), /*#__PURE__*/React.createElement("div", {
    className: "feed-time"
  }, post.time))), /*#__PURE__*/React.createElement("div", {
    className: "feed-content"
  }, post.text && /*#__PURE__*/React.createElement("div", {
    className: "feed-text"
  }, post.text), post.habit && /*#__PURE__*/React.createElement("span", {
    className: "feed-habit-tag"
  }, post.habit), post.hasImage && post.mediaUrl && /*#__PURE__*/React.createElement("div", {
    className: "feed-media"
  }, /*#__PURE__*/React.createElement("img", {
    src: post.mediaUrl,
    alt: "post",
    style: {
      width: '100%',
      maxHeight: 280,
      objectFit: 'cover',
      display: 'block'
    }
  })), post.hasImage && !post.mediaUrl && /*#__PURE__*/React.createElement("div", {
    className: "feed-media"
  }, /*#__PURE__*/React.createElement("div", {
    className: "feed-media-placeholder"
  }, /*#__PURE__*/React.createElement(ImageIcon, null), /*#__PURE__*/React.createElement("span", null, "Photo"))), post.hasVideo && post.mediaUrl && /*#__PURE__*/React.createElement("div", {
    className: "feed-media"
  }, /*#__PURE__*/React.createElement("video", {
    src: post.mediaUrl,
    controls: true,
    playsInline: true,
    preload: "metadata",
    style: {
      width: '100%',
      height: 260,
      objectFit: 'contain',
      display: 'block',
      background: '#000'
    }
  }))), /*#__PURE__*/React.createElement("div", {
    className: "feed-actions"
  }, /*#__PURE__*/React.createElement("div", {
    className: "feed-action".concat(post.liked ? ' liked' : ''),
    onClick: function onClick() {
      return onLike && onLike(post.id);
    }
  }, /*#__PURE__*/React.createElement(HeartIcon, {
    filled: post.liked
  }), /*#__PURE__*/React.createElement("span", null, post.likes)), /*#__PURE__*/React.createElement("div", {
    className: "feed-action",
    onClick: function onClick() {
      return setShowComments(function (s) {
        return !s;
      });
    }
  }, /*#__PURE__*/React.createElement(ChatIcon, null), /*#__PURE__*/React.createElement("span", null, post.comments)), !post.isOwn && currentUser && post.userId !== currentUser.uid && /*#__PURE__*/React.createElement("div", {
    className: "feed-action",
    style: {
      marginLeft: 'auto',
      color: 'var(--gray-300)'
    },
    onClick: function onClick() {
      return onReport && onReport(post.id, post.userId, post.user);
    }
  }, /*#__PURE__*/React.createElement("svg", {
    width: "13",
    height: "13",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H13l-1-1H5a2 2 0 00-2 2zm9-13.5V9"
  })), /*#__PURE__*/React.createElement("span", {
    style: {
      fontSize: 10
    }
  }, "\u6AA2\u8209"))), showComments && /*#__PURE__*/React.createElement("div", {
    className: "comments-section"
  }, loadingComments && /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      color: 'var(--gray-400)',
      padding: '4px 0'
    }
  }, "Loading comments..."), comments.map(function (c) {
    var _c$createdAt;
    return /*#__PURE__*/React.createElement("div", {
      key: c.id,
      className: "comment-item"
    }, /*#__PURE__*/React.createElement("div", {
      className: "comment-avatar"
    }, c.userAvatar), /*#__PURE__*/React.createElement("div", {
      className: "comment-body"
    }, /*#__PURE__*/React.createElement("div", {
      className: "comment-user"
    }, c.userName), /*#__PURE__*/React.createElement("div", {
      className: "comment-text"
    }, c.text), /*#__PURE__*/React.createElement("div", {
      className: "comment-time"
    }, (_c$createdAt = c.createdAt) !== null && _c$createdAt !== void 0 && _c$createdAt.toDate ? c.createdAt.toDate().toLocaleString(undefined, {
      month: 'numeric',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    }) : 'Just now')));
  }), comments.length === 0 && !loadingComments && /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      color: 'var(--gray-400)',
      padding: '4px 0 8px'
    }
  }, "No comments yet. Be the first!"), currentUser && /*#__PURE__*/React.createElement("div", {
    className: "comment-input-row"
  }, /*#__PURE__*/React.createElement("input", {
    className: "comment-input",
    placeholder: "Add a comment...",
    value: commentText,
    onChange: function onChange(e) {
      return setCommentText(e.target.value);
    },
    onKeyDown: function onKeyDown(e) {
      return e.key === 'Enter' && !e.shiftKey && handleSendComment();
    },
    maxLength: 200
  }), /*#__PURE__*/React.createElement("button", {
    className: "comment-send",
    onClick: handleSendComment,
    disabled: !commentText.trim() || sendingComment
  }, sendingComment ? '…' : 'Send'))));
}

/* ── MEMBER PROFILE VIEW ── */
function MemberProfileView(_ref9) {
  var initialMember = _ref9.member,
    currentUser = _ref9.currentUser,
    onBack = _ref9.onBack;
  var _useState27 = useState(initialMember),
    _useState28 = _slicedToArray(_useState27, 2),
    member = _useState28[0],
    setMember = _useState28[1];
  var _useState29 = useState(initialMember.posts || []),
    _useState30 = _slicedToArray(_useState29, 2),
    posts = _useState30[0],
    setPosts = _useState30[1];
  var canSeePosts = member.isPublic || member.isFollowing && member.followApproved;
  var handleFollow = function handleFollow() {
    setMember(function (prev) {
      return _objectSpread(_objectSpread({}, prev), {}, {
        isFollowing: !prev.isFollowing,
        followApproved: prev.isPublic ? !prev.isFollowing : prev.isFollowing ? false : false
      });
    });
  };
  var handleLike = function handleLike(postId) {
    setPosts(function (prev) {
      return prev.map(function (p) {
        return p.id === postId ? _objectSpread(_objectSpread({}, p), {}, {
          liked: !p.liked
        }) : p;
      });
    });
  };
  var completionPct = member.progress;
  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
    className: "back-nav",
    onClick: onBack
  }, /*#__PURE__*/React.createElement(BackIcon, null), "Back to Members"), /*#__PURE__*/React.createElement("div", {
    className: "member-profile-header"
  }, /*#__PURE__*/React.createElement("div", {
    className: "member-profile-avatar"
  }, member.avatar), /*#__PURE__*/React.createElement("div", {
    className: "member-profile-name"
  }, member.name), /*#__PURE__*/React.createElement("div", {
    className: "member-profile-handle"
  }, member.handle), /*#__PURE__*/React.createElement("div", {
    className: "member-profile-actions"
  }, /*#__PURE__*/React.createElement("button", {
    className: "follow-btn".concat(member.isFollowing ? ' following' : ''),
    onClick: handleFollow
  }, member.isFollowing ? '✓ Following' : 'Follow'), /*#__PURE__*/React.createElement("button", {
    className: "msg-btn"
  }, "Message")), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-row"
  }, /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-cell"
  }, /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-num"
  }, member.habits), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-lbl"
  }, "Habit")), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-cell"
  }, /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-num"
  }, member.streak), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-lbl"
  }, "Day Streak")), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-cell"
  }, /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-num"
  }, member.followers), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-lbl"
  }, "Followers")), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-cell"
  }, /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-num"
  }, member.following), /*#__PURE__*/React.createElement("div", {
    className: "profile-stat-lbl"
  }, "Follow")))), /*#__PURE__*/React.createElement("div", {
    className: "section-title"
  }, "Activity Completion"), /*#__PURE__*/React.createElement("div", {
    style: {
      marginBottom: 24
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      justifyContent: 'space-between',
      fontSize: 11,
      fontWeight: 700,
      textTransform: 'uppercase',
      letterSpacing: .5,
      color: 'var(--gray-500)',
      marginBottom: 6
    }
  }, /*#__PURE__*/React.createElement("span", null, "Completion Rate"), /*#__PURE__*/React.createElement("span", {
    style: {
      fontFamily: 'var(--din)'
    }
  }, completionPct, "%")), /*#__PURE__*/React.createElement("div", {
    style: {
      height: 8,
      background: 'var(--gray-100)',
      borderRadius: 0
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      height: '100%',
      background: 'var(--black)',
      width: "".concat(completionPct, "%"),
      transition: 'width .5s'
    }
  }))), /*#__PURE__*/React.createElement("div", {
    className: "section-title"
  }, "Post"), !canSeePosts ? /*#__PURE__*/React.createElement("div", {
    className: "privacy-notice"
  }, /*#__PURE__*/React.createElement(LockIcon, null), member.isFollowing && !member.followApproved ? /*#__PURE__*/React.createElement("span", {
    style: {
      display: 'block',
      marginTop: 6
    }
  }, "Follow request pending \xB7 Posts visible once approved") : /*#__PURE__*/React.createElement("span", {
    style: {
      display: 'block',
      marginTop: 6
    }
  }, "This account is private \xB7 Follow to view posts once approved")) : posts.length === 0 ? /*#__PURE__*/React.createElement("div", {
    className: "empty-state"
  }, /*#__PURE__*/React.createElement(ImageIcon, null), /*#__PURE__*/React.createElement("h3", null, "No posts yet"), /*#__PURE__*/React.createElement("p", null, "This user has not shared any content yet")) : /*#__PURE__*/React.createElement("div", {
    className: "posts-grid"
  }, posts.map(function (p) {
    return /*#__PURE__*/React.createElement(FeedCard, {
      key: p.id,
      post: _objectSpread(_objectSpread({}, p), {}, {
        user: member.name,
        avatar: member.avatar
      }),
      currentUser: currentUser,
      onLike: handleLike
    });
  })));
}

/* ── GROUP DETAIL VIEW ── */
function GroupDetailView(_ref0) {
  var group = _ref0.group,
    currentUser = _ref0.currentUser,
    onBack = _ref0.onBack;
  var _useState31 = useState(mockGroupMembers),
    _useState32 = _slicedToArray(_useState31, 2),
    members = _useState32[0],
    setMembers = _useState32[1];
  var _useState33 = useState(null),
    _useState34 = _slicedToArray(_useState33, 2),
    selectedMember = _useState34[0],
    setSelectedMember = _useState34[1];
  var _useState35 = useState(group.joined),
    _useState36 = _slicedToArray(_useState35, 2),
    joined = _useState36[0],
    setJoined = _useState36[1];
  if (selectedMember) {
    return /*#__PURE__*/React.createElement(MemberProfileView, {
      member: selectedMember,
      currentUser: currentUser,
      onBack: function onBack() {
        return setSelectedMember(null);
      }
    });
  }
  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
    className: "back-nav",
    onClick: onBack
  }, /*#__PURE__*/React.createElement(BackIcon, null), "Back to Groups"), /*#__PURE__*/React.createElement("div", {
    className: "group-detail-header"
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'flex-start',
      marginBottom: 6
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "group-detail-title"
  }, group.name), /*#__PURE__*/React.createElement("span", {
    className: "group-category-tag"
  }, group.category)), /*#__PURE__*/React.createElement("div", {
    className: "group-detail-meta"
  }, /*#__PURE__*/React.createElement("span", null, group.members, "  members"), /*#__PURE__*/React.createElement("span", null, "\u2022"), /*#__PURE__*/React.createElement("span", null, group.active, "  active")), /*#__PURE__*/React.createElement("div", {
    className: "group-detail-progress"
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      justifyContent: 'space-between',
      fontSize: 10,
      fontWeight: 700,
      textTransform: 'uppercase',
      letterSpacing: .5,
      color: 'var(--gray-500)',
      marginBottom: 6
    }
  }, /*#__PURE__*/React.createElement("span", null, "Group Overall Progress"), /*#__PURE__*/React.createElement("span", {
    style: {
      fontFamily: 'var(--din)'
    }
  }, group.progress, "%")), /*#__PURE__*/React.createElement("div", {
    className: "progress-bar",
    style: {
      height: 6
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "progress-fill",
    style: {
      width: "".concat(group.progress, "%")
    }
  }))), /*#__PURE__*/React.createElement("button", {
    className: "join-btn".concat(joined ? ' joined' : ''),
    style: {
      width: '100%',
      marginTop: 14,
      padding: '11px'
    },
    onClick: function onClick() {
      return setJoined(!joined);
    }
  }, joined ? '✓ Joined Challenge' : 'Join Challenge')), /*#__PURE__*/React.createElement("div", {
    className: "member-list-title"
  }, "Members (", members.length, ")"), members.map(function (member) {
    return /*#__PURE__*/React.createElement("div", {
      key: member.id,
      className: "member-row",
      onClick: function onClick() {
        return setSelectedMember(member);
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "member-avatar-lg"
    }, member.avatar), /*#__PURE__*/React.createElement("div", {
      className: "member-info"
    }, /*#__PURE__*/React.createElement("div", {
      className: "member-name"
    }, member.name), /*#__PURE__*/React.createElement("div", {
      className: "member-sub"
    }, member.handle, " \xB7 ", member.streak, "-day streak"), /*#__PURE__*/React.createElement("div", {
      className: "member-prog-wrap"
    }, /*#__PURE__*/React.createElement("div", {
      className: "member-prog-track"
    }, /*#__PURE__*/React.createElement("div", {
      className: "member-prog-fill",
      style: {
        width: "".concat(member.progress, "%")
      }
    })), /*#__PURE__*/React.createElement("div", {
      className: "member-prog-pct"
    }, member.progress, "%"))), /*#__PURE__*/React.createElement("div", {
      className: "member-arrow"
    }, /*#__PURE__*/React.createElement(ChevronRightIcon, null)));
  }));
}

/* ── Date utilities: use YYYY-MM-DD format, locale-independent ── */
function toISODay(date) {
  var d = date || new Date();
  var y = d.getFullYear();
  var m = String(d.getMonth() + 1).padStart(2, '0');
  var day = String(d.getDate()).padStart(2, '0');
  return "".concat(y, "-").concat(m, "-").concat(day);
}
function dateFromISO(str) {
  var _str$split$map = str.split('-').map(Number),
    _str$split$map2 = _slicedToArray(_str$split$map, 3),
    y = _str$split$map2[0],
    m = _str$split$map2[1],
    d = _str$split$map2[2];
  return new Date(y, m - 1, d);
}
// Parse timeRange string "2026-02-17 ~ 2026-02-19" to get Start/End Date
function parseTimeRange(timeRange) {
  if (!timeRange) return {
    start: null,
    end: null
  };
  // Supports "2026-02-17 ~ 2026-02-19" and "2026/02/17 ~ 2026/02/19"
  var parts = timeRange.split(/～|~/).map(function (s) {
    return s.trim().replace(/\//g, '-');
  });
  return {
    start: parts[0] || null,
    end: parts[1] || null
  };
}

/* ── Calculate cumulative completion rate (shared helper) ──
   Formula: sum of completed sessions across all cycles (max per cycle = timesPerCycle)
         ÷ (Total Days ÷ intervalDays × timesPerCycle)
   intervalDays=1 → every day; intervalDays=3 → every 3-day cycle */
function calcCompletionRate(habit) {
  var timesPerCycle = habit.dailyTarget || 1;
  var intervalDays = habit.intervalDays || 1;
  var _parseTimeRange = parseTimeRange(habit.timeRange),
    startStr = _parseTimeRange.start,
    endStr = _parseTimeRange.end;
  var habitStart = startStr ? dateFromISO(startStr) : habit.createdAt ? new Date(habit.createdAt) : new Date();
  var habitEnd = endStr ? dateFromISO(endStr) : new Date();
  var msPerDay = 1000 * 60 * 60 * 24;
  var rawDays = Math.round((habitEnd - habitStart) / msPerDay) + 1;
  // If habit hasn't started yet (future start date), return 0
  if (rawDays <= 0) return 0;
  var totalDays = Math.max(1, rawDays);
  // Total expected completions (denominator)
  var totalExpected = Math.ceil(totalDays / intervalDays) * timesPerCycle;
  // Actual completions (numerator, capped per day = timesPerCycle)
  var totalDone = Object.entries(habit.todayCounts || {}).reduce(function (s, _ref1) {
    var _ref10 = _slicedToArray(_ref1, 2),
      v = _ref10[1];
    return s + Math.min(timesPerCycle, Math.max(0, v || 0));
  }, 0);
  return Math.min(100, Math.round(totalDone / totalExpected * 100));
}

/* ── Check if today is a scheduled day ──
   Starting from habit start date, every intervalDays-day cycle, day 1 */
function isTodayActiveDay(habit, todayKey) {
  var intervalDays = habit.intervalDays || 1;
  if (intervalDays === 1) return true;
  var _parseTimeRange2 = parseTimeRange(habit.timeRange),
    startStr = _parseTimeRange2.start;
  var habitStart = startStr ? dateFromISO(startStr) : habit.createdAt ? new Date(habit.createdAt) : new Date();
  var today = dateFromISO(todayKey);
  var diffDays = Math.round((today - habitStart) / (1000 * 60 * 60 * 24));
  return diffDays >= 0 && diffDays % intervalDays === 0;
}

/* ── HABIT DETAIL VIEW ── */
function HabitDetailView(_ref11) {
  var habit = _ref11.habit,
    onBack = _ref11.onBack,
    onCount = _ref11.onCount,
    currentDay = _ref11.currentDay;
  var todayKey = currentDay || toISODay();
  var target = habit.dailyTarget || 1;
  var todayCounts = habit.todayCounts || {};
  var done = todayCounts[todayKey] !== undefined ? todayCounts[todayKey] : todayCounts[new Date().toDateString()] || 0;
  var progPct = Math.min(100, Math.round(done / target * 100));
  var intervalDays = habit.intervalDays || 1;
  var isActiveDay = isTodayActiveDay(habit, todayKey);

  // Today's completion rate: actual completions today (capped at goal) / daily goal (N/A on non-scheduled days)
  var todayDone = Math.min(target, Math.max(0, done));
  var todayRate = isActiveDay ? Math.min(100, Math.round(todayDone / target * 100)) : null;

  // Cumulative completion rate: use shared helper
  var completionRate = calcCompletionRate(habit);
  return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
    className: "back-nav",
    onClick: onBack
  }, /*#__PURE__*/React.createElement(BackIcon, null), "My Habits"), /*#__PURE__*/React.createElement("div", {
    className: "detail-title"
  }, habit.name), /*#__PURE__*/React.createElement("div", {
    className: "detail-category"
  }, habit.category, habit.freqLabel && " \xB7 ".concat(habit.freqLabel), habit.durLabel && " \xB7 ".concat(habit.durLabel), habit.timeRange ? ' · ' + habit.timeRange : ''), /*#__PURE__*/React.createElement("div", {
    className: "detail-stats-grid"
  }, /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-value"
  }, target), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-label"
  }, "Daily Goal")), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-value"
  }, done), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-label"
  }, "Today's Done")), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-value"
  }, todayRate !== null ? "".concat(todayRate, "%") : '—'), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-label"
  }, todayRate !== null ? "Today's Completion" : 'Rest Day')), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-card"
  }, /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-value"
  }, completionRate, "%"), /*#__PURE__*/React.createElement("div", {
    className: "detail-stat-label"
  }, "Overall Rate"))), /*#__PURE__*/React.createElement("div", {
    className: "section-title"
  }, "Today's Progress"), /*#__PURE__*/React.createElement("div", {
    style: {
      marginBottom: 24
    }
  }, !isActiveDay ? /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center',
      justifyContent: 'center',
      padding: '28px 0',
      border: '1px solid var(--gray-200)',
      gap: 8
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 13,
      fontWeight: 700,
      color: 'var(--gray-500)',
      textTransform: 'uppercase',
      letterSpacing: 1.5
    }
  }, "Rest Day"), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      color: 'var(--gray-400)'
    }
  }, "Every ", intervalDays, " days \u2014 no check-in needed today")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      justifyContent: 'space-between',
      fontSize: 11,
      fontWeight: 700,
      textTransform: 'uppercase',
      letterSpacing: .5,
      color: 'var(--gray-500)',
      marginBottom: 8
    }
  }, /*#__PURE__*/React.createElement("span", null, done, " / ", target, "  times"), /*#__PURE__*/React.createElement("span", {
    style: {
      fontFamily: 'var(--din)'
    }
  }, progPct, "%")), /*#__PURE__*/React.createElement("div", {
    style: {
      height: 8,
      background: 'var(--gray-100)'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      height: '100%',
      background: 'var(--black)',
      width: "".concat(progPct, "%"),
      transition: 'width .4s'
    }
  })), /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      gap: 0,
      marginTop: 14
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "counter-wrap",
    style: {
      width: '100%',
      justifyContent: 'center'
    }
  }, /*#__PURE__*/React.createElement("button", {
    className: "counter-btn",
    style: {
      flex: 1,
      height: 44
    },
    onClick: function onClick() {
      return onCount(habit.id, -1);
    }
  }, "\u2212"), /*#__PURE__*/React.createElement("input", {
    type: "number",
    min: "0",
    className: "counter-val",
    style: {
      flex: 2,
      height: 44,
      fontSize: 18,
      textAlign: 'center',
      border: 'none',
      borderLeft: '1px solid var(--gray-200)',
      borderRight: '1px solid var(--gray-200)',
      outline: 'none',
      fontFamily: 'var(--din)',
      fontWeight: 700,
      background: 'var(--white)',
      cursor: 'text',
      MozAppearance: 'textfield'
    },
    value: done,
    onChange: function onChange(e) {
      var v = parseInt(e.target.value);
      if (!isNaN(v) && v >= 0) onCount(habit.id, Math.min(target, v) - done);else if (e.target.value === '') onCount(habit.id, -done);
    }
  }), /*#__PURE__*/React.createElement("button", {
    className: "counter-btn",
    style: {
      flex: 1,
      height: 44
    },
    onClick: function onClick() {
      return onCount(habit.id, +1);
    }
  }, "\uFF0B"))))));
}

/* ── PRESETS (defined outside component, stable object references) ── */
var DURATION_PRESETS = [{
  label: '5 min',
  value: 5,
  unit: 'min'
}, {
  label: '15 min',
  value: 15,
  unit: 'min'
}, {
  label: '30 min',
  value: 30,
  unit: 'min'
}, {
  label: '1 hr',
  value: 60,
  unit: 'min'
}, {
  label: 'Custom',
  value: null,
  unit: 'min'
}];
var FREQ_PRESETS = [{
  label: 'Every day 1  times',
  timesPerDay: 1,
  intervalDays: 1,
  periodUnit: 'day'
}, {
  label: 'Every day 2  times',
  timesPerDay: 2,
  intervalDays: 1,
  periodUnit: 'day'
}, {
  label: 'Every day 3  times',
  timesPerDay: 3,
  intervalDays: 1,
  periodUnit: 'day'
}, {
  label: 'Custom',
  timesPerDay: null,
  intervalDays: null,
  periodUnit: 'custom'
}];

/* ── ADD HABIT MODAL ── */
function AddHabitModal(_ref12) {
  var onClose = _ref12.onClose,
    onAdd = _ref12.onAdd;
  var now = new Date();
  var _useState37 = useState(''),
    _useState38 = _slicedToArray(_useState37, 2),
    name = _useState38[0],
    setName = _useState38[1];
  var _useState39 = useState('Fitness'),
    _useState40 = _slicedToArray(_useState39, 2),
    category = _useState40[0],
    setCategory = _useState40[1];

  // Start/End Date (date string for <input type="date">)
  var todayStr = toISODay(now); // use local date, not UTC
  var endOfYear = "".concat(now.getFullYear(), "-12-31");
  var _useState41 = useState(todayStr),
    _useState42 = _slicedToArray(_useState41, 2),
    startDate = _useState42[0],
    setStartDate = _useState42[1];
  var _useState43 = useState(endOfYear),
    _useState44 = _slicedToArray(_useState43, 2),
    endDate = _useState44[0],
    setEndDate = _useState44[1];
  var _useState45 = useState(null),
    _useState46 = _slicedToArray(_useState45, 2),
    durPreset = _useState46[0],
    setDurPreset = _useState46[1]; // null = Not set
  var _useState47 = useState(''),
    _useState48 = _slicedToArray(_useState47, 2),
    durCustom = _useState48[0],
    setDurCustom = _useState48[1];
  var _useState49 = useState('min'),
    _useState50 = _slicedToArray(_useState49, 2),
    durUnit = _useState50[0],
    setDurUnit = _useState50[1];
  var _useState51 = useState(null),
    _useState52 = _slicedToArray(_useState51, 2),
    freqPreset = _useState52[0],
    setFreqPreset = _useState52[1];
  var _useState53 = useState('1'),
    _useState54 = _slicedToArray(_useState53, 2),
    freqCustomN = _useState54[0],
    setFreqCustomN = _useState54[1]; // Every X days — how many times
  var _useState55 = useState('1'),
    _useState56 = _slicedToArray(_useState55, 2),
    freqIntervalDays = _useState56[0],
    setFreqIntervalDays = _useState56[1]; // Every N days

  var categories = ['Fitness', 'Nutrition', 'Skincare', 'Sleep', 'Mindfulness', 'Hydration', 'Learning', 'Other'];

  /* Calculate frequency params: { timesPerCycle: completions per cycle, intervalDays: days per cycle } */
  var getFreqParams = function getFreqParams() {
    if (!freqPreset) return {
      timesPerCycle: 1,
      intervalDays: 1
    };
    if (freqPreset.periodUnit === 'custom') {
      return {
        timesPerCycle: Math.max(1, parseInt(freqCustomN) || 1),
        intervalDays: Math.max(1, parseInt(freqIntervalDays) || 1)
      };
    }
    return {
      timesPerCycle: freqPreset.timesPerDay || 1,
      intervalDays: freqPreset.intervalDays || 1
    };
  };
  // Backward compat: dailyTarget stored as "times per cycle"
  var getDailyTarget = function getDailyTarget() {
    return getFreqParams().timesPerCycle;
  };

  /* Build frequency label */
  var getFreqLabel = function getFreqLabel() {
    if (!freqPreset) return '';
    if (freqPreset.periodUnit === 'custom') {
      var days = parseInt(freqIntervalDays) || 1;
      var times = parseInt(freqCustomN) || 1;
      if (days === 1) return "Every day ".concat(times, "  times");
      return "Every ".concat(days, " days, ").concat(times, " time").concat(times > 1 ? 's' : '');
    }
    return freqPreset.label;
  };

  /* Build duration label */
  var getDurLabel = function getDurLabel() {
    if (!durPreset) return '';
    if (durPreset.value === null) {
      var unitMap = {
        min: 'min',
        hour: 'hr'
      };
      return "".concat(durCustom, " ").concat(unitMap[durUnit] || durUnit);
    }
    return durPreset.label;
  };
  var handleAdd = function handleAdd() {
    if (!name.trim()) return;
    // Validate custom duration input
    if ((durPreset === null || durPreset === void 0 ? void 0 : durPreset.value) === null && !durCustom.toString().trim()) {
      alert('Please enter a custom duration value.');
      return;
    }
    // Validate date range
    if (startDate > endDate) {
      alert('End date must be on or after start date.');
      return;
    }
    var timeRange = "".concat(startDate, " \uFF5E ").concat(endDate);
    var freqLabel = getFreqLabel();
    var durLabel = getDurLabel();
    var _getFreqParams = getFreqParams(),
      timesPerCycle = _getFreqParams.timesPerCycle,
      intervalDays = _getFreqParams.intervalDays;
    onAdd({
      name: name.trim(),
      category: category,
      timeRange: timeRange,
      freqLabel: freqLabel,
      durLabel: durLabel,
      dailyTarget: timesPerCycle,
      intervalDays: intervalDays
    });
  };
  var isDurCustom = (durPreset === null || durPreset === void 0 ? void 0 : durPreset.value) === null;
  var isFreqCustom = (freqPreset === null || freqPreset === void 0 ? void 0 : freqPreset.periodUnit) === 'custom';
  return /*#__PURE__*/React.createElement("div", {
    className: "modal",
    onClick: onClose
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-content",
    onClick: function onClick(e) {
      return e.stopPropagation();
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-header"
  }, "Add Habit"), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", {
    className: "form-label"
  }, "Habit Name"), /*#__PURE__*/React.createElement("input", {
    type: "text",
    className: "form-input",
    value: name,
    onChange: function onChange(e) {
      return setName(e.target.value);
    },
    placeholder: "e.g. Morning Run",
    autoFocus: true
  })), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("label", {
    className: "form-label"
  }, "Category"), /*#__PURE__*/React.createElement("select", {
    className: "form-input",
    value: category,
    onChange: function onChange(e) {
      return setCategory(e.target.value);
    }
  }, categories.map(function (c) {
    return /*#__PURE__*/React.createElement("option", {
      key: c,
      value: c
    }, c);
  }))), /*#__PURE__*/React.createElement("div", {
    className: "section-divider"
  }), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-section-label"
  }, "Duration Period"), /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      alignItems: 'center',
      gap: 8
    }
  }, /*#__PURE__*/React.createElement("input", {
    type: "date",
    className: "form-input",
    style: {
      flex: 1,
      padding: '9px 8px',
      fontSize: 12
    },
    value: startDate,
    onChange: function onChange(e) {
      return setStartDate(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("span", {
    className: "date-sep"
  }, "\u2192"), /*#__PURE__*/React.createElement("input", {
    type: "date",
    className: "form-input",
    style: {
      flex: 1,
      padding: '9px 8px',
      fontSize: 12
    },
    value: endDate,
    onChange: function onChange(e) {
      return setEndDate(e.target.value);
    }
  }))), /*#__PURE__*/React.createElement("div", {
    className: "section-divider"
  }), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-section-label"
  }, "Duration per Session"), /*#__PURE__*/React.createElement("div", {
    className: "pill-group"
  }, DURATION_PRESETS.map(function (p, i) {
    return /*#__PURE__*/React.createElement("button", {
      key: i,
      className: "pill".concat(durPreset === p ? ' selected' : ''),
      onClick: function onClick() {
        return setDurPreset(p);
      }
    }, p.label);
  })), isDurCustom && /*#__PURE__*/React.createElement("div", {
    className: "pill-custom-wrap"
  }, /*#__PURE__*/React.createElement("input", {
    className: "pill-custom-input",
    type: "number",
    min: "1",
    placeholder: "30",
    value: durCustom,
    onChange: function onChange(e) {
      return setDurCustom(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("select", {
    className: "pill-unit-select",
    value: durUnit,
    onChange: function onChange(e) {
      return setDurUnit(e.target.value);
    }
  }, /*#__PURE__*/React.createElement("option", {
    value: "min"
  }, "min"), /*#__PURE__*/React.createElement("option", {
    value: "hour"
  }, "hr")))), /*#__PURE__*/React.createElement("div", {
    className: "section-divider"
  }), /*#__PURE__*/React.createElement("div", {
    className: "form-group"
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-section-label"
  }, "Frequency"), /*#__PURE__*/React.createElement("div", {
    className: "pill-group"
  }, FREQ_PRESETS.map(function (p, i) {
    return /*#__PURE__*/React.createElement("button", {
      key: i,
      className: "pill".concat(freqPreset === p ? ' selected' : ''),
      onClick: function onClick() {
        return setFreqPreset(p);
      }
    }, p.label);
  })), isFreqCustom && /*#__PURE__*/React.createElement("div", {
    style: {
      marginTop: 10,
      display: 'flex',
      flexDirection: 'column',
      gap: 8
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "pill-custom-wrap"
  }, /*#__PURE__*/React.createElement("span", {
    style: {
      fontSize: 11,
      color: 'var(--gray-500)',
      fontWeight: 600
    }
  }, "Every"), /*#__PURE__*/React.createElement("input", {
    className: "pill-custom-input",
    type: "number",
    min: "1",
    placeholder: "1",
    value: freqIntervalDays,
    onChange: function onChange(e) {
      return setFreqIntervalDays(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("span", {
    style: {
      fontSize: 11,
      color: 'var(--gray-500)',
      fontWeight: 600
    }
  }, "days, do it"), /*#__PURE__*/React.createElement("input", {
    className: "pill-custom-input",
    type: "number",
    min: "1",
    placeholder: "1",
    value: freqCustomN,
    onChange: function onChange(e) {
      return setFreqCustomN(e.target.value);
    }
  }), /*#__PURE__*/React.createElement("span", {
    style: {
      fontSize: 11,
      color: 'var(--gray-500)',
      fontWeight: 600
    }
  }, " times")), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 10,
      color: 'var(--gray-400)',
      paddingLeft: 2
    }
  }, "e.g. Every 1 day = daily; Every 2 days, 3 times = 3 sessions within 2 daysimes"))), /*#__PURE__*/React.createElement("div", {
    className: "button-group"
  }, /*#__PURE__*/React.createElement("button", {
    className: "button button-secondary",
    onClick: onClose
  }, "Cancel"), /*#__PURE__*/React.createElement("button", {
    className: "button button-primary",
    onClick: handleAdd
  }, "Create"))));
}

/* ── SVG Donut Chart helper ── */
function DonutChart(_ref13) {
  var pct = _ref13.pct,
    _ref13$size = _ref13.size,
    size = _ref13$size === void 0 ? 90 : _ref13$size,
    _ref13$stroke = _ref13.stroke,
    stroke = _ref13$stroke === void 0 ? 10 : _ref13$stroke,
    _ref13$color = _ref13.color,
    color = _ref13$color === void 0 ? '#fff' : _ref13$color,
    _ref13$bg = _ref13.bg,
    bg = _ref13$bg === void 0 ? 'rgba(255,255,255,0.12)' : _ref13$bg,
    label = _ref13.label,
    sublabel = _ref13.sublabel;
  var r = (size - stroke) / 2;
  var circ = 2 * Math.PI * r;
  var dash = pct / 100 * circ;
  var cx = size / 2,
    cy = size / 2;
  return /*#__PURE__*/React.createElement("div", {
    className: "donut-wrap",
    style: {
      width: size,
      height: size
    }
  }, /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    style: {
      transform: 'rotate(-90deg)'
    }
  }, /*#__PURE__*/React.createElement("circle", {
    cx: cx,
    cy: cy,
    r: r,
    fill: "none",
    stroke: bg,
    strokeWidth: stroke
  }), /*#__PURE__*/React.createElement("circle", {
    cx: cx,
    cy: cy,
    r: r,
    fill: "none",
    stroke: color,
    strokeWidth: stroke,
    strokeDasharray: "".concat(dash, " ").concat(circ),
    strokeLinecap: "butt",
    style: {
      transition: 'stroke-dasharray .8s cubic-bezier(.4,0,.2,1)'
    }
  })), /*#__PURE__*/React.createElement("div", {
    className: "donut-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "donut-center-val",
    style: {
      color: color
    }
  }, pct, "%"), sublabel && /*#__PURE__*/React.createElement("div", {
    className: "donut-center-lbl",
    style: {
      color: color
    }
  }, sublabel)));
}

/* ── Mini SVG circle for archive list items ── */
function MiniDonut(_ref14) {
  var pct = _ref14.pct,
    _ref14$size = _ref14.size,
    size = _ref14$size === void 0 ? 46 : _ref14$size;
  var stroke = 5,
    r = (size - stroke) / 2;
  var circ = 2 * Math.PI * r,
    dash = pct / 100 * circ;
  var color = pct >= 70 ? '#4ade80' : pct >= 40 ? '#fbbf24' : '#f87171';
  return /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    style: {
      transform: 'rotate(-90deg)'
    }
  }, /*#__PURE__*/React.createElement("circle", {
    cx: size / 2,
    cy: size / 2,
    r: r,
    fill: "none",
    stroke: "#f0f0f0",
    strokeWidth: stroke
  }), /*#__PURE__*/React.createElement("circle", {
    cx: size / 2,
    cy: size / 2,
    r: r,
    fill: "none",
    stroke: color,
    strokeWidth: stroke,
    strokeDasharray: "".concat(dash, " ").concat(circ),
    strokeLinecap: "butt"
  }));
}

/* ── HISTORY PAGE ── */
function HistoryPage(_ref15) {
  var habits = _ref15.habits,
    archivedHabits = _ref15.archivedHabits,
    percentile = _ref15.percentile,
    onBack = _ref15.onBack;
  // Sorted archived: newest first by archivedAt
  var sorted = _toConsumableArray(archivedHabits).sort(function (a, b) {
    return (b.archivedAt || '') > (a.archivedAt || '') ? 1 : -1;
  });
  var expiredRates = archivedHabits.map(function (h) {
    return h.finalRate || 0;
  });
  var activeRates = habits.map(function (h) {
    return calcCompletionRate(h);
  });
  var expiredAvg = expiredRates.length ? Math.round(expiredRates.reduce(function (s, r) {
    return s + r;
  }, 0) / expiredRates.length) : 0;
  var activeAvg = activeRates.length ? Math.round(activeRates.reduce(function (s, r) {
    return s + r;
  }, 0) / activeRates.length) : 0;

  // Meaningful stats
  var totalCompleted = archivedHabits.length;
  var bestHabit = archivedHabits.reduce(function (best, h) {
    return !best || (h.finalRate || 0) > (best.finalRate || 0) ? h : best;
  }, null);
  var highCount = archivedHabits.filter(function (h) {
    return (h.finalRate || 0) >= 70;
  }).length;
  var allRates = [].concat(_toConsumableArray(expiredRates), _toConsumableArray(activeRates));
  return /*#__PURE__*/React.createElement("div", {
    className: "app-container",
    style: {
      paddingBottom: 40
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "history-nav"
  }, /*#__PURE__*/React.createElement("button", {
    className: "history-nav-back",
    onClick: onBack
  }, /*#__PURE__*/React.createElement("svg", {
    width: "16",
    height: "16",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor"
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    d: "M15 19l-7-7 7-7"
  })), "Back"), /*#__PURE__*/React.createElement("div", {
    className: "history-nav-title"
  }, "Habit History")), /*#__PURE__*/React.createElement("div", {
    className: "history-chart-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "history-chart-title"
  }, "Expired Habits \xB7 Final Score"), /*#__PURE__*/React.createElement("div", {
    className: "history-charts-row"
  }, /*#__PURE__*/React.createElement(DonutChart, {
    pct: expiredAvg,
    size: 108,
    stroke: 12,
    color: "#ffffff",
    bg: "rgba(255,255,255,0.1)",
    sublabel: "EXPIRED AVG"
  }), /*#__PURE__*/React.createElement("div", {
    className: "history-legend"
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      alignItems: 'center',
      gap: 10,
      paddingBottom: 10,
      borderBottom: '1px solid rgba(255,255,255,.1)'
    }
  }, /*#__PURE__*/React.createElement(DonutChart, {
    pct: activeAvg,
    size: 52,
    stroke: 6,
    color: "#94a3b8",
    bg: "rgba(255,255,255,0.08)",
    sublabel: "NOW"
  }), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 10,
      opacity: .5,
      textTransform: 'uppercase',
      letterSpacing: .8,
      marginBottom: 2
    }
  }, "Active Now"), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 12,
      opacity: .8,
      lineHeight: 1.4
    }
  }, habits.length, " habit", habits.length !== 1 ? 's' : '', " in progress"))), /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      gap: 0,
      marginTop: 10
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      flex: 1,
      textAlign: 'center'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 20,
      fontWeight: 700,
      fontFamily: 'var(--din)',
      color: '#fff'
    }
  }, totalCompleted), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 9,
      opacity: .45,
      textTransform: 'uppercase',
      letterSpacing: .7,
      marginTop: 2
    }
  }, "Completed")), /*#__PURE__*/React.createElement("div", {
    style: {
      width: 1,
      background: 'rgba(255,255,255,.1)',
      margin: '0 4px'
    }
  }), /*#__PURE__*/React.createElement("div", {
    style: {
      flex: 1,
      textAlign: 'center'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 20,
      fontWeight: 700,
      fontFamily: 'var(--din)',
      color: '#4ade80'
    }
  }, highCount), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 9,
      opacity: .45,
      textTransform: 'uppercase',
      letterSpacing: .7,
      marginTop: 2
    }
  }, "\u226570% rate")), /*#__PURE__*/React.createElement("div", {
    style: {
      width: 1,
      background: 'rgba(255,255,255,.1)',
      margin: '0 4px'
    }
  }), /*#__PURE__*/React.createElement("div", {
    style: {
      flex: 1,
      textAlign: 'center'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 20,
      fontWeight: 700,
      fontFamily: 'var(--din)',
      color: '#fbbf24'
    }
  }, bestHabit ? (bestHabit.finalRate || 0) + '%' : '—'), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 9,
      opacity: .45,
      textTransform: 'uppercase',
      letterSpacing: .7,
      marginTop: 2
    }
  }, "Best rate"))), bestHabit && /*#__PURE__*/React.createElement("div", {
    style: {
      marginTop: 10,
      padding: '7px 10px',
      background: 'rgba(255,255,255,.07)',
      borderLeft: '2px solid rgba(255,255,255,.3)'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 9,
      opacity: .45,
      textTransform: 'uppercase',
      letterSpacing: .7,
      marginBottom: 2
    }
  }, "Best habit"), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      fontWeight: 600,
      opacity: .9,
      overflow: 'hidden',
      whiteSpace: 'nowrap',
      textOverflow: 'ellipsis'
    }
  }, bestHabit.name))))), percentile !== null && allRates.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "history-percentile"
  }, /*#__PURE__*/React.createElement("div", {
    className: "percentile-big"
  }, percentile, /*#__PURE__*/React.createElement("span", null, "%")), /*#__PURE__*/React.createElement("div", {
    className: "percentile-text"
  }, /*#__PURE__*/React.createElement("strong", null, "Better than ", percentile, "% of all users"), /*#__PURE__*/React.createElement("small", null, percentile >= 90 ? 'Top tier performer 🔥' : percentile >= 70 ? 'Above average — great work 💪' : percentile >= 50 ? 'Solid consistency, keep it up ↑' : 'Every habit counts — keep going ✦'), /*#__PURE__*/React.createElement("div", {
    className: "percentile-bar-wrap"
  }, /*#__PURE__*/React.createElement("div", {
    className: "percentile-bar-track"
  }, /*#__PURE__*/React.createElement("div", {
    className: "percentile-bar-fill",
    style: {
      width: "".concat(percentile, "%")
    }
  }))))), /*#__PURE__*/React.createElement("div", {
    className: "archive-list-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "archive-list-header"
  }, /*#__PURE__*/React.createElement("div", {
    className: "section-title",
    style: {
      marginBottom: 0
    }
  }, "Completed Habits"), /*#__PURE__*/React.createElement("div", {
    className: "archive-count-badge"
  }, sorted.length, " total")), sorted.length === 0 ? /*#__PURE__*/React.createElement("div", {
    style: {
      textAlign: 'center',
      padding: '40px 20px'
    }
  }, /*#__PURE__*/React.createElement("svg", {
    width: "40",
    height: "40",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    style: {
      margin: '0 auto 12px',
      display: 'block',
      opacity: .15
    }
  }, /*#__PURE__*/React.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 1.5,
    d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
  })), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 13,
      fontWeight: 600,
      color: 'var(--gray-400)',
      marginBottom: 6
    }
  }, "No history yet"), /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: 11,
      color: 'var(--gray-300)',
      lineHeight: 1.6
    }
  }, "Habits will appear here once their", /*#__PURE__*/React.createElement("br", null), "end date has passed.")) : sorted.map(function (h, i) {
    var r = h.finalRate || 0;
    var barColor = r >= 70 ? '#4ade80' : r >= 40 ? '#fbbf24' : '#f87171';
    var textColor = r >= 70 ? '#16a34a' : r >= 40 ? '#d97706' : '#dc2626';
    return /*#__PURE__*/React.createElement("div", {
      key: h.id || i,
      className: "archive-item"
    }, /*#__PURE__*/React.createElement("div", {
      className: "archive-item-top"
    }, /*#__PURE__*/React.createElement("div", {
      className: "archive-item-left"
    }, /*#__PURE__*/React.createElement("div", {
      className: "archive-item-name"
    }, h.name), /*#__PURE__*/React.createElement("div", {
      className: "archive-item-range"
    }, h.timeRange || '—', h.archivedAt && " \xB7 Ended ".concat(h.archivedAt))), /*#__PURE__*/React.createElement("div", {
      className: "archive-rate-circle",
      style: {
        position: 'relative'
      }
    }, /*#__PURE__*/React.createElement(MiniDonut, {
      pct: r
    }), /*#__PURE__*/React.createElement("div", {
      style: {
        position: 'absolute',
        top: '50%',
        left: '50%',
        transform: 'translate(-50%,-50%)',
        fontSize: 10,
        fontWeight: 700,
        fontFamily: 'var(--din)',
        color: textColor,
        textAlign: 'center',
        lineHeight: 1
      }
    }, r, "%"))), /*#__PURE__*/React.createElement("div", {
      className: "archive-prog-bar"
    }, /*#__PURE__*/React.createElement("div", {
      className: "archive-prog-fill",
      style: {
        width: "".concat(r, "%"),
        background: barColor
      }
    })), /*#__PURE__*/React.createElement("div", {
      className: "archive-item-tags"
    }, /*#__PURE__*/React.createElement("span", {
      className: "archive-tag"
    }, h.category), h.freqLabel && /*#__PURE__*/React.createElement("span", {
      className: "archive-tag"
    }, h.freqLabel), h.durLabel && /*#__PURE__*/React.createElement("span", {
      className: "archive-tag"
    }, h.durLabel)));
  })), /*#__PURE__*/React.createElement("div", {
    style: {
      height: 40
    }
  }));
}

/* ── MAIN APP ── */
function MainApp(_ref16) {
  var user = _ref16.user,
    onLogout = _ref16.onLogout;
  var _useState57 = useState('home'),
    _useState58 = _slicedToArray(_useState57, 2),
    activeTab = _useState58[0],
    setActiveTab = _useState58[1];
  var _useState59 = useState(false),
    _useState60 = _slicedToArray(_useState59, 2),
    deleteModal = _useState60[0],
    setDeleteModal = _useState60[1]; // 刪帳 modal
  var _useState61 = useState(1),
    _useState62 = _slicedToArray(_useState61, 2),
    deleteStep = _useState62[0],
    setDeleteStep = _useState62[1]; // 1=確認 2=輸入密碼 3=刪除中
  var _useState63 = useState(''),
    _useState64 = _slicedToArray(_useState63, 2),
    deletePassword = _useState64[0],
    setDeletePassword = _useState64[1];
  var _useState65 = useState(''),
    _useState66 = _slicedToArray(_useState65, 2),
    deleteError = _useState66[0],
    setDeleteError = _useState66[1];
  var _useState67 = useState(false),
    _useState68 = _slicedToArray(_useState67, 2),
    showModal = _useState68[0],
    setShowModal = _useState68[1];
  var _useState69 = useState(false),
    _useState70 = _slicedToArray(_useState69, 2),
    showHistory = _useState70[0],
    setShowHistory = _useState70[1];
  var _useState71 = useState(function () {
      // Pre-load from cache so user sees content instantly while Firestore syncs
      try {
        var cached = localStorage.getItem("habits_".concat(user === null || user === void 0 ? void 0 : user.uid));
        return cached ? JSON.parse(cached) : [];
      } catch (e) {
        return [];
      }
    }),
    _useState72 = _slicedToArray(_useState71, 2),
    habits = _useState72[0],
    setHabits = _useState72[1];
  var _useState73 = useState([]),
    _useState74 = _slicedToArray(_useState73, 2),
    archivedHabits = _useState74[0],
    setArchivedHabits = _useState74[1];
  var _useState75 = useState(null),
    _useState76 = _slicedToArray(_useState75, 2),
    percentile = _useState76[0],
    setPercentile = _useState76[1];
  var _useState77 = useState(function () {
      // Pre-check localStorage to show cached content immediately if available
      try {
        var cached = localStorage.getItem("habits_".concat(user === null || user === void 0 ? void 0 : user.uid));
        return !cached; // If cache exists, don't show loading
      } catch (e) {
        return true;
      }
    }),
    _useState78 = _slicedToArray(_useState77, 2),
    loading = _useState78[0],
    setLoading = _useState78[1];
  var _useState79 = useState(null),
    _useState80 = _slicedToArray(_useState79, 2),
    selectedHabit = _useState80[0],
    setSelectedHabit = _useState80[1];
  var _useState81 = useState(null),
    _useState82 = _slicedToArray(_useState81, 2),
    selectedGroup = _useState82[0],
    setSelectedGroup = _useState82[1];
  var _useState83 = useState(function () {
      try {
        var saved = localStorage.getItem('groups_joined_' + ((user === null || user === void 0 ? void 0 : user.uid) || 'demo'));
        if (saved) {
          var joinedIds = JSON.parse(saved);
          return mockGroups.map(function (g) {
            return _objectSpread(_objectSpread({}, g), {}, {
              joined: joinedIds.includes(g.id)
            });
          });
        }
      } catch (e) {}
      return mockGroups;
    }),
    _useState84 = _slicedToArray(_useState83, 2),
    groups = _useState84[0],
    setGroups = _useState84[1];
  var _useState85 = useState(mockFeedGlobal),
    _useState86 = _slicedToArray(_useState85, 2),
    feedPosts = _useState86[0],
    setFeedPosts = _useState86[1];
  var _useState87 = useState([]),
    _useState88 = _slicedToArray(_useState87, 2),
    myPosts = _useState88[0],
    setMyPosts = _useState88[1];
  var _useState89 = useState(''),
    _useState90 = _slicedToArray(_useState89, 2),
    postText = _useState90[0],
    setPostText = _useState90[1];
  var _useState91 = useState(null),
    _useState92 = _slicedToArray(_useState91, 2),
    postMedia = _useState92[0],
    setPostMedia = _useState92[1]; // { type:'image'|'video', url, file }
  var fileInputRef = useRef(null);
  var videoInputRef = useRef(null);
  useEffect(function () {
    if (!isFirebaseConfigured) {
      var saved = localStorage.getItem("habits_".concat(user.uid));
      var savedArchive = localStorage.getItem("archived_habits_".concat(user.uid));
      if (savedArchive) {
        try {
          setArchivedHabits(JSON.parse(savedArchive));
        } catch (e) {}
      }
      if (saved) {
        // Migrate old key format → YYYY-MM-DD
        var parsed = JSON.parse(saved);
        var migrated = parsed.map(function (h) {
          // Migrate checkedDates
          var newChecked = _toConsumableArray(new Set((h.checkedDates || []).map(function (d) {
            if (/^\d{4}-\d{2}-\d{2}$/.test(d)) return d;
            var p = new Date(d);
            return isNaN(p) ? null : toISODay(p);
          }).filter(Boolean)));
          // Migrate todayCounts
          var newCounts = {};
          Object.entries(h.todayCounts || {}).forEach(function (_ref17) {
            var _ref18 = _slicedToArray(_ref17, 2),
              k = _ref18[0],
              v = _ref18[1];
            var isoKey = /^\d{4}-\d{2}-\d{2}$/.test(k) ? k : toISODay(new Date(k));
            if (isoKey) newCounts[isoKey] = (newCounts[isoKey] || 0) + v;
          });
          // Recalculate streak
          var streak = 0;
          var cur = new Date();
          cur.setHours(0, 0, 0, 0);
          while (newChecked.includes(toISODay(cur))) {
            streak++;
            cur.setDate(cur.getDate() - 1);
          }
          return _objectSpread(_objectSpread({}, h), {}, {
            checkedDates: newChecked,
            todayCounts: newCounts,
            streak: streak
          });
        });
        setHabits(migrated);
      } else {
        setHabits([]);
      }
      setLoading(false);
      return;
    }
    var unsub = db.collection('habits').where('userId', '==', user.uid).onSnapshot(function (snap) {
      var list = snap.docs.map(function (d) {
        return _objectSpread({
          id: d.id
        }, d.data());
      }).sort(function (a, b) {
        var _a$createdAt, _a$createdAt$toMillis, _b$createdAt, _b$createdAt$toMillis;
        var ta = ((_a$createdAt = a.createdAt) === null || _a$createdAt === void 0 || (_a$createdAt$toMillis = _a$createdAt.toMillis) === null || _a$createdAt$toMillis === void 0 ? void 0 : _a$createdAt$toMillis.call(_a$createdAt)) || 0;
        var tb = ((_b$createdAt = b.createdAt) === null || _b$createdAt === void 0 || (_b$createdAt$toMillis = _b$createdAt.toMillis) === null || _b$createdAt$toMillis === void 0 ? void 0 : _b$createdAt$toMillis.call(_b$createdAt)) || 0;
        return tb - ta;
      });
      setHabits(list);
      setLoading(false);
      // Cache to localStorage for instant next load
      try {
        localStorage.setItem("habits_".concat(user.uid), JSON.stringify(list));
      } catch (e) {}
    }, function (err) {
      console.error('Firestore error:', err);
      setLoading(false);
    });
    // Load archived habits
    db.collection('archived_habits').where('userId', '==', user.uid).get().then(function (snap) {
      var list = snap.docs.map(function (d) {
        return _objectSpread({
          id: d.id
        }, d.data());
      }).sort(function (a, b) {
        return (b.archivedAt || '') > (a.archivedAt || '') ? 1 : -1;
      });
      setArchivedHabits(list);
    }).catch(function () {});
    // Safety timeout: wait max 1.5s before forcing content display
    var timeout = setTimeout(function () {
      return setLoading(false);
    }, 1500);
    return function () {
      unsub();
      clearTimeout(timeout);
    };
  }, [user]);
  useEffect(function () {
    if (!isFirebaseConfigured && habits.length >= 0) {
      localStorage.setItem("habits_".concat(user.uid), JSON.stringify(habits));
    }
  }, [habits, user]);
  useEffect(function () {
    if (!isFirebaseConfigured) {
      localStorage.setItem("archived_habits_".concat(user.uid), JSON.stringify(archivedHabits));
    }
  }, [archivedHabits, user]);

  // Auto-detect midnight rollover: schedule re-render at next 00:00
  var _useState93 = useState(toISODay()),
    _useState94 = _slicedToArray(_useState93, 2),
    currentDay = _useState94[0],
    setCurrentDay = _useState94[1];
  useEffect(function () {
    var _scheduleNextMidnight = function scheduleNextMidnight() {
      var now = new Date();
      var tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0, 0);
      var msUntilMidnight = tomorrow - now;
      return setTimeout(function () {
        setCurrentDay(toISODay()); // trigger re-render, all todayKey will update
        _scheduleNextMidnight(); // schedule next midnight detection
      }, msUntilMidnight);
    };
    var timer = _scheduleNextMidnight();
    return function () {
      return clearTimeout(timer);
    };
  }, []);
  var addHabit = function addHabit(_ref19) {
    var name = _ref19.name,
      category = _ref19.category,
      timeRange = _ref19.timeRange,
      freqLabel = _ref19.freqLabel,
      durLabel = _ref19.durLabel,
      dailyTarget = _ref19.dailyTarget,
      intervalDays = _ref19.intervalDays;
    if (habits.length >= 30) {
      alert('You can have at most 30 active habits at a time.');
      return;
    }
    var habit = {
      name: name,
      category: category,
      timeRange: timeRange,
      freqLabel: freqLabel || '',
      durLabel: durLabel || '',
      dailyTarget: dailyTarget || 1,
      intervalDays: intervalDays || 1,
      userId: user.uid,
      checkedDates: [],
      todayCounts: {},
      streak: 0,
      createdAt: new Date().toISOString()
    };
    if (!isFirebaseConfigured) {
      setHabits([_objectSpread(_objectSpread({}, habit), {}, {
        id: Date.now().toString()
      })].concat(_toConsumableArray(habits)));
    } else {
      db.collection('habits').add(_objectSpread(_objectSpread({}, habit), {}, {
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }));
    }
    setShowModal(false);
  };

  // Auto-archive habits whose end date has passed
  useEffect(function () {
    if (loading || habits.length === 0) return;
    var today = toISODay();
    var expired = habits.filter(function (h) {
      var _parseTimeRange3 = parseTimeRange(h.timeRange),
        end = _parseTimeRange3.end;
      return end && end < today;
    });
    if (expired.length === 0) return;
    var existingIds = new Set(archivedHabits.map(function (a) {
      return a.id;
    }));
    var toAdd = expired.filter(function (h) {
      return !existingIds.has(h.id);
    }).map(function (h) {
      return _objectSpread(_objectSpread({}, h), {}, {
        archivedAt: today,
        finalRate: calcCompletionRate(h)
      });
    });
    if (toAdd.length === 0) return;
    // Sort by archivedAt desc when merging
    setArchivedHabits(function (prev) {
      return [].concat(_toConsumableArray(toAdd), _toConsumableArray(prev)).sort(function (a, b) {
        return (b.archivedAt || '') > (a.archivedAt || '') ? 1 : -1;
      });
    });
    if (!isFirebaseConfigured) {
      setHabits(function (prev) {
        return prev.filter(function (h) {
          return !expired.find(function (e) {
            return e.id === h.id;
          });
        });
      });
    } else {
      toAdd.forEach(/*#__PURE__*/function () {
        var _ref20 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(h) {
          var _t4;
          return _regenerator().w(function (_context4) {
            while (1) switch (_context4.p = _context4.n) {
              case 0:
                _context4.p = 0;
                _context4.n = 1;
                return db.collection('archived_habits').doc(h.id).set(_objectSpread(_objectSpread({}, h), {}, {
                  userId: user.uid
                }));
              case 1:
                _context4.n = 2;
                return db.collection('habits').doc(h.id).delete();
              case 2:
                _context4.n = 4;
                break;
              case 3:
                _context4.p = 3;
                _t4 = _context4.v;
                console.warn('Archive error', _t4);
              case 4:
                return _context4.a(2);
            }
          }, _callee4, null, [[0, 3]]);
        }));
        return function (_x11) {
          return _ref20.apply(this, arguments);
        };
      }());
    }
  }, [habits, loading]);

  // Percentile computation
  useEffect(function () {
    if (loading) return;
    var expiredRates = archivedHabits.map(function (h) {
      return h.finalRate || 0;
    });
    var activeRates = habits.map(function (h) {
      return calcCompletionRate(h);
    });
    var all = [].concat(_toConsumableArray(expiredRates), _toConsumableArray(activeRates));
    var myAvg = all.length ? Math.round(all.reduce(function (s, r) {
      return s + r;
    }, 0) / all.length) : 0;
    if (!isFirebaseConfigured) {
      var mock = [15, 22, 28, 35, 40, 45, 50, 54, 58, 62, 65, 68, 70, 73, 75, 78, 80, 82, 84, 86, 88, 90, 92, 95];
      setPercentile(Math.round(mock.filter(function (r) {
        return r < myAvg;
      }).length / mock.length * 100));
      return;
    }
    db.collection('user_stats').doc(user.uid).set({
      avgRate: myAvg,
      updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    }, {
      merge: true
    }).then(function () {
      return db.collection('user_stats').get();
    }).then(function (snap) {
      var rates = snap.docs.map(function (d) {
        return d.data().avgRate || 0;
      });
      setPercentile(Math.round(rates.filter(function (r) {
        return r < myAvg;
      }).length / rates.length * 100));
    }).catch(function () {});
  }, [habits, archivedHabits, loading]);
  var deleteHabit = function deleteHabit(habitId) {
    if (!isFirebaseConfigured) {
      setHabits(function (prev) {
        return prev.filter(function (h) {
          return h.id !== habitId;
        });
      });
    } else {
      db.collection('habits').doc(habitId).delete();
    }
  };
  var countHabit = /*#__PURE__*/function () {
    var _ref21 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(habitId, delta) {
      var todayKey, habit, rawCounts, legacyTodayKey, counts, target, cur, next, wasDone, isDone, checkedDates, streak, cur2;
      return _regenerator().w(function (_context5) {
        while (1) switch (_context5.n) {
          case 0:
            todayKey = toISODay(); // YYYY-MM-DD
            habit = habits.find(function (h) {
              return h.id === habitId;
            });
            if (habit) {
              _context5.n = 1;
              break;
            }
            return _context5.a(2);
          case 1:
            // todayCounts: support old key format and migrate
            rawCounts = _objectSpread({}, habit.todayCounts || {}); // If old-format key exists for today, migrate it
            legacyTodayKey = new Date().toDateString();
            if (rawCounts[legacyTodayKey] !== undefined && rawCounts[todayKey] === undefined) {
              rawCounts[todayKey] = rawCounts[legacyTodayKey];
              delete rawCounts[legacyTodayKey];
            }
            counts = rawCounts; // Check if today is "Done" (reached dailyTarget)
            target = habit.dailyTarget || 1;
            cur = counts[todayKey] || 0;
            next = Math.min(target, Math.max(0, cur + delta));
            counts[todayKey] = next;
            wasDone = cur >= target;
            isDone = next >= target; // Normalize checkedDates to YYYY-MM-DD, remove old format duplicates
            checkedDates = _toConsumableArray(new Set((habit.checkedDates || []).map(function (d) {
              if (/^\d{4}-\d{2}-\d{2}$/.test(d)) return d;
              var p = new Date(d);
              return isNaN(p) ? null : toISODay(p);
            }).filter(Boolean)));
            if (!wasDone && isDone) checkedDates = _toConsumableArray(new Set([].concat(_toConsumableArray(checkedDates), [todayKey])));
            if (wasDone && !isDone) checkedDates = checkedDates.filter(function (d) {
              return d !== todayKey;
            });

            // Streak: strictly counting back from today, 0 if today not done
            streak = 0;
            cur2 = new Date();
            cur2.setHours(0, 0, 0, 0);
            while (checkedDates.includes(toISODay(cur2))) {
              streak++;
              cur2.setDate(cur2.getDate() - 1);
            }
            if (isFirebaseConfigured) {
              _context5.n = 2;
              break;
            }
            setHabits(habits.map(function (h) {
              return h.id === habitId ? _objectSpread(_objectSpread({}, h), {}, {
                todayCounts: counts,
                checkedDates: checkedDates,
                streak: streak
              }) : h;
            }));
            _context5.n = 3;
            break;
          case 2:
            _context5.n = 3;
            return db.collection('habits').doc(habitId).update({
              todayCounts: counts,
              checkedDates: checkedDates,
              streak: streak
            });
          case 3:
            return _context5.a(2);
        }
      }, _callee5);
    }));
    return function countHabit(_x12, _x13) {
      return _ref21.apply(this, arguments);
    };
  }();
  var toggleHabit = /*#__PURE__*/function () {
    var _ref22 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(habitId) {
      var today, habit, normalized, isChecked, newDates, streak, cur;
      return _regenerator().w(function (_context6) {
        while (1) switch (_context6.n) {
          case 0:
            today = toISODay();
            habit = habits.find(function (h) {
              return h.id === habitId;
            });
            if (habit) {
              _context6.n = 1;
              break;
            }
            return _context6.a(2);
          case 1:
            // Normalize checkedDates to ISO format
            normalized = _toConsumableArray(new Set((habit.checkedDates || []).map(function (d) {
              if (/^\d{4}-\d{2}-\d{2}$/.test(d)) return d;
              var p = new Date(d);
              return isNaN(p) ? null : toISODay(p);
            }).filter(Boolean)));
            isChecked = normalized.includes(today);
            newDates = isChecked ? normalized.filter(function (d) {
              return d !== today;
            }) : [].concat(_toConsumableArray(normalized), [today]);
            streak = 0;
            cur = new Date();
            cur.setHours(0, 0, 0, 0);
            while (newDates.includes(toISODay(cur))) {
              streak++;
              cur.setDate(cur.getDate() - 1);
            }
            if (isFirebaseConfigured) {
              _context6.n = 2;
              break;
            }
            setHabits(habits.map(function (h) {
              return h.id === habitId ? _objectSpread(_objectSpread({}, h), {}, {
                checkedDates: newDates,
                streak: streak
              }) : h;
            }));
            _context6.n = 3;
            break;
          case 2:
            _context6.n = 3;
            return db.collection('habits').doc(habitId).update({
              checkedDates: newDates,
              streak: streak
            });
          case 3:
            return _context6.a(2);
        }
      }, _callee6);
    }));
    return function toggleHabit(_x14) {
      return _ref22.apply(this, arguments);
    };
  }();
  var totalStreak = habits.reduce(function (s, h) {
    return s + (h.streak || 0);
  }, 0);
  var todayStr = currentDay;
  var todayCompleted = habits.filter(function (h) {
    var normalized = (h.checkedDates || []).map(function (d) {
      if (/^\d{4}-\d{2}-\d{2}$/.test(d)) return d;
      var p = new Date(d);
      return isNaN(p) ? null : toISODay(p);
    }).filter(Boolean);
    return normalized.includes(todayStr);
  }).length;
  // Cumulative completion rate: average across habits (using shared helper)
  var rate = habits.length > 0 ? Math.round(habits.reduce(function (sum, h) {
    return sum + calcCompletionRate(h);
  }, 0) / habits.length) : 0;

  // ── Feed 分頁設定 ──
  var FEED_PAGE_SIZE = 10;
  var _useState95 = useState(null),
    _useState96 = _slicedToArray(_useState95, 2),
    feedLastDoc = _useState96[0],
    setFeedLastDoc = _useState96[1];
  var _useState97 = useState(true),
    _useState98 = _slicedToArray(_useState97, 2),
    feedHasMore = _useState98[0],
    setFeedHasMore = _useState98[1];
  var _useState99 = useState(false),
    _useState100 = _slicedToArray(_useState99, 2),
    feedLoadingMore = _useState100[0],
    setFeedLoadingMore = _useState100[1];

  // 把 Firebase doc 轉成 post 物件
  var docToPost = function docToPost(d) {
    var _data$createdAt, _data$createdAt$toDat;
    var data = d.data();
    var createdAt = (_data$createdAt = data.createdAt) === null || _data$createdAt === void 0 || (_data$createdAt$toDat = _data$createdAt.toDate) === null || _data$createdAt$toDat === void 0 ? void 0 : _data$createdAt$toDat.call(_data$createdAt);
    var timeStr = createdAt ? formatTime(createdAt) : 'Just now';
    return _objectSpread(_objectSpread({
      id: d.id
    }, data), {}, {
      time: timeStr
    });
  };

  // ── 初次載入前 FEED_PAGE_SIZE 篇 ──
  useEffect(function () {
    if (!isFirebaseConfigured) return;
    var unsub = db.collection('posts').orderBy('createdAt', 'desc').limit(FEED_PAGE_SIZE).onSnapshot(function (snap) {
      var posts = snap.docs.map(docToPost);
      setFeedPosts(posts);
      setMyPosts(posts.filter(function (p) {
        return p.userId === user.uid;
      }));
      setFeedLastDoc(snap.docs[snap.docs.length - 1] || null);
      setFeedHasMore(snap.docs.length === FEED_PAGE_SIZE);
    });
    return function () {
      return unsub();
    };
  }, [user]);

  // ── 載入更多 ──
  var handleLoadMore = /*#__PURE__*/function () {
    var _ref23 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {
      var snap, morePosts, _t5;
      return _regenerator().w(function (_context7) {
        while (1) switch (_context7.p = _context7.n) {
          case 0:
            if (!(!feedLastDoc || feedLoadingMore)) {
              _context7.n = 1;
              break;
            }
            return _context7.a(2);
          case 1:
            setFeedLoadingMore(true);
            _context7.p = 2;
            _context7.n = 3;
            return db.collection('posts').orderBy('createdAt', 'desc').startAfter(feedLastDoc).limit(FEED_PAGE_SIZE).get();
          case 3:
            snap = _context7.v;
            morePosts = snap.docs.map(docToPost);
            setFeedPosts(function (prev) {
              // 避免重複
              var existingIds = new Set(prev.map(function (p) {
                return p.id;
              }));
              var newPosts = morePosts.filter(function (p) {
                return !existingIds.has(p.id);
              });
              return [].concat(_toConsumableArray(prev), _toConsumableArray(newPosts));
            });
            setMyPosts(function (prev) {
              var existingIds = new Set(prev.map(function (p) {
                return p.id;
              }));
              var newOwn = morePosts.filter(function (p) {
                return p.userId === user.uid && !existingIds.has(p.id);
              });
              return [].concat(_toConsumableArray(prev), _toConsumableArray(newOwn));
            });
            setFeedLastDoc(snap.docs[snap.docs.length - 1] || feedLastDoc);
            setFeedHasMore(snap.docs.length === FEED_PAGE_SIZE);
            _context7.n = 5;
            break;
          case 4:
            _context7.p = 4;
            _t5 = _context7.v;
            console.error('Load more failed:', _t5);
          case 5:
            _context7.p = 5;
            setFeedLoadingMore(false);
            return _context7.f(5);
          case 6:
            return _context7.a(2);
        }
      }, _callee7, null, [[2, 4, 5, 6]]);
    }));
    return function handleLoadMore() {
      return _ref23.apply(this, arguments);
    };
  }();
  function formatTime(date) {
    var now = new Date();
    var diff = Math.floor((now - date) / 1000);
    if (diff < 60) return 'Just now';
    if (diff < 3600) return "".concat(Math.floor(diff / 60), " min ago");
    if (diff < 86400) return "".concat(Math.floor(diff / 3600), " hr ago");
    return "".concat(Math.floor(diff / 86400), " day ago");
  }
  var handleLikeFeed = /*#__PURE__*/function () {
    var _ref24 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(postId) {
      var post, likedBy, hasLiked, _t6;
      return _regenerator().w(function (_context8) {
        while (1) switch (_context8.p = _context8.n) {
          case 0:
            if (isFirebaseConfigured) {
              _context8.n = 1;
              break;
            }
            setFeedPosts(function (prev) {
              return prev.map(function (p) {
                if (p.id !== postId) return p;
                var nowLiked = !p.liked;
                return _objectSpread(_objectSpread({}, p), {}, {
                  liked: nowLiked,
                  likes: Math.max(0, (p.likes || 0) + (nowLiked ? 1 : -1))
                });
              });
            });
            return _context8.a(2);
          case 1:
            post = feedPosts.find(function (p) {
              return p.id === postId;
            });
            if (post) {
              _context8.n = 2;
              break;
            }
            return _context8.a(2);
          case 2:
            likedBy = Array.isArray(post.likedBy) ? post.likedBy : [];
            hasLiked = likedBy.includes(user.uid); // Optimistic UI update immediately
            setFeedPosts(function (prev) {
              return prev.map(function (p) {
                if (p.id !== postId) return p;
                var newLikedBy = hasLiked ? likedBy.filter(function (id) {
                  return id !== user.uid;
                }) : [].concat(_toConsumableArray(likedBy), [user.uid]);
                return _objectSpread(_objectSpread({}, p), {}, {
                  likedBy: newLikedBy,
                  likes: Math.max(0, (p.likes || 0) + (hasLiked ? -1 : 1))
                });
              });
            });
            _context8.p = 3;
            _context8.n = 4;
            return db.collection('posts').doc(postId).update({
              likes: firebase.firestore.FieldValue.increment(hasLiked ? -1 : 1),
              likedBy: hasLiked ? firebase.firestore.FieldValue.arrayRemove(user.uid) : firebase.firestore.FieldValue.arrayUnion(user.uid)
            });
          case 4:
            _context8.n = 6;
            break;
          case 5:
            _context8.p = 5;
            _t6 = _context8.v;
            console.error(_t6);
            // Revert on failure
            setFeedPosts(function (prev) {
              return prev.map(function (p) {
                if (p.id !== postId) return p;
                return _objectSpread(_objectSpread({}, p), {}, {
                  likedBy: likedBy,
                  likes: Math.max(0, (p.likes || 0) + (hasLiked ? 1 : -1))
                });
              });
            });
          case 6:
            return _context8.a(2);
        }
      }, _callee8, null, [[3, 5]]);
    }));
    return function handleLikeFeed(_x15) {
      return _ref24.apply(this, arguments);
    };
  }();
  var _useState101 = useState(false),
    _useState102 = _slicedToArray(_useState101, 2),
    uploadingMedia = _useState102[0],
    setUploadingMedia = _useState102[1];
  var _useState103 = useState(0),
    _useState104 = _slicedToArray(_useState103, 2),
    uploadProgress = _useState104[0],
    setUploadProgress = _useState104[1];
  var _useState105 = useState(function () {
      return localStorage.getItem("avatar_".concat(user === null || user === void 0 ? void 0 : user.uid)) || null;
    }),
    _useState106 = _slicedToArray(_useState105, 2),
    avatarUrl = _useState106[0],
    setAvatarUrl = _useState106[1];
  var _useState107 = useState(false),
    _useState108 = _slicedToArray(_useState107, 2),
    uploadingAvatar = _useState108[0],
    setUploadingAvatar = _useState108[1];
  var avatarInputRef = useRef(null);
  var handleMediaSelect = /*#__PURE__*/function () {
    var _ref25 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9(e, type) {
      var _e$target$files;
      var file, localUrl, resourceType, result, _t7;
      return _regenerator().w(function (_context9) {
        while (1) switch (_context9.p = _context9.n) {
          case 0:
            file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];
            if (file) {
              _context9.n = 1;
              break;
            }
            return _context9.a(2);
          case 1:
            e.target.value = '';

            // Immediately show local preview
            localUrl = URL.createObjectURL(file);
            setPostMedia({
              type: type,
              url: localUrl,
              file: file,
              uploading: true
            });
            setUploadingMedia(true);
            setUploadProgress(0);
            _context9.p = 2;
            resourceType = type === 'video' ? 'video' : 'image';
            _context9.n = 3;
            return uploadToCloudinary(file, resourceType, function (pct) {
              return setUploadProgress(pct);
            });
          case 3:
            result = _context9.v;
            setPostMedia({
              type: type,
              url: result.url,
              file: null,
              uploading: false,
              local: result.local
            });
            _context9.n = 5;
            break;
          case 4:
            _context9.p = 4;
            _t7 = _context9.v;
            alert('Upload failed：' + _t7.message);
            setPostMedia(null);
          case 5:
            _context9.p = 5;
            setUploadingMedia(false);
            return _context9.f(5);
          case 6:
            return _context9.a(2);
        }
      }, _callee9, null, [[2, 4, 5, 6]]);
    }));
    return function handleMediaSelect(_x16, _x17) {
      return _ref25.apply(this, arguments);
    };
  }();
  var handleAvatarSelect = /*#__PURE__*/function () {
    var _ref26 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee0(e) {
      var _e$target$files2;
      var file, result, _t8;
      return _regenerator().w(function (_context0) {
        while (1) switch (_context0.p = _context0.n) {
          case 0:
            file = (_e$target$files2 = e.target.files) === null || _e$target$files2 === void 0 ? void 0 : _e$target$files2[0];
            if (file) {
              _context0.n = 1;
              break;
            }
            return _context0.a(2);
          case 1:
            e.target.value = '';
            setUploadingAvatar(true);
            _context0.p = 2;
            _context0.n = 3;
            return uploadToCloudinary(file, 'image', null);
          case 3:
            result = _context0.v;
            setAvatarUrl(result.url);
            localStorage.setItem("avatar_".concat(user === null || user === void 0 ? void 0 : user.uid), result.url);
            _context0.n = 5;
            break;
          case 4:
            _context0.p = 4;
            _t8 = _context0.v;
            alert('AvatarUpload failed：' + _t8.message);
          case 5:
            _context0.p = 5;
            setUploadingAvatar(false);
            return _context0.f(5);
          case 6:
            return _context0.a(2);
        }
      }, _callee0, null, [[2, 4, 5, 6]]);
    }));
    return function handleAvatarSelect(_x18) {
      return _ref26.apply(this, arguments);
    };
  }();
  var POST_DAILY_LIMIT = 5; // 每日最多發文數
  var POST_COOLDOWN_SEC = 180; // 兩篇之間最少間隔秒數（3 分鐘）

  var handlePostSubmit = /*#__PURE__*/function () {
    var _ref27 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee1() {
      var _ref28;
      var banDoc, today, snap, recentSnap, _lastPost$createdAt, _lastPost$createdAt$t, lastPost, lastTime, diffSec, remaining, mins, secs, avatar, newPost, localPost, _t9, _t0, _t1;
      return _regenerator().w(function (_context1) {
        while (1) switch (_context1.p = _context1.n) {
          case 0:
            if (!(!postText.trim() && !postMedia)) {
              _context1.n = 1;
              break;
            }
            return _context1.a(2);
          case 1:
            if (!(postMedia !== null && postMedia !== void 0 && postMedia.uploading)) {
              _context1.n = 2;
              break;
            }
            return _context1.a(2);
          case 2:
            if (!isFirebaseConfigured) {
              _context1.n = 13;
              break;
            }
            _context1.p = 3;
            _context1.n = 4;
            return db.collection('banned_users').doc(user.uid).get();
          case 4:
            banDoc = _context1.v;
            if (!banDoc.exists) {
              _context1.n = 5;
              break;
            }
            alert('您的帳號已被管理員停止發文權限。如有疑問請聯絡管理員。');
            return _context1.a(2);
          case 5:
            _context1.n = 7;
            break;
          case 6:
            _context1.p = 6;
            _t9 = _context1.v;
          case 7:
            _context1.p = 7;
            today = new Date();
            today.setHours(0, 0, 0, 0);
            _context1.n = 8;
            return db.collection('posts').where('userId', '==', user.uid).where('createdAt', '>=', firebase.firestore.Timestamp.fromDate(today)).get();
          case 8:
            snap = _context1.v;
            if (!(snap.size >= POST_DAILY_LIMIT)) {
              _context1.n = 9;
              break;
            }
            alert("\u6BCF\u65E5\u6700\u591A\u767C ".concat(POST_DAILY_LIMIT, " \u7BC7\u8CBC\u6587\uFF0C\u660E\u5929\u518D\u4F86\u5427\uFF01"));
            return _context1.a(2);
          case 9:
            _context1.n = 10;
            return db.collection('posts').where('userId', '==', user.uid).orderBy('createdAt', 'desc').limit(1).get();
          case 10:
            recentSnap = _context1.v;
            if (recentSnap.empty) {
              _context1.n = 11;
              break;
            }
            lastPost = recentSnap.docs[0].data();
            lastTime = (_lastPost$createdAt = lastPost.createdAt) === null || _lastPost$createdAt === void 0 || (_lastPost$createdAt$t = _lastPost$createdAt.toDate) === null || _lastPost$createdAt$t === void 0 ? void 0 : _lastPost$createdAt$t.call(_lastPost$createdAt);
            if (!lastTime) {
              _context1.n = 11;
              break;
            }
            diffSec = Math.floor((new Date() - lastTime) / 1000);
            if (!(diffSec < POST_COOLDOWN_SEC)) {
              _context1.n = 11;
              break;
            }
            remaining = POST_COOLDOWN_SEC - diffSec;
            mins = Math.floor(remaining / 60);
            secs = remaining % 60;
            alert("\u767C\u6587\u592A\u983B\u7E41\uFF01\u8ACB\u7B49 ".concat(mins > 0 ? mins + '分' : '').concat(secs, "\u79D2 \u5F8C\u518D\u767C\u3002"));
            return _context1.a(2);
          case 11:
            _context1.n = 13;
            break;
          case 12:
            _context1.p = 12;
            _t0 = _context1.v;
            console.warn('Post limit check failed:', _t0);
          case 13:
            avatar = ((_ref28 = user.displayName || user.email) === null || _ref28 === void 0 || (_ref28 = _ref28[0]) === null || _ref28 === void 0 ? void 0 : _ref28.toUpperCase()) || 'U';
            newPost = {
              userId: user.uid,
              user: user.displayName || 'User',
              avatar: avatar,
              avatarUrl: localStorage.getItem("avatar_".concat(user.uid)) || null,
              text: postText.trim(),
              habit: '',
              likes: 0,
              comments: 0,
              likedBy: [],
              hasImage: (postMedia === null || postMedia === void 0 ? void 0 : postMedia.type) === 'image',
              hasVideo: (postMedia === null || postMedia === void 0 ? void 0 : postMedia.type) === 'video',
              mediaUrl: (postMedia === null || postMedia === void 0 ? void 0 : postMedia.url) || null
            };
            if (!isFirebaseConfigured) {
              _context1.n = 18;
              break;
            }
            _context1.p = 14;
            _context1.n = 15;
            return db.collection('posts').add(_objectSpread(_objectSpread({}, newPost), {}, {
              createdAt: firebase.firestore.FieldValue.serverTimestamp()
            }));
          case 15:
            _context1.n = 17;
            break;
          case 16:
            _context1.p = 16;
            _t1 = _context1.v;
            alert('Post failed: ' + _t1.message);
            return _context1.a(2);
          case 17:
            _context1.n = 19;
            break;
          case 18:
            localPost = _objectSpread(_objectSpread({}, newPost), {}, {
              id: 'my-' + Date.now(),
              time: 'Just now',
              liked: false,
              isOwn: true
            });
            setMyPosts(function (prev) {
              return [localPost].concat(_toConsumableArray(prev));
            });
            setFeedPosts(function (prev) {
              return [localPost].concat(_toConsumableArray(prev));
            });
          case 19:
            setPostText('');
            setPostMedia(null);
          case 20:
            return _context1.a(2);
        }
      }, _callee1, null, [[14, 16], [7, 12], [3, 6]]);
    }));
    return function handlePostSubmit() {
      return _ref27.apply(this, arguments);
    };
  }();

  /* ── 檢舉貼文 ── */
  var handleReport = /*#__PURE__*/function () {
    var _ref29 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee10(postId, postUserId, postUserName) {
      var existing, _t10;
      return _regenerator().w(function (_context10) {
        while (1) switch (_context10.p = _context10.n) {
          case 0:
            if (isFirebaseConfigured) {
              _context10.n = 1;
              break;
            }
            alert('檢舉功能需要登入才能使用。');
            return _context10.a(2);
          case 1:
            if (window.confirm("\u78BA\u5B9A\u8981\u6AA2\u8209 ".concat(postUserName || '此用戶', " \u7684\u8CBC\u6587\u55CE\uFF1F\n\u7BA1\u7406\u54E1\u6703\u6536\u5230\u901A\u77E5\u4E26\u9032\u884C\u5BE9\u67E5\u3002"))) {
              _context10.n = 2;
              break;
            }
            return _context10.a(2);
          case 2:
            _context10.p = 2;
            _context10.n = 3;
            return db.collection('reports').where('postId', '==', postId).where('reporterId', '==', user.uid).limit(1).get();
          case 3:
            existing = _context10.v;
            if (existing.empty) {
              _context10.n = 4;
              break;
            }
            alert('你已經檢舉過這篇貼文了。');
            return _context10.a(2);
          case 4:
            _context10.n = 5;
            return db.collection('reports').add({
              postId: postId,
              postUserId: postUserId,
              postUserName: postUserName || '',
              reporterId: user.uid,
              reporterName: user.displayName || user.email || '',
              createdAt: firebase.firestore.FieldValue.serverTimestamp(),
              status: 'pending'
            });
          case 5:
            alert('已送出檢舉，感謝你的回報！管理員會盡快處理。');
            _context10.n = 7;
            break;
          case 6:
            _context10.p = 6;
            _t10 = _context10.v;
            alert('檢舉失敗：' + _t10.message);
          case 7:
            return _context10.a(2);
        }
      }, _callee10, null, [[2, 6]]);
    }));
    return function handleReport(_x19, _x20, _x21) {
      return _ref29.apply(this, arguments);
    };
  }();

  /* ── 判斷登入方式 ── */
  var isGoogleUser = function isGoogleUser() {
    if (!auth.currentUser) return false;
    return auth.currentUser.providerData.some(function (p) {
      return p.providerId === 'google.com';
    });
  };

  /* ── 刪除帳號 — 清除所有用戶資料後刪除 Firebase Auth 帳號 ── */
  var handleDeleteAccount = /*#__PURE__*/function () {
    var _ref30 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee11() {
      var uid, provider, credential, habitsSnap, batch1, postsSnap, _iterator, _step, _loop, allPosts, _iterator2, _step2, _loop2, archiveSnap, batchArch, errMap, _t11, _t12, _t13, _t14, _t15, _t16, _t17;
      return _regenerator().w(function (_context13) {
        while (1) switch (_context13.p = _context13.n) {
          case 0:
            if (isFirebaseConfigured) {
              _context13.n = 1;
              break;
            }
            localStorage.removeItem('demoUser');
            onLogout();
            return _context13.a(2);
          case 1:
            setDeleteStep(3);
            setDeleteError('');
            _context13.p = 2;
            uid = user.uid; // Step 1: 重新驗證（Firebase 刪帳需要近期登入）
            if (!isGoogleUser()) {
              _context13.n = 4;
              break;
            }
            // Google OAuth 用戶：使用 Google popup 重新驗證
            provider = new firebase.auth.GoogleAuthProvider();
            _context13.n = 3;
            return auth.currentUser.reauthenticateWithPopup(provider);
          case 3:
            _context13.n = 5;
            break;
          case 4:
            // Email/Password 用戶：使用密碼重新驗證
            credential = firebase.auth.EmailAuthProvider.credential(user.email, deletePassword);
            _context13.n = 5;
            return auth.currentUser.reauthenticateWithCredential(credential);
          case 5:
            _context13.n = 6;
            return db.collection('habits').where('userId', '==', uid).get();
          case 6:
            habitsSnap = _context13.v;
            batch1 = db.batch();
            habitsSnap.docs.forEach(function (d) {
              return batch1.delete(d.ref);
            });
            if (!habitsSnap.docs.length) {
              _context13.n = 7;
              break;
            }
            _context13.n = 7;
            return batch1.commit();
          case 7:
            _context13.n = 8;
            return db.collection('posts').where('userId', '==', uid).get();
          case 8:
            postsSnap = _context13.v;
            _iterator = _createForOfIteratorHelper(postsSnap.docs);
            _context13.p = 9;
            _loop = /*#__PURE__*/_regenerator().m(function _loop() {
              var postDoc, commentsSnap, batchC;
              return _regenerator().w(function (_context11) {
                while (1) switch (_context11.n) {
                  case 0:
                    postDoc = _step.value;
                    _context11.n = 1;
                    return postDoc.ref.collection('comments').get();
                  case 1:
                    commentsSnap = _context11.v;
                    batchC = db.batch();
                    commentsSnap.docs.forEach(function (d) {
                      return batchC.delete(d.ref);
                    });
                    if (!commentsSnap.docs.length) {
                      _context11.n = 2;
                      break;
                    }
                    _context11.n = 2;
                    return batchC.commit();
                  case 2:
                    _context11.n = 3;
                    return postDoc.ref.delete();
                  case 3:
                    return _context11.a(2);
                }
              }, _loop);
            });
            _iterator.s();
          case 10:
            if ((_step = _iterator.n()).done) {
              _context13.n = 12;
              break;
            }
            return _context13.d(_regeneratorValues(_loop()), 11);
          case 11:
            _context13.n = 10;
            break;
          case 12:
            _context13.n = 14;
            break;
          case 13:
            _context13.p = 13;
            _t11 = _context13.v;
            _iterator.e(_t11);
          case 14:
            _context13.p = 14;
            _iterator.f();
            return _context13.f(14);
          case 15:
            _context13.n = 16;
            return db.collection('posts').get();
          case 16:
            allPosts = _context13.v;
            _iterator2 = _createForOfIteratorHelper(allPosts.docs);
            _context13.p = 17;
            _loop2 = /*#__PURE__*/_regenerator().m(function _loop2() {
              var postDoc, myComments, batchMC;
              return _regenerator().w(function (_context12) {
                while (1) switch (_context12.n) {
                  case 0:
                    postDoc = _step2.value;
                    _context12.n = 1;
                    return postDoc.ref.collection('comments').where('userId', '==', uid).get();
                  case 1:
                    myComments = _context12.v;
                    batchMC = db.batch();
                    myComments.docs.forEach(function (d) {
                      return batchMC.delete(d.ref);
                    });
                    if (!myComments.docs.length) {
                      _context12.n = 2;
                      break;
                    }
                    _context12.n = 2;
                    return batchMC.commit();
                  case 2:
                    return _context12.a(2);
                }
              }, _loop2);
            });
            _iterator2.s();
          case 18:
            if ((_step2 = _iterator2.n()).done) {
              _context13.n = 20;
              break;
            }
            return _context13.d(_regeneratorValues(_loop2()), 19);
          case 19:
            _context13.n = 18;
            break;
          case 20:
            _context13.n = 22;
            break;
          case 21:
            _context13.p = 21;
            _t12 = _context13.v;
            _iterator2.e(_t12);
          case 22:
            _context13.p = 22;
            _iterator2.f();
            return _context13.f(22);
          case 23:
            _context13.p = 23;
            _context13.n = 24;
            return db.collection('archived_habits').where('userId', '==', uid).get();
          case 24:
            archiveSnap = _context13.v;
            batchArch = db.batch();
            archiveSnap.docs.forEach(function (d) {
              return batchArch.delete(d.ref);
            });
            if (!archiveSnap.docs.length) {
              _context13.n = 25;
              break;
            }
            _context13.n = 25;
            return batchArch.commit();
          case 25:
            _context13.n = 27;
            break;
          case 26:
            _context13.p = 26;
            _t13 = _context13.v;
          case 27:
            _context13.p = 27;
            _context13.n = 28;
            return db.collection('user_stats').doc(uid).delete();
          case 28:
            _context13.n = 30;
            break;
          case 29:
            _context13.p = 29;
            _t14 = _context13.v;
          case 30:
            _context13.p = 30;
            _context13.n = 31;
            return db.collection('upload_quotas').doc(uid).delete();
          case 31:
            _context13.n = 33;
            break;
          case 32:
            _context13.p = 32;
            _t15 = _context13.v;
          case 33:
            _context13.p = 33;
            _context13.n = 34;
            return db.collection('users').doc(uid).delete();
          case 34:
            _context13.n = 36;
            break;
          case 35:
            _context13.p = 35;
            _t16 = _context13.v;
          case 36:
            // 清除 localStorage
            localStorage.removeItem('demoUser');
            localStorage.removeItem('pwa-installed');
            localStorage.removeItem('notif-asked');
            localStorage.removeItem('ios-hint-shown');
            localStorage.removeItem('avatar_' + uid);

            // Step 3: 刪除 Firebase Auth 帳號（最後執行）
            _context13.n = 37;
            return auth.currentUser.delete();
          case 37:
            _context13.n = 39;
            break;
          case 38:
            _context13.p = 38;
            _t17 = _context13.v;
            setDeleteStep(2);
            errMap = {
              'auth/wrong-password': '密碼錯誤，請再試一次',
              'auth/invalid-credential': '密碼錯誤，請再試一次',
              'auth/too-many-requests': '嘗試次數過多，請稍後再試',
              'auth/requires-recent-login': '請重新登入後再試'
            };
            setDeleteError(errMap[_t17.code] || '刪除失敗：' + _t17.message);
          case 39:
            return _context13.a(2);
        }
      }, _callee11, null, [[33, 35], [30, 32], [27, 29], [23, 26], [17, 21, 22, 23], [9, 13, 14, 15], [2, 38]]);
    }));
    return function handleDeleteAccount() {
      return _ref30.apply(this, arguments);
    };
  }();
  if (loading) return /*#__PURE__*/React.createElement("div", {
    className: "app-container"
  }, /*#__PURE__*/React.createElement("div", {
    className: "loading"
  }, "Loading..."));
  if (showHistory) return /*#__PURE__*/React.createElement(HistoryPage, {
    habits: habits,
    archivedHabits: archivedHabits,
    percentile: percentile,
    onBack: function onBack() {
      return setShowHistory(false);
    }
  });
  var renderHome = function renderHome() {
    if (selectedHabit) {
      var habit = habits.find(function (h) {
        return h.id === selectedHabit;
      });
      if (!habit) {
        setSelectedHabit(null);
        return null;
      }
      return /*#__PURE__*/React.createElement(HabitDetailView, {
        habit: habit,
        onBack: function onBack() {
          return setSelectedHabit(null);
        },
        onCount: countHabit,
        currentDay: currentDay
      });
    }
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "home-top"
    }, /*#__PURE__*/React.createElement("button", {
      className: "center-add-btn-standalone",
      onClick: function onClick() {
        if (habits.length >= 30) {
          alert('Max 30 active habits. Wait for habits to expire or delete one.');
          return;
        }
        setShowModal(true);
      },
      style: {
        opacity: habits.length >= 30 ? 0.4 : 1
      }
    }, /*#__PURE__*/React.createElement(PlusIcon, null))), habits.length > 0 && /*#__PURE__*/React.createElement("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: 14
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "section-title",
      style: {
        marginBottom: 0
      }
    }, "My Habits"), /*#__PURE__*/React.createElement("span", {
      style: {
        fontSize: 10,
        fontWeight: 700,
        color: habits.length >= 30 ? '#dc2626' : 'var(--gray-400)',
        textTransform: 'uppercase',
        letterSpacing: .8
      }
    }, habits.length, "/30")), habits.length === 0 ? /*#__PURE__*/React.createElement("div", {
      className: "empty-state"
    }, /*#__PURE__*/React.createElement(HomeIcon, null), /*#__PURE__*/React.createElement("h3", null, "No habits yet"), /*#__PURE__*/React.createElement("p", null, "Tap + Create your first habit")) : habits.map(function (habit) {
      var todayKey = currentDay;
      // Home bar: cumulative completion rate (supports custom intervalDays)
      var progPct = calcCompletionRate(habit);
      return /*#__PURE__*/React.createElement("div", {
        key: habit.id,
        className: "habit-card",
        onClick: function onClick() {
          return setSelectedHabit(habit.id);
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-header"
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-info"
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-title"
      }, habit.name), /*#__PURE__*/React.createElement("div", {
        className: "habit-meta"
      }, /*#__PURE__*/React.createElement("span", {
        className: "habit-category"
      }, habit.category), habit.streak > 0 && /*#__PURE__*/React.createElement("div", {
        className: "habit-streak"
      }, /*#__PURE__*/React.createElement(FlameIcon, null), /*#__PURE__*/React.createElement("span", null, habit.streak))), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 6,
          flexWrap: 'wrap',
          marginTop: 4
        }
      }, habit.freqLabel && /*#__PURE__*/React.createElement("span", {
        style: {
          fontSize: 9,
          fontWeight: 700,
          textTransform: 'uppercase',
          letterSpacing: .5,
          padding: '2px 6px',
          background: 'var(--gray-100)',
          color: 'var(--gray-600)'
        }
      }, habit.freqLabel), habit.durLabel && /*#__PURE__*/React.createElement("span", {
        style: {
          fontSize: 9,
          fontWeight: 700,
          textTransform: 'uppercase',
          letterSpacing: .5,
          padding: '2px 6px',
          background: 'var(--gray-100)',
          color: 'var(--gray-600)'
        }
      }, habit.durLabel)), habit.timeRange && /*#__PURE__*/React.createElement("div", {
        className: "habit-time-range",
        style: {
          marginTop: 4
        }
      }, habit.timeRange)), /*#__PURE__*/React.createElement("div", {
        className: "habit-progress-section",
        onClick: function onClick(e) {
          return e.stopPropagation();
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-progress-bar-wrap"
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-prog-label"
      }, /*#__PURE__*/React.createElement("span", null, "Done"), /*#__PURE__*/React.createElement("span", {
        style: {
          fontFamily: 'var(--din)'
        }
      }, progPct, "%")), /*#__PURE__*/React.createElement("div", {
        className: "habit-prog-track"
      }, /*#__PURE__*/React.createElement("div", {
        className: "habit-prog-fill".concat(progPct >= 100 ? ' done' : ''),
        style: {
          width: "".concat(progPct, "%")
        }
      }))))), /*#__PURE__*/React.createElement("div", {
        className: "card-delete-row",
        onClick: function onClick(e) {
          return e.stopPropagation();
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "card-delete-btn",
        onClick: function onClick() {
          return deleteHabit(habit.id);
        }
      }, /*#__PURE__*/React.createElement("svg", {
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: 2
      }, /*#__PURE__*/React.createElement("path", {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
      })), "Delete Habit")));
    }));
  };
  var renderGroups = function renderGroups() {
    if (selectedGroup) {
      return /*#__PURE__*/React.createElement(GroupDetailView, {
        group: selectedGroup,
        currentUser: user,
        onBack: function onBack() {
          return setSelectedGroup(null);
        }
      });
    }
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "section-title"
    }, "Active Groups"), groups.map(function (group) {
      return /*#__PURE__*/React.createElement("div", {
        key: group.id,
        className: "group-card"
      }, /*#__PURE__*/React.createElement("div", {
        className: "group-card-header"
      }, /*#__PURE__*/React.createElement("div", {
        className: "group-name"
      }, group.name), /*#__PURE__*/React.createElement("span", {
        className: "group-category-tag"
      }, group.category)), /*#__PURE__*/React.createElement("div", {
        className: "group-info"
      }, /*#__PURE__*/React.createElement("span", null, group.members, "  members"), /*#__PURE__*/React.createElement("span", null, "\u2022"), /*#__PURE__*/React.createElement("span", null, group.active, "  active")), /*#__PURE__*/React.createElement("div", {
        className: "group-progress"
      }, /*#__PURE__*/React.createElement("div", {
        className: "progress-label"
      }, /*#__PURE__*/React.createElement("span", null, "Progress"), /*#__PURE__*/React.createElement("span", {
        style: {
          fontFamily: 'var(--din)'
        }
      }, group.progress, "%")), /*#__PURE__*/React.createElement("div", {
        className: "progress-bar"
      }, /*#__PURE__*/React.createElement("div", {
        className: "progress-fill",
        style: {
          width: "".concat(group.progress, "%")
        }
      }))), /*#__PURE__*/React.createElement("div", {
        className: "group-bottom"
      }, /*#__PURE__*/React.createElement("div", {
        className: "group-members"
      }, _toConsumableArray(Array(Math.min(group.active, 6))).map(function (_, i) {
        return /*#__PURE__*/React.createElement("div", {
          key: i,
          className: "member-avatar-sm"
        }, String.fromCharCode(65 + i));
      })), /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          gap: 8
        }
      }, /*#__PURE__*/React.createElement("button", {
        className: "join-btn".concat(group.joined ? ' joined' : ''),
        onClick: function onClick(e) {
          e.stopPropagation();
          setGroups(function (prev) {
            var updated = prev.map(function (g) {
              return g.id === group.id ? _objectSpread(_objectSpread({}, g), {}, {
                joined: !g.joined
              }) : g;
            });
            try {
              var joinedIds = updated.filter(function (g) {
                return g.joined;
              }).map(function (g) {
                return g.id;
              });
              localStorage.setItem('groups_joined_' + ((user === null || user === void 0 ? void 0 : user.uid) || 'demo'), JSON.stringify(joinedIds));
            } catch (e) {}
            return updated;
          });
        }
      }, group.joined ? '✓ Joined' : 'Join'), /*#__PURE__*/React.createElement("button", {
        className: "join-btn",
        onClick: function onClick() {
          return setSelectedGroup(group);
        }
      }, "View"))));
    }));
  };
  var renderFeed = function renderFeed() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "section-title"
    }, "Community Feed"), feedPosts.length === 0 && /*#__PURE__*/React.createElement("div", {
      className: "empty-state"
    }, /*#__PURE__*/React.createElement(ChatIcon, null), /*#__PURE__*/React.createElement("h3", null, "No posts yet"), /*#__PURE__*/React.createElement("p", null, "Go to your Profile to publish your first post!")), feedPosts.map(function (post) {
      // Determine liked: use likedBy array (Firebase mode) or liked flag (demo mode)
      var likedBy = Array.isArray(post.likedBy) ? post.likedBy : [];
      var liked = isFirebaseConfigured ? likedBy.includes(user.uid) : post.liked || false;
      return /*#__PURE__*/React.createElement(FeedCard, {
        key: post.id,
        post: _objectSpread(_objectSpread({}, post), {}, {
          liked: liked,
          likes: post.likes || 0
        }),
        currentUser: user,
        onLike: handleLikeFeed,
        onReport: handleReport
      });
    }), feedPosts.length > 0 && /*#__PURE__*/React.createElement("div", {
      style: {
        textAlign: 'center',
        padding: '16px 0 24px'
      }
    }, feedHasMore ? /*#__PURE__*/React.createElement("button", {
      onClick: handleLoadMore,
      disabled: feedLoadingMore,
      style: {
        padding: '10px 28px',
        background: 'var(--white)',
        border: '1.5px solid var(--gray-300)',
        color: 'var(--gray-700)',
        fontSize: 13,
        fontWeight: 600,
        fontFamily: 'var(--font)',
        cursor: feedLoadingMore ? 'not-allowed' : 'pointer',
        letterSpacing: '.3px',
        transition: 'all .2s'
      }
    }, feedLoadingMore ? '載入中…' : '載入更多貼文') : /*#__PURE__*/React.createElement("div", {
      style: {
        fontSize: 12,
        color: 'var(--gray-400)',
        padding: '4px 0'
      }
    }, "\u2014 \u5DF2\u986F\u793A\u5168\u90E8\u8CBC\u6587 \u2014")));
  };
  var renderProfile = function renderProfile() {
    var _ref31;
    return /*#__PURE__*/React.createElement("div", null, !isCloudinaryConfigured && /*#__PURE__*/React.createElement("div", {
      className: "cloudinary-setup-box"
    }, /*#__PURE__*/React.createElement("strong", null, "\u26A1 Enable media uploads:"), " Fill in your info at the top of the code", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("code", null, "CLOUDINARY_CLOUD_NAME"), " and ", /*#__PURE__*/React.createElement("code", null, "CLOUDINARY_UPLOAD_PRESET"), /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("a", {
      href: "https://cloudinary.com",
      target: "_blank"
    }, "Sign up free on Cloudinary \u2192"), " (free forever plan)"), /*#__PURE__*/React.createElement("div", {
      className: "profile-header"
    }, /*#__PURE__*/React.createElement("div", {
      className: "profile-avatar-wrap",
      onClick: function onClick() {
        var _avatarInputRef$curre;
        return (_avatarInputRef$curre = avatarInputRef.current) === null || _avatarInputRef$curre === void 0 ? void 0 : _avatarInputRef$curre.click();
      },
      title: "TapChange Photo"
    }, avatarUrl ? /*#__PURE__*/React.createElement("img", {
      src: avatarUrl,
      className: "avatar-img",
      alt: "Avatar"
    }) : /*#__PURE__*/React.createElement("div", {
      className: "profile-avatar"
    }, uploadingAvatar ? '⟳' : ((_ref31 = user.displayName || user.email) === null || _ref31 === void 0 || (_ref31 = _ref31[0]) === null || _ref31 === void 0 ? void 0 : _ref31.toUpperCase()) || 'U'), /*#__PURE__*/React.createElement("div", {
      className: "avatar-edit-overlay"
    }, uploadingAvatar ? 'Uploading…' : 'Change Photo'), /*#__PURE__*/React.createElement("input", {
      ref: avatarInputRef,
      type: "file",
      accept: "image/*",
      style: {
        display: 'none'
      },
      onChange: handleAvatarSelect
    })), /*#__PURE__*/React.createElement("div", {
      className: "profile-name"
    }, user.displayName || 'User'), /*#__PURE__*/React.createElement("div", {
      className: "profile-email"
    }, user.email), /*#__PURE__*/React.createElement("div", {
      className: "profile-stats"
    }, /*#__PURE__*/React.createElement("div", {
      className: "profile-stat"
    }, /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-value"
    }, habits.length), /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-label"
    }, "Habits")), /*#__PURE__*/React.createElement("div", {
      className: "profile-stat"
    }, /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-value"
    }, myPosts.length), /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-label"
    }, "Post")), /*#__PURE__*/React.createElement("div", {
      className: "profile-stat"
    }, /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-value"
    }, rate, "%"), /*#__PURE__*/React.createElement("div", {
      className: "profile-stat-label"
    }, "Completion Rate")))), /*#__PURE__*/React.createElement("div", {
      className: "composer-wrap"
    }, /*#__PURE__*/React.createElement("textarea", {
      className: "composer-textarea",
      placeholder: "Share your habit progress or thoughts...",
      value: postText,
      maxLength: 300,
      onChange: function onChange(e) {
        return setPostText(e.target.value);
      }
    }), postMedia && /*#__PURE__*/React.createElement("div", {
      className: "composer-media-preview"
    }, postMedia.type === 'image' ? /*#__PURE__*/React.createElement("img", {
      src: postMedia.url,
      alt: "preview",
      style: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        display: 'block'
      }
    }) : /*#__PURE__*/React.createElement("video", {
      key: postMedia.url,
      src: postMedia.url,
      controls: true,
      playsInline: true,
      preload: "metadata",
      style: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        display: 'block',
        background: '#000'
      }
    }), postMedia.uploading ? /*#__PURE__*/React.createElement("div", {
      style: {
        position: 'absolute',
        inset: 0,
        background: 'rgba(0,0,0,0.65)',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        gap: 10
      }
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        fontSize: 12,
        color: 'white',
        fontWeight: 700,
        letterSpacing: 1,
        textTransform: 'uppercase'
      }
    }, "Uploading ".concat(uploadProgress, "%")), /*#__PURE__*/React.createElement("div", {
      style: {
        width: '60%',
        height: 4,
        background: 'rgba(255,255,255,0.2)',
        borderRadius: 2,
        overflow: 'hidden'
      }
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        width: uploadProgress + '%',
        height: '100%',
        background: 'white',
        transition: 'width 0.3s'
      }
    }))) : /*#__PURE__*/React.createElement("button", {
      className: "composer-media-remove",
      onClick: function onClick() {
        return setPostMedia(null);
      }
    }, "\u2715")), /*#__PURE__*/React.createElement("div", {
      className: "composer-toolbar"
    }, /*#__PURE__*/React.createElement("div", {
      className: "composer-media-btns"
    }, /*#__PURE__*/React.createElement("button", {
      className: "composer-media-btn",
      onClick: function onClick() {
        var _fileInputRef$current;
        return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();
      }
    }, /*#__PURE__*/React.createElement("svg", {
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: 2
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      d: "M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
    })), "Photo"), /*#__PURE__*/React.createElement("button", {
      className: "composer-media-btn",
      onClick: function onClick() {
        var _videoInputRef$curren;
        return (_videoInputRef$curren = videoInputRef.current) === null || _videoInputRef$curren === void 0 ? void 0 : _videoInputRef$curren.click();
      }
    }, /*#__PURE__*/React.createElement("svg", {
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: 2
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      d: "M15 10l4.553-2.069A1 1 0 0121 8.868v6.264a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
    })), "Video"), /*#__PURE__*/React.createElement("input", {
      ref: fileInputRef,
      type: "file",
      accept: "image/*",
      style: {
        display: 'none'
      },
      onChange: function onChange(e) {
        return handleMediaSelect(e, 'image');
      }
    }), /*#__PURE__*/React.createElement("input", {
      ref: videoInputRef,
      type: "file",
      accept: "video/*",
      style: {
        display: 'none'
      },
      onChange: function onChange(e) {
        return handleMediaSelect(e, 'video');
      }
    })), /*#__PURE__*/React.createElement("div", {
      style: {
        display: 'flex',
        alignItems: 'center',
        gap: 12,
        flexWrap: 'wrap',
        justifyContent: 'flex-end'
      }
    }, postMedia && !postMedia.uploading && !postMedia.local && /*#__PURE__*/React.createElement("span", {
      style: {
        fontSize: 9,
        color: 'var(--gray-400)',
        letterSpacing: .3,
        width: '100%',
        textAlign: 'right'
      }
    }, "Media uploaded \xB7 quota counted"), /*#__PURE__*/React.createElement("span", {
      className: "composer-char"
    }, postText.length, "/300"), /*#__PURE__*/React.createElement("button", {
      className: "composer-submit",
      disabled: !postText.trim() && !postMedia || (postMedia === null || postMedia === void 0 ? void 0 : postMedia.uploading),
      onClick: handlePostSubmit
    }, postMedia !== null && postMedia !== void 0 && postMedia.uploading ? 'Uploading…' : 'Post')))), /*#__PURE__*/React.createElement("div", {
      className: "my-posts-section"
    }, myPosts.length > 0 && /*#__PURE__*/React.createElement("div", {
      className: "section-title"
    }, "My Posts"), myPosts.map(function (p) {
      return /*#__PURE__*/React.createElement("div", {
        key: p.id,
        className: "my-post-item"
      }, /*#__PURE__*/React.createElement("div", {
        className: "my-post-header"
      }, /*#__PURE__*/React.createElement("span", {
        className: "my-post-time"
      }, p.time), /*#__PURE__*/React.createElement("button", {
        className: "my-post-delete",
        onClick: /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee12() {
          var _t18;
          return _regenerator().w(function (_context14) {
            while (1) switch (_context14.p = _context14.n) {
              case 0:
                if (!isFirebaseConfigured) {
                  _context14.n = 5;
                  break;
                }
                _context14.p = 1;
                _context14.n = 2;
                return db.collection('posts').doc(p.id).delete();
              case 2:
                _context14.n = 4;
                break;
              case 3:
                _context14.p = 3;
                _t18 = _context14.v;
                alert('Delete failed: ' + _t18.message);
              case 4:
                _context14.n = 6;
                break;
              case 5:
                setMyPosts(function (prev) {
                  return prev.filter(function (x) {
                    return x.id !== p.id;
                  });
                });
                setFeedPosts(function (prev) {
                  return prev.filter(function (x) {
                    return x.id !== p.id;
                  });
                });
              case 6:
                return _context14.a(2);
            }
          }, _callee12, null, [[1, 3]]);
        }))
      }, "Delete")), p.text && /*#__PURE__*/React.createElement("div", {
        className: "my-post-body"
      }, p.text), p.mediaUrl && /*#__PURE__*/React.createElement("div", {
        className: "my-post-media"
      }, p.hasImage ? /*#__PURE__*/React.createElement("img", {
        src: p.mediaUrl,
        alt: "post"
      }) : /*#__PURE__*/React.createElement("video", {
        src: p.mediaUrl,
        controls: true,
        playsInline: true,
        preload: "metadata",
        style: {
          width: '100%',
          height: 180,
          objectFit: 'contain',
          display: 'block',
          background: '#000'
        }
      })), /*#__PURE__*/React.createElement("div", {
        className: "my-post-actions"
      }, /*#__PURE__*/React.createElement("div", {
        className: "feed-action"
      }, /*#__PURE__*/React.createElement(HeartIcon, {
        filled: false
      }), /*#__PURE__*/React.createElement("span", null, p.likes)), /*#__PURE__*/React.createElement("div", {
        className: "feed-action"
      }, /*#__PURE__*/React.createElement(ChatIcon, null), /*#__PURE__*/React.createElement("span", null, p.comments))));
    }), myPosts.length === 0 && /*#__PURE__*/React.createElement("div", {
      className: "empty-state",
      style: {
        paddingTop: 32
      }
    }, /*#__PURE__*/React.createElement("svg", {
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      style: {
        width: 36,
        height: 36,
        margin: '0 auto 12px',
        opacity: .2
      }
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      strokeWidth: 1.5,
      d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
    })), /*#__PURE__*/React.createElement("h3", null, "No posts yet"), /*#__PURE__*/React.createElement("p", null, "Share your first post and start your habit journey"))), /*#__PURE__*/React.createElement("div", {
      style: {
        margin: '24px 0 0',
        borderTop: '1px solid var(--gray-100)',
        paddingTop: 20
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "section-title",
      style: {
        marginBottom: 10
      }
    }, "Analytics"), /*#__PURE__*/React.createElement("button", {
      className: "history-entry-btn",
      onClick: function onClick() {
        return setShowHistory(true);
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "history-entry-left"
    }, /*#__PURE__*/React.createElement("div", {
      className: "history-entry-icon"
    }, /*#__PURE__*/React.createElement("svg", {
      width: "18",
      height: "18",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "white",
      strokeWidth: 2
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      d: "M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
    }))), /*#__PURE__*/React.createElement("div", {
      className: "history-entry-text"
    }, /*#__PURE__*/React.createElement("strong", null, "Habit History"), /*#__PURE__*/React.createElement("span", null, archivedHabits.length, " completed \xB7 tap to view"))), /*#__PURE__*/React.createElement("div", {
      className: "history-entry-arrow"
    }, /*#__PURE__*/React.createElement("svg", {
      width: "16",
      height: "16",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor"
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      strokeWidth: 2,
      d: "M9 5l7 7-7 7"
    }))))), /*#__PURE__*/React.createElement("div", {
      style: {
        margin: '24px 0 8px',
        borderTop: '1px solid var(--gray-100)',
        paddingTop: 20
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "section-title",
      style: {
        marginBottom: 12
      }
    }, "Account"), /*#__PURE__*/React.createElement("button", {
      className: "delete-account-btn",
      onClick: function onClick() {
        setDeleteModal(true);
        setDeleteStep(1);
        setDeletePassword('');
        setDeleteError('');
      }
    }, /*#__PURE__*/React.createElement("svg", {
      style: {
        width: 13,
        height: 13,
        marginRight: 6,
        verticalAlign: 'middle'
      },
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor"
    }, /*#__PURE__*/React.createElement("path", {
      strokeLinecap: "round",
      strokeLinejoin: "round",
      strokeWidth: 2,
      d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
    })), "Delete My Account & All Data")), deleteModal && /*#__PURE__*/React.createElement("div", {
      className: "danger-modal",
      onClick: function onClick(e) {
        if (e.target === e.currentTarget && deleteStep !== 3) setDeleteModal(false);
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "danger-modal-box"
    }, deleteStep === 3 ? /*#__PURE__*/React.createElement("div", {
      className: "danger-deleting"
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        fontSize: 32
      }
    }, "\u23F3"), /*#__PURE__*/React.createElement("p", null, "Deleting your account and all data...", /*#__PURE__*/React.createElement("br", null), "Please do not close the app.")) : deleteStep === 1 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
      className: "danger-modal-title"
    }, "\u26A0 Delete Account"), /*#__PURE__*/React.createElement("div", {
      className: "danger-modal-body"
    }, "This will permanently delete:", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, "All your habits"), ", completion records & streaks", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, "All your posts"), " and comments", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, "All uploaded photos & videos"), /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, "Your account"), " and profile data", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, "This action cannot be undone.")), /*#__PURE__*/React.createElement("button", {
      className: "danger-confirm-btn",
      onClick: function onClick() {
        return setDeleteStep(2);
      }
    }, "I understand, continue \u2192"), /*#__PURE__*/React.createElement("button", {
      className: "danger-cancel-btn",
      onClick: function onClick() {
        return setDeleteModal(false);
      }
    }, "Cancel")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
      className: "danger-modal-title"
    }, isGoogleUser() ? 'Confirm with Google' : 'Confirm with Password'), /*#__PURE__*/React.createElement("div", {
      className: "danger-step"
    }, "Step 2 of 2 \u2014 Final Confirmation"), /*#__PURE__*/React.createElement("div", {
      className: "danger-modal-body"
    }, isGoogleUser() ? /*#__PURE__*/React.createElement(React.Fragment, null, "Click below to re-authenticate with Google and confirm deletion of", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, user.email)) : /*#__PURE__*/React.createElement(React.Fragment, null, "Enter your password to confirm deletion of", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("strong", null, user.email))), !isGoogleUser() && /*#__PURE__*/React.createElement("input", {
      type: "password",
      className: "danger-confirm-input",
      placeholder: "Enter your password",
      value: deletePassword,
      onChange: function onChange(e) {
        return setDeletePassword(e.target.value);
      },
      onKeyDown: function onKeyDown(e) {
        return e.key === 'Enter' && deletePassword && handleDeleteAccount();
      },
      autoFocus: true
    }), deleteError && /*#__PURE__*/React.createElement("div", {
      style: {
        color: '#dc2626',
        fontSize: 11,
        marginBottom: 12,
        padding: '8px 10px',
        background: '#fef2f2',
        border: '1px solid #fca5a5'
      }
    }, deleteError), /*#__PURE__*/React.createElement("button", {
      className: "danger-confirm-btn",
      disabled: !isGoogleUser() && !deletePassword,
      onClick: handleDeleteAccount
    }, "\uD83D\uDDD1 Permanently Delete Everything"), /*#__PURE__*/React.createElement("button", {
      className: "danger-cancel-btn",
      onClick: function onClick() {
        return setDeleteModal(false);
      }
    }, "Cancel")))));
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "app-container"
  }, /*#__PURE__*/React.createElement("div", {
    className: "header"
  }, /*#__PURE__*/React.createElement("div", {
    className: "header-title"
  }, /*#__PURE__*/React.createElement("h1", null, "Habit Tracker PRO"), /*#__PURE__*/React.createElement("p", null, user.displayName || user.email)), /*#__PURE__*/React.createElement("button", {
    className: "logout-btn",
    onClick: onLogout
  }, "Sign Out")), /*#__PURE__*/React.createElement("div", {
    className: "content"
  }, activeTab === 'home' && renderHome(), activeTab === 'feed' && renderFeed(), activeTab === 'profile' && renderProfile()), showModal && /*#__PURE__*/React.createElement(AddHabitModal, {
    onClose: function onClose() {
      return setShowModal(false);
    },
    onAdd: addHabit
  }), /*#__PURE__*/React.createElement("div", {
    className: "tab-bar"
  }, /*#__PURE__*/React.createElement("button", {
    className: "tab-item".concat(activeTab === 'home' ? ' active' : ''),
    onClick: function onClick() {
      setActiveTab('home');
      setSelectedHabit(null);
    }
  }, /*#__PURE__*/React.createElement(HomeIcon, null), /*#__PURE__*/React.createElement("span", null, "Home")), /*#__PURE__*/React.createElement("button", {
    className: "tab-item".concat(activeTab === 'feed' ? ' active' : ''),
    onClick: function onClick() {
      return setActiveTab('feed');
    }
  }, /*#__PURE__*/React.createElement(FeedIcon, null), /*#__PURE__*/React.createElement("span", null, "Feed")), /*#__PURE__*/React.createElement("button", {
    className: "tab-item".concat(activeTab === 'profile' ? ' active' : ''),
    onClick: function onClick() {
      return setActiveTab('profile');
    }
  }, /*#__PURE__*/React.createElement(ProfileIcon, null), /*#__PURE__*/React.createElement("span", null, "Profile"))));
}

/* ── ROOT APP ── */
function App() {
  // authLoading: true while we wait for Firebase to tell us if user is logged in
  // This prevents the flash of AuthPage before onAuthStateChanged fires
  var _useState109 = useState(null),
    _useState110 = _slicedToArray(_useState109, 2),
    user = _useState110[0],
    setUser = _useState110[1];
  var _useState111 = useState(isFirebaseConfigured),
    _useState112 = _slicedToArray(_useState111, 2),
    authLoading = _useState112[0],
    setAuthLoading = _useState112[1];
  useEffect(function () {
    if (!isFirebaseConfigured) {
      var u = localStorage.getItem('demoUser');
      if (u) setUser(JSON.parse(u));
      setAuthLoading(false);
      return;
    }
    // Safety: if Firebase never calls back, stop waiting after 4s
    var authTimeout = setTimeout(function () {
      setAuthLoading(false);
      window.__hidePL && window.__hidePL();
    }, 4000);
    var unsub = auth.onAuthStateChanged(function (u) {
      clearTimeout(authTimeout);
      if (u && isFirebaseConfigured) {
        // Fire-and-forget: don't block auth state with Firestore write
          db.collection('users').doc(u.uid).set({
            uid: u.uid,
            email: u.email || '',
            displayName: u.displayName || '',
            photoURL: u.photoURL || '',
            lastSeen: firebase.firestore.FieldValue.serverTimestamp()
          }, {
            merge: true
          }).catch(function () {});
          setUser(u);
      } else {
        setUser(u || null);
      }
      setAuthLoading(false);
      window.__hidePL && window.__hidePL();
    });
    return function () {
      unsub();
      clearTimeout(authTimeout);
    };
  }, []);
  var handleLogout = function handleLogout() {
    if (!isFirebaseConfigured) {
      localStorage.removeItem('demoUser');
      setUser(null);
    } else auth.signOut();
  };

  // While waiting for Firebase auth — show nothing (pre-loader is still visible)
  if (authLoading) return null;
  return user ? /*#__PURE__*/React.createElement(MainApp, {
    user: user,
    onLogout: handleLogout
  }) : /*#__PURE__*/React.createElement(AuthPage, {
    onAuthSuccess: setUser
  });
}
var _root = ReactDOM.createRoot(document.getElementById('root'));
_root.render(/*#__PURE__*/React.createElement(App, null));

</script>
<!-- ── PWA: Service Worker + Install Prompt + Push Notifications ── -->
<script>
(function() {
    /* 1. Register Service Worker */
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => {
                    console.log('[PWA] SW registered:', reg.scope);
                    // Ask for push notification permission (delayed 5s, let user explore first)
                    setTimeout(() => askNotifPermission(reg), 5000);
                })
                .catch(err => console.warn('[PWA] SW failed:', err));
        });
    }

    /* 2. Intercept install prompt event */
    let deferredPrompt = null;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        // Already installed — skip banner
        if (localStorage.getItem('pwa-installed')) return;
        showInstallBanner();
    });

    /* 3. Show install banner */
    function showInstallBanner() {
        if (document.getElementById('pwa-banner')) return;
        const banner = document.createElement('div');
        banner.id = 'pwa-banner';
        banner.className = 'pwa-install-banner';
        banner.innerHTML = `
            <div class="pwa-install-icon"><img src="./icons/icon-192x192.png" alt="icon"></div>
            <div class="pwa-install-text">
                <strong>Install Habit Tracker Pro</strong>
                <span>Add to home screen for quick access</span>
            </div>
            <button class="pwa-install-btn" id="pwa-install-btn">Install</button>
            <button class="pwa-install-close" id="pwa-install-close">✕</button>
        `;
        document.body.appendChild(banner);

        document.getElementById('pwa-install-btn').onclick = async () => {
            banner.remove();
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === 'accepted') localStorage.setItem('pwa-installed', '1');
            deferredPrompt = null;
        };
        document.getElementById('pwa-install-close').onclick = () => {
            banner.remove();
            localStorage.setItem('pwa-installed', '1');
        };
    }

    /* 4. iOS Safari install hint (iOS does not support beforeinstallprompt) */
    const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
    const isInStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
    if (isIOS && !isInStandalone && !localStorage.getItem('ios-hint-shown')) {
        setTimeout(() => {
            const hint = document.createElement('div');
            hint.style.cssText = 'position:fixed;bottom:90px;left:50%;transform:translateX(-50%);max-width:340px;width:calc(100% - 32px);background:#0a0a0a;color:#fff;padding:14px 16px;font-size:12px;line-height:1.6;z-index:500;text-align:center;box-shadow:0 4px 24px rgba(0,0,0,.3)';
            hint.innerHTML = `
                <div style="font-weight:700;font-size:13px;margin-bottom:6px">📲 Add to iPhone Home Screen</div>
                <div style="opacity:.75">Tap the <strong style="opacity:1">Share button ↑</strong> below → Select "Add to Home Screen" to use like an app</div>
                <button onclick="this.parentElement.remove();localStorage.setItem('ios-hint-shown','1')" style="margin-top:10px;background:white;color:#0a0a0a;border:none;padding:6px 16px;font-weight:700;font-size:11px;cursor:pointer;text-transform:uppercase;letter-spacing:.8px">Got it</button>
            `;
            document.body.appendChild(hint);
        }, 3000);
    }

    /* 5. Push notification request */
    async function askNotifPermission(reg) {
        if (!('Notification' in window)) return;
        if (Notification.permission !== 'default') return;
        if (localStorage.getItem('notif-asked')) return;

        const prompt = document.createElement('div');
        prompt.id = 'notif-prompt';
        prompt.className = 'notif-prompt';
        prompt.innerHTML = `
            <div class="notif-prompt-text">
                <strong>🔔 Enable Daily Reminders</strong>
                We'll remind you when it's time to complete your habits, every day
            </div>
            <button class="notif-yes" id="notif-yes">Enable</button>
            <button class="notif-no"  id="notif-no">No thanks</button>
        `;
        document.body.appendChild(prompt);

        document.getElementById('notif-yes').onclick = async () => {
            prompt.remove();
            localStorage.setItem('notif-asked', '1');
            const permission = await Notification.requestPermission();
            if (permission === 'granted') {
                scheduleDailyReminder(reg);
                // Welcome notification
                reg.showNotification('🎉 Reminders Enabled!', {
                    body: 'We will remind you to complete your habits every day at 8 PM',
                    icon: './icons/icon-192x192.png',
                    badge: './icons/icon-72x72.png',
                });
            }
        };
        document.getElementById('notif-no').onclick = () => {
            prompt.remove();
            localStorage.setItem('notif-asked', '1');
        };
    }

    /* 6. Daily reminder (local, simulated with setTimeout, no backend needed) */
    function scheduleDailyReminder(reg) {
        const now = new Date();
        // Read user's preferred reminder hour (0-23), default = 20 (8pm local time)
        const reminderHour = parseInt(localStorage.getItem('reminder-hour') || '20', 10);
        const next = new Date(now.getFullYear(), now.getMonth(), now.getDate(), reminderHour, 0, 0);
        if (next <= now) next.setDate(next.getDate() + 1);
        const ms = next - now;
        setTimeout(() => {
            if (Notification.permission === 'granted') {
                reg.showNotification('Habit Tracker Pro', {
                    body: "Have you completed today's habits? Tap here to log your progress 💪",
                    icon: './icons/icon-192x192.png',
                    badge: './icons/icon-72x72.png',
                    vibrate: [200, 100, 200],
                });
            }
            // Schedule next day
            scheduleDailyReminder(reg);
        }, ms);
    }

    /* 7. Detect app installed → hide banner */
    window.addEventListener('appinstalled', () => {
        localStorage.setItem('pwa-installed', '1');
        const b = document.getElementById('pwa-banner');
        if (b) b.remove();
        console.log('[PWA] App installed!');
    });
})();
</script>
</body>
</html>